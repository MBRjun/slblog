<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>SL&#39;s Blog</title>
  
  <subtitle>SL&#39;s Blog</subtitle>
  <link href="https://blog.slqwq.cn/atom.xml" rel="self"/>
  
  <link href="https://blog.slqwq.cn/"/>
  <updated>2022-05-03T07:31:15.424Z</updated>
  <id>https://blog.slqwq.cn/</id>
  
  <author>
    <name>SL</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>IPFS - 一个基于点对点网络的超媒体协议</title>
    <link href="https://blog.slqwq.cn/2022/posts/ys6wh9/index.html"/>
    <id>https://blog.slqwq.cn/2022/posts/ys6wh9/index.html</id>
    <published>2022-05-03T20:00:46.000Z</published>
    <updated>2022-05-03T07:31:15.424Z</updated>
    
    <content type="html"><![CDATA[<p>本文章首发于<a href="https://www.yuque.com/ladjeek/ygg4q6">语雀</a>!<br>通过各种高科技功能同步到<a href="https://blog.slqwq.cn">Hajeekn 的博客</a></p><h1 id="IPFS’s-Author"><a href="#IPFS’s-Author" class="headerlink" title="IPFS’s Author"></a>IPFS’s Author</h1><p>IPFS’s Author 是 <code>Juan Benet</code><br><code>Juan Benet</code>在 2014 年创建了 <code>Protocol Labs</code> (协议实验室)<br>协议实验室旗下的项目:</p><ul><li>IPFS</li><li>FileCoin</li></ul><p>协议实验室旨在如何构建下一代互联网</p><h1 id="What’s-IPFS"><a href="#What’s-IPFS" class="headerlink" title="What’s IPFS?"></a>What’s IPFS?</h1><p>依照官网的介绍,总的来说,IPFS 就是一种点对点超媒体协议,它可以使网络更快、更安全、更开放<br>本质上来说,它就是一种去中心化互联网(Peer to Peer) ≈ P2P<br><del>没错,就是孽种 P2P 下载器</del><br><del>这么牛的项目怎么是 P2P 下载器呢?</del> P2P 下载器只是个披着羊皮的狼<br>P2P(Peer to Peer)依靠用户群交换信息<br>以 number.exe 为例<br>当你上传后,无数个 Node(用户) 会瓜分你的 number.exe<br>他们将你的文件分成许多分片,瓜分分片<br>他们在瓜分的同时会获得奖励</p><blockquote><p><strong>是不是听起来很神奇?对的,你没有付出任何东西,别人却能获得奖励,而且你既满足储存文件的需求,储存你文件的人也能得到金钱.这种机制,叫做 FileCoin.你可以把它想象成 Bittorrent+BitCoin 的结合物,实际上他就是这样的.当然不完全是,但核心理念就是这样的.只不过,BitCoin 付出的是算力,而 FileCoin 付出的是硬盘.</strong></p></blockquote><p><strong>摘自 </strong><a href="https://blog.cyfan.top/">ChenYFan の Blog</a><br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202205031235496.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=PscbN&amp;originHeight=546&amp;originWidth=1025&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>这是 IPFS の不权威原理图(来自 <a href="https://blog.cyfan.top/">ChenYFan の Blog</a>)<br>所以,IPFS 相对于响应式请求(HTTP(S) / FTP)不同<br>传统的响应式请求由一个主服务器(或主集群)处理每一个请求,并贡献内容<br>而 IPFS 基于 Peer to Peer 技术,让每个 Node 都贡献,没有中心服务器(去中心化)</p><h2 id="更细致的解释"><a href="#更细致的解释" class="headerlink" title="更细致的解释"></a>更细致的解释</h2><p>IPFS 是一个基于 Git 模型版本管理 &amp; DHT &amp; CBA &amp; Hash 等的产物<br>它基于 DHT(分布式哈希表) 进行寻址<br>而传统的响应式请求由 LBA(基于位置的寻址)<br>而这样,响应式请求的缺点就暴露了出来<br>LBA(基于位置的寻址) 它在查找时所看重的信息是位置,就好比一个网址 <code>https://blog.slqwq.cn/link/</code>如果这个位置被删除了,链接位置转移了,他就会暴露出<img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202205031245294.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;height=185&amp;id=CQc00&amp;originHeight=343&amp;originWidth=289&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=&amp;width=156" alt="">404 Not Found 错误<br>而 IPFS 所采用的 DHT(CBA 基于内容的寻址)就没有这个缺点<br>它在查找时所看重的信息是内容,不管你位置在哪里,只要找到的内容符合要查找的信息,那他就是正确的</p><h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>基于响应式请求(中心化网络)还有一个超级大大大大的弊端<br>那就是<br>非常容易引入审查<br>也就是类似于我们国家的 <code>**Great Firewall of China**</code><strong> <del>(GFW 是一个分布式的入侵检测系统，并不是一个严格意义上的防火墙)</del></strong><br>每个国家的 <code>**gov**</code> 可以很方便的 <code>**BAN**</code> 掉某个网站或者应用<br>引入一个具体事例<br>在 2017 年, <code>**Turkey&#39;s GOV**</code><strong>就用国家安全的理由禁掉了维基百科</strong><br><del>当然,去中心化也不能避免掉 Firewall 的屏蔽,只是不那么容易屏蔽掉罢了</del></p><h1 id="Use-IPFS-IPFS-Client"><a href="#Use-IPFS-IPFS-Client" class="headerlink" title="Use IPFS - IPFS Client"></a>Use IPFS - IPFS Client</h1><p>进入 <a href="https://github.com/ipfs/ipfs-desktop/releases">IPFS-Desktop の Releases</a><br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202205031300858.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=saIWx&amp;originHeight=516&amp;originWidth=1121&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>找到需要的客户端下载并安装<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202205031301473.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=Ry20g&amp;originHeight=141&amp;originWidth=843&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202205031302962.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=GJyn2&amp;originHeight=449&amp;originWidth=664&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>弹出防火墙警报请一定要允许<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202205031303835.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=MBCw0&amp;originHeight=610&amp;originWidth=768&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>在文件处可以上传文件<br>上传点击导入即可<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202205031305797.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=Oo6Mg&amp;originHeight=974&amp;originWidth=1762&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><blockquote><p><strong>接下来，重点来了！</strong> &gt; <strong>ipfs 分享文件有两种方式，是 ipfs 和 ipns，前者采用文件 hash 辨别文件，文件内容一旦改变，原来的链接无法更新，链接格式为 <a href="https://ipfs.io/ipfs/QmZCvMHrE56VqsejmG53xd9bW4RZjtFpLz46QMQjA81orL">https://ipfs.io/ipfs/QmZCvMHrE56VqsejmG53xd9bW4RZjtFpLz46QMQjA81orL</a> ；后者采用用户 id 辨别,内容允许更新，但是用户在线时间过短会导致无法同步，并且有可能暴露用户信息，后者格式为： <a href="https://ipfs.io/ipfs/QmQQKZphgJdEGhTp18NRvVdSJ3RJArRst2keKk3tZvmfPz?filename=index.html">https://ipfs.io/ipfs/QmQQKZphgJdEGhTp18NRvVdSJ3RJArRst2keKk3tZvmfPz?filename=index.html</a> .</strong> &gt; <strong>如果你只是单个文件网页，此处比较建议使用 ipfs，ipns 可能离线时间过长导致无法下载。具体看个人所好。</strong> &gt; <strong>ipfs 链接获取：点击 ··· ,选择复制哈希，在前面加上网关域名即可。</strong> &gt; <strong>ipns 连接获取：点击 ··· ,选择分享，复制链接即可。</strong> &gt; <strong>在善用技术上网的前提下访问 <a href="https://ipfs.io/ipfs/QmZCvMHrE56VqsejmG53xd9bW4RZjtFpLz46QMQjA81orL">https://ipfs.io/ipfs/QmZCvMHrE56VqsejmG53xd9bW4RZjtFpLz46QMQjA81orL</a> 显示目标界面</strong> &gt; <strong>请注意，每次上传后一定要先访问一遍资源，否则文件是不会上传到 ipfs 服务器的！</strong></p></blockquote><p><strong>摘自 </strong><a href="https://blog.cyfan.top/">ChenYFan の Blog</a></p><h1 id="Use-IPFS-IPFS-Gateway"><a href="#Use-IPFS-IPFS-Gateway" class="headerlink" title="Use IPFS - IPFS Gateway"></a>Use IPFS - IPFS Gateway</h1><h2 id="JSProxy-IPFS-Gateway"><a href="#JSProxy-IPFS-Gateway" class="headerlink" title="JSProxy - IPFS Gateway"></a>JSProxy - IPFS Gateway</h2><p>因为 IPFS 默认的网关被 FW 了<br>所以我们可以通过 Worker JSProxy 的方式解锁你自己的网关</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">addEventListener(<span class="string">&quot;fetch&quot;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> url = <span class="keyword">new</span> URL(event.request.url);</span><br><span class="line">  url.hostname = <span class="string">&quot;werevless.herokuapp.com&quot;</span>;</span><br><span class="line">  <span class="keyword">let</span> request = <span class="keyword">new</span> Request(url, event.request);</span><br><span class="line">  event.respondWith(fetch(request));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>粘贴进去,访问 Worker 地址就能看到 404 了<br>然后在 IPFS Client 里复制地址,接在后面就能打开你上传的文件了<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202205031316414.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=hIYvu&amp;originHeight=30&amp;originWidth=766&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><h2 id="JSProxy-Cloudflare-IPFS-Gateway"><a href="#JSProxy-Cloudflare-IPFS-Gateway" class="headerlink" title="JSProxy - Cloudflare IPFS Gateway"></a>JSProxy - Cloudflare IPFS Gateway</h2><p>我们可以通过 Worker JSProxy 的方式解锁你自己的 CNAME</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">addEventListener(<span class="string">&quot;fetch&quot;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> url = <span class="keyword">new</span> URL(event.request.url);</span><br><span class="line">  url.hostname = <span class="string">&quot;cloudflare-ipfs.com&quot;</span>;</span><br><span class="line">  <span class="keyword">let</span> request = <span class="keyword">new</span> Request(url, event.request);</span><br><span class="line">  event.respondWith(fetch(request));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>粘贴进去,就变成了基于 CIG 的你自己的 IPFS 网关</p><h1 id="Use-IPFS-Build-Blog"><a href="#Use-IPFS-Build-Blog" class="headerlink" title="Use IPFS - Build Blog"></a>Use IPFS - Build Blog</h1><p>&gt;</p><h3 id="dnslink-绑定"><a href="#dnslink-绑定" class="headerlink" title="dnslink 绑定"></a>dnslink 绑定</h3><blockquote><p><strong>这个方法无论你的 dns 服务商在哪都能绑定，只不过不在 CloudFlare 托管的用户要多一步。</strong> &gt; <strong>1.将需要绑定的域名,以 CNAME 形式指向 www.cloudflare-ipfs.com ,比如我需要让 showtime.cyfan.top 成为 ipfs 出口，则这么设置。</strong> &gt; <a href="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-191.png"><img src="https://cdn.nlark.com/yuque/0/2022/png/12488964/1651555656264-a0b7414b-e677-4095-aa3c-438457ea4b6a.png#clientId=u046e5d8f-d2c4-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;id=u339277ea&amp;name=image.png&amp;originHeight=32&amp;originWidth=1025&amp;originalType=url&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=5133&amp;status=done&amp;style=none&amp;taskId=ufa67f11d-7dcb-4165-969e-419bb67d4b2&amp;title=" alt="image.png"></a> &gt; <strong>2.使用 txt 记录绑定 ipfs hash，新建 txt 记录，名字是 _dnslink.yourwebsite 一定要加上 yourwebsite！比如我绑定的是 showtime.cyfan.top ，则名称一行填上 _dnslink.showtime !接着内容是 dnslink=/ipfs/ 后面接上 hash，比如 showtimehtml 的 hash 是： QmWAvNck7QBhUAYAEgBFvbvvsMxDC9s55NXVJXeJTjTM1Y 则大概这么填:</strong> &gt; <a href="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-192.png"><img src="https://cdn.nlark.com/yuque/0/2022/png/12488964/1651555656248-734246a7-fc0a-45a7-b8a3-e29cf071752a.png#clientId=u046e5d8f-d2c4-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;id=ude3ef351&amp;name=image.png&amp;originHeight=399&amp;originWidth=816&amp;originalType=url&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=28588&amp;status=done&amp;style=none&amp;taskId=uc9a35331-e84c-462e-96a3-2205c8cffba&amp;title=" alt="image.png"></a> &gt; <strong>3.如果你本来就是托管在 CloudFlare 上的,到此为止就可以了,如果不是托管在 Cloudflare 上,类似 dnspod\alicdn 之类的,那还要获取证书,进入</strong><a href="https://www.cloudflare.com/distributed-web-gateway/">https://www.cloudflare.com/distributed-web-gateway/</a><strong> 拉到最底下</strong> &gt; <a href="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/post/pasted-193.png"><img src="https://cdn.nlark.com/yuque/0/2022/png/12488964/1651555656315-b061963d-525d-42e2-a63e-c6bbc4bd72bd.png#clientId=u046e5d8f-d2c4-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;id=u60a8f843&amp;name=image.png&amp;originHeight=319&amp;originWidth=1101&amp;originalType=url&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=37278&amp;status=done&amp;style=none&amp;taskId=u25eb7a8c-c39d-42bf-aa37-baf21a01544&amp;title=" alt="image.png"></a> &gt; <strong>输入域名，获取证书即可。</strong> &gt; <strong>但问题是，www.cloudflare-ipfs.com 已经被 dns 污染了，你用 cname 绑定是无法正常访问的啦！所以只能用 Workers 绕路啦！</strong></p></blockquote><h3 id="JSProxy-反代-ipfs-io"><a href="#JSProxy-反代-ipfs-io" class="headerlink" title="JSProxy 反代 ipfs.io"></a>JSProxy 反代 ipfs.io</h3><blockquote><p><strong>老办法，Workersjsproxy 反向代理 ipfs 网关，解决</strong><a href="https://npm.elemecdn.com/chenyfan-oss@1.0.0/pic/moji/wc.jpg"><img src="https://cdn.nlark.com/yuque/0/2022/png/12488964/1651555656749-83fe5400-1fb1-4d07-9256-730355325fd4.png#clientId=u046e5d8f-d2c4-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;id=u7f5b9e19&amp;name=image.png&amp;originHeight=808&amp;originWidth=686&amp;originalType=url&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=415957&amp;status=done&amp;style=none&amp;taskId=u5897f376-890b-40bd-90d0-36494dec20f&amp;title=" alt="image.png"></a></p></blockquote><p><strong>依然来自 </strong><a href="https://blog.cyfan.top"><strong>ChenYFan の Blog</strong></a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;本文章首发于&lt;a href=&quot;https://www.yuque.com/ladjeek/ygg4q6&quot;&gt;语雀&lt;/a&gt;!&lt;br&gt;通过各种高科技功能同步到&lt;a href=&quot;https://blog.slqwq.cn&quot;&gt;Hajeekn 的博客&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;I</summary>
      
    
    
    
    <category term="p2p" scheme="https://blog.slqwq.cn/categories/p2p/"/>
    
    <category term="ipfs" scheme="https://blog.slqwq.cn/categories/p2p/ipfs/"/>
    
    
    <category term="p2p" scheme="https://blog.slqwq.cn/tags/p2p/"/>
    
    <category term="peertopeer" scheme="https://blog.slqwq.cn/tags/peertopeer/"/>
    
  </entry>
  
  <entry>
    <title>未备案使用国内服务器 &amp; Cloudreve 部署指南</title>
    <link href="https://blog.slqwq.cn/2022/posts/phiyrf/index.html"/>
    <id>https://blog.slqwq.cn/2022/posts/phiyrf/index.html</id>
    <published>2022-05-02T10:26:46.000Z</published>
    <updated>2022-05-03T07:31:15.426Z</updated>
    
    <content type="html"><![CDATA[<p>本文章首发于<a href="https://www.yuque.com/ladjeek/ygg4q6">语雀</a>!<br>通过各种高科技功能同步到<a href="https://blog.slqwq.cn">Hajeekn 的博客</a><br>正如标题所说<br>若欲正事未备案用国服务器,则不可得,故可以阿里云主机漏洞跳备案<br>跳备案仅适用于 CN 域名,其他域名请自己尝试<br><del>首先我们需要一个阿里云账户</del>(废话)<br>然后实名认证(汝可用支付宝实名,或旧法实名)</p><h1 id="云服务器配置"><a href="#云服务器配置" class="headerlink" title="云服务器配置"></a>云服务器配置</h1><p>在创建云服务器时这样配置<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202205021034784.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=jeN9j&amp;originHeight=554&amp;originWidth=1171&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>实例选 n4.small<br>地域上海 A 区<br>带宽根据自己的需要调<br>然后典型 1h2g</p><h1 id="宝塔安装"><a href="#宝塔安装" class="headerlink" title="宝塔安装"></a>宝塔安装</h1><p>登陆上服务器<br>Ubuntu / Deepin:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ wget -O install.sh http://download.bt.cn/install/install-ubuntu_6.0.sh &amp;&amp; sudo bash install.sh ed8484bec</span><br></pre></td></tr></table></figure><p>CentOS:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum install -y wget &amp;&amp; wget -O install.sh http://download.bt.cn/install/install_6.0.sh &amp;&amp; sh install.sh ed8484bec</span><br></pre></td></tr></table></figure><p>Debian:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ wget -O install.sh http://download.bt.cn/install/install-ubuntu_6.0.sh &amp;&amp; bash install.sh ed8484bec</span><br></pre></td></tr></table></figure><p><strong>不知道自己是什么系统?</strong><br><del>那你就干脆别用了</del><br>这是万能安装脚本:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">if</span> [ -f /usr/bin/curl ];<span class="keyword">then</span> curl -sSO https://download.bt.cn/install/install_panel.sh;<span class="keyword">else</span> wget -O install_panel.sh https://download.bt.cn/install/install_panel.sh;<span class="keyword">fi</span>;bash install_panel.sh ed8484bec</span><br></pre></td></tr></table></figure><p>登上主机后安装 Nginx</p><h1 id="安装-Cloudreve"><a href="#安装-Cloudreve" class="headerlink" title="安装 Cloudreve"></a>安装 Cloudreve</h1><p>去 Cloudreve 的 GitHub 中找安装包<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202205021043200.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=l4mdr&amp;originHeight=253&amp;originWidth=1141&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>登录宝塔<br>创建一个文件夹<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202205021051338.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=zlJwp&amp;originHeight=324&amp;originWidth=618&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>创建完后选择远程下载<br>把地址粘贴进去,等待下载完成<br>然后点击 tar.gz 后面的解压<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202205021052056.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=AmzKD&amp;originHeight=66&amp;originWidth=1593&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>之后给解压出来的文件给 777 权限<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202205021052481.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=JsL3b&amp;originHeight=53&amp;originWidth=1581&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202205021052768.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=zZdj0&amp;originHeight=310&amp;originWidth=501&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>然后进入终端<br>安装 Screen</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get update</span><br><span class="line">$ apt-get install screen</span><br></pre></td></tr></table></figure><p>命令行启动 Screen</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ screen</span><br></pre></td></tr></table></figure><p>用 <code>cd</code> 命令进入文件夹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./cloudreve</span><br></pre></td></tr></table></figure><p>启动 Cloudreve</p><h1 id="配置反向代理-amp-SSL"><a href="#配置反向代理-amp-SSL" class="headerlink" title="配置反向代理 &amp; SSL"></a>配置反向代理 &amp; SSL</h1><p>启动完后回到宝塔,添加站点<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202205021052856.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=ewZuC&amp;originHeight=602&amp;originWidth=801&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>创建完后进入反向代理<br>新建反向代理<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202205021052690.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=pL5we&amp;originHeight=535&amp;originWidth=813&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>目标 URL 写 cloudreve 启动的地址<br>配置完后提交<br>转到 SSL<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202205021052166.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=VtifT&amp;originHeight=262&amp;originWidth=567&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>选择 Let’s Encrypt<br>选择 DNS 验证(因为我们开了反向代理,不能用文件验证)<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202205021053253.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=ue0Qs&amp;originHeight=314&amp;originWidth=570&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>DNS 接口根据自己选择并配置<br>如果没有你的 DNS 提供商,就手动解析<br>配置完后勾选要申请 SSL 的域名<br>点击申请<br>这样就部署好了<br>之后记得在 DNS 提供商解析一下主机<br>A 记录到你鸡子的 IP</p><h1 id="关于账户"><a href="#关于账户" class="headerlink" title="关于账户"></a>关于账户</h1><p>看启动 cloudreve 时终端提示的管理员账户与密码即可</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;本文章首发于&lt;a href=&quot;https://www.yuque.com/ladjeek/ygg4q6&quot;&gt;语雀&lt;/a&gt;!&lt;br&gt;通过各种高科技功能同步到&lt;a href=&quot;https://blog.slqwq.cn&quot;&gt;Hajeekn 的博客&lt;/a&gt;&lt;br&gt;正如标题所说&lt;br&gt;</summary>
      
    
    
    
    <category term="cloudreve" scheme="https://blog.slqwq.cn/categories/cloudreve/"/>
    
    
    <category term="cloudreve" scheme="https://blog.slqwq.cn/tags/cloudreve/"/>
    
  </entry>
  
  <entry>
    <title>将你的网站部署到 Cloudflare 加快访问速度</title>
    <link href="https://blog.slqwq.cn/2022/posts/lyr15g/index.html"/>
    <id>https://blog.slqwq.cn/2022/posts/lyr15g/index.html</id>
    <published>2022-05-01T04:30:41.335Z</published>
    <updated>2022-05-01T04:30:41.337Z</updated>
    
    <content type="html"><![CDATA[<p>本文章首发于<a href="https://www.yuque.com/ladjeek/ygg4q6">语雀</a>!<br>通过各种高科技功能同步到<a href="https://blog.slqwq.cn">Hajeekn 的博客</a><br>上篇我们介绍了 Cloudflare Argo Tunnel 的玩法<br>本篇讲述如何部署网站到 Cloudflare 加快速度</p><h1 id="配置-Cloudflare-Pages"><a href="#配置-Cloudflare-Pages" class="headerlink" title="配置 Cloudflare Pages"></a>配置 Cloudflare Pages</h1><p>本文章基于 Cloudflare Pages,如果没有请用 GitHub + Cloudflare CDN<br>首先打开你的 Cloudflare 账户 Pages 页面<br>选择新建项目<br>授权应用完成后选择储存库<br>为了减少部署时间,推荐使用编译仓库(也就是 Hexo 生成 HTML 的仓库)<br>选择后无脑下一步<br>之后 Cloudflare Pages 就会开始部署你的 Hexo 了</p><h1 id="自定义域名"><a href="#自定义域名" class="headerlink" title="自定义域名"></a>自定义域名</h1><p>打开 Cloudflare Partner 平台和你的 DNS 解析商<br>这里用辣椒和 DNS.LA 演示<br>新建一条解析(两边都是)<br>记录名写你博客的子域名,一般都是 blog<br>你的 DNS 解析商的 CNAME 海外写 blog.xxx.xx.cdn.cloudflare.net<br>默认和国内选择几个好用的自选 Cloudflare CDN 节点就行<br>辣椒的记录名也写 blog<br>记录类型选 CNAME<br>Cloudflare Pages 部署完成后会分给你一个<br>xxxx.pages.dev<br>把他复制填写进记录值然后保存就行<br>接着打开你的 Cloudflare Pages 页面<br>选择刚部署好的项目<br>进入自定义域<br>点击添加,自定义域就写 记录值.域名<br>然后等待 SSL 的启用就行了</p><h1 id="配置缓存"><a href="#配置缓存" class="headerlink" title="配置缓存"></a>配置缓存</h1><p>打开 Cloudflare 的缓存配置页面<br>点击配置<br><strong>Always Online 设置为 true</strong><br><strong>缓存级别 设置为标准</strong><br><strong>浏览器缓存 TTL 设置成 4 小时</strong><br>然后打开规则<br>创建页面规则<br>这样写就行<br>记得把博客记录名.域名替换成你自己的<br>比如我的是 blog.slqwq.cn<br>就写 blog.slqwq.cn<br><del>今天又水了一篇文章,真棒(๑•̀ㅂ•́)و✧</del></p>]]></content>
    
    
    <summary type="html">deploy</summary>
    
    
    
    <category term="cloudflare" scheme="https://blog.slqwq.cn/categories/cloudflare/"/>
    
    
    <category term="cloudflare" scheme="https://blog.slqwq.cn/tags/cloudflare/"/>
    
  </entry>
  
  <entry>
    <title>使用 Notion 构建自己的博客</title>
    <link href="https://blog.slqwq.cn/2022/posts/pgczmw/index.html"/>
    <id>https://blog.slqwq.cn/2022/posts/pgczmw/index.html</id>
    <published>2022-03-12T07:49:46.000Z</published>
    <updated>2022-05-01T04:30:41.400Z</updated>
    
    <content type="html"><![CDATA[<p>本文章首发于<a href="https://slqwq.cn/">Hajeekn の狂人日记</a>!<br>通过各种高科技功能同步到<a href="https://blog.slqwq.cn">Hajeekn 的博客</a><br>本篇文章使用 Notion 编写</p><h1 id="🎶-Notion-Build-Blog"><a href="#🎶-Notion-Build-Blog" class="headerlink" title="🎶 Notion Build Blog!"></a>🎶 Notion Build Blog!</h1><p><strong>Notion</strong>   <strong>Blog</strong></p><p>👋 我是 Hajeekn,这是我用 Notion 发布的第一篇文章</p><p>这篇文章讲述了我是如何使用 <code>**Notion + Vercel + Next.js**</code>搭建”狂人日记”</p><h1 id="Notion-简介"><a href="#Notion-简介" class="headerlink" title="Notion 简介"></a>Notion 简介</h1><p>Notion 是一款非常干净、具有设计感、能使人专注使用的笔记应用</p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/f43a8bb9-bc7e-43f9-a47f-4722fa3c41ef/Untitled.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=L8F26&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><h2 id="Notion-功能介绍-略"><a href="#Notion-功能介绍-略" class="headerlink" title="Notion 功能介绍(略)"></a>Notion 功能介绍(略)</h2><ol><li>它有着部分 Markdown 语法支持</li><li>它支持常见的 Code / Toggle List 等标签</li></ol><p>进入笔记页面,输入一串文字,然后将它们全选</p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3098f68b-3270-4a14-b56d-702236488a79/Untitled.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=fBBW6&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><p>你会看到小方框工具栏</p><p>点击 Text 可以设置文本样式</p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/252345f7-e6a4-453c-b671-547af042d237/Untitled.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=CyDtA&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><p>点击 Link 可以将文字超链接</p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/20c53fef-10f0-4f5d-8b70-b02f28554a82/Untitled.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=UIbYa&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><p>点击 B 可以加粗文字(或者快捷键 <code>Ctrl</code> + <code>B</code>)</p><p>点击 <em>i</em> 可以让文字变成斜体(或者快捷键 <code>Ctrl</code> + <code>i</code>)</p><p>点击 U 可以让文字出现下划线(或者快捷键 <code>Ctrl</code> + <code>u</code>)</p><p>······更多功能请自己探索</p><h1 id="开始部署"><a href="#开始部署" class="headerlink" title="开始部署"></a>开始部署</h1><p>进入<a href="https://github.com/transitive-bullshit/nextjs-notion-starter-kit"><strong>该仓库</strong></a></p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/ba1b03f7-5e86-4c94-96dc-2d0e924a6398/Untitled.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=lO8AQ&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><p>选择 Fork</p><p>接着进入 site.config.js</p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/a67d7a4c-75ec-48f6-8b38-3095a08dbf6c/Untitled.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=B2xOJ&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><p>将红框部分都修改为自己的</p><p>进入笔记页面(全局笔记页面)</p><p>选择 Share</p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/5677b32f-a9e6-4b1f-8540-240a11f99e18/Untitled.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=uA6O3&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><p>复制链接</p><p>会复制类似这样的链接</p><p><a href="https://www.notion.so/Hajeekn-6b0c2e2b7da3416cbbd1481b17d6a98b">https://hajeekn.notion.site/Hajeekn-6b0c2e2b7da3416cbbd1481b17d6a98b</a></p><p>去掉前面的网站,只要<code>**Hajeekn-6b0c2e2b7da3416cbbd1481b17d6a98b**</code></p><p>将他粘贴到 PageId 处</p><p>然后修改其他内容</p><p>domain 处写你的 Notion Page 页面</p><p>点击 Share</p><p>选择 Copy Link</p><p>将拷贝的链接粘贴进去就行了</p><p>然后进入 <code>**Vercel**</code></p><p>选择 New Project</p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/83b7485e-803b-41fb-9fea-8941071e3fe9/Untitled.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=AbjxB&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><p>选择你刚 Fork 的仓库</p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/aa844e97-13cf-4966-95a6-afafa68a7730/Untitled.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=BFYYs&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><p>一切配置完成之后就点击 Deploy 吧</p><p>之后你就可以看到你的博客了</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;本文章首发于&lt;a href=&quot;https://slqwq.cn/&quot;&gt;Hajeekn の狂人日记&lt;/a&gt;!&lt;br&gt;通过各种高科技功能同步到&lt;a href=&quot;https://blog.slqwq.cn&quot;&gt;Hajeekn 的博客&lt;/a&gt;&lt;br&gt;本篇文章使用 Notion 编写&lt;/</summary>
      
    
    
    
    
    <category term="Notion" scheme="https://blog.slqwq.cn/tags/Notion/"/>
    
  </entry>
  
  <entry>
    <title>短链接的解决方案</title>
    <link href="https://blog.slqwq.cn/2022/posts/zroitiai/index.html"/>
    <id>https://blog.slqwq.cn/2022/posts/zroitiai/index.html</id>
    <published>2022-02-03T16:40:42.000Z</published>
    <updated>2022-05-01T04:30:41.402Z</updated>
    
    <content type="html"><![CDATA[<p>本文章首发于<a href="https://www.yuque.com/ladjeek/ygg4q6">语雀</a>!<br>通过各种高科技功能同步到<a href="https://blog.slqwq.cn">Hajeekn 的博客</a><br>方便跳转,所以有了短链接,这篇文章带来短链接的几个解决方案</p><h1 id="GitHub-issues-HTML-Free"><a href="#GitHub-issues-HTML-Free" class="headerlink" title="GitHub issues + HTML(Free)"></a>GitHub issues + HTML(Free)</h1><p>示例: <a href="https://to.slqwq.cn/apg/1">Click Me</a></p><h2 id="实现方法"><a href="#实现方法" class="headerlink" title="实现方法"></a>实现方法</h2><p>进入 <a href="https://service-dali9563-1259647411.sh.apigw.tencentcs.com/?link=4ey4iy4iy4my2cy1hy1hy4iy49y1gy4ly4ay4ny4hy4ny1gy45y48y1hy47y4my41y1hy24&amp;hex=24&amp;xor=6">Shortener</a> 的仓库<br>Fork 仓库<br>然后部署到各种平台<br>以 CloudFlare 为例子<br>进入 <a href="https://service-dali9563-1259647411.sh.apigw.tencentcs.com/?link=a0la4la4la8la7l55l38l38la4l96l37la7l97la9la3la9l37l92l95l38l94la8l89l38l49&amp;hex=11&amp;xor=6">CloudFlare Dashbord</a><br>选择 ‘Pages’<br>选择<img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171138892.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=cERjd&amp;originHeight=58&amp;originWidth=124&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>存储库选择 Fork 的仓库<br>然后一直下一步,等到部署完成就可以访问了</p><h3 id="添加-DNS"><a href="#添加-DNS" class="headerlink" title="添加 DNS"></a>添加 DNS</h3><p>如果你不想要 ‘pages.dev’ 长地址,可以自定义域名<br>进入刚才部署好的项目的管理页面<br>选择自定义域<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171138465.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=oWzXr&amp;originHeight=434&amp;originWidth=937&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>添加你的域名<br>接着做好 CNAME 解析即可</p><h3 id="issues-配置"><a href="#issues-配置" class="headerlink" title="issues 配置"></a>issues 配置</h3><p>新建一个 GitHub 仓库<br>存放你的 issues 数据<br>创建好后进入 issues 选项<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171138152.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=Axdg3&amp;originHeight=433&amp;originWidth=937&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>选择 New issue<br>标题就写想要定向的网站<br>内容可以记录下 ID<br>创建好后 issues 的 id 就是重定向的钥匙<br>你创建了第一个 issues<br>你的重定向地址就是<br>域名/1<br>记录下仓库名备用</p><h3 id="请求配置"><a href="#请求配置" class="headerlink" title="请求配置"></a>请求配置</h3><p>进入 Fork 的仓库<br>编辑 404.html<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171139703.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=PAJmp&amp;originHeight=98&amp;originWidth=619&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>在此处把/repos/<strong>*</strong>/issues/的****改为你的用户名/仓库<br>然后提交<br>等待 CloudFlare 部署完成即可<br>ChenYFan 666<br>ChenYFan yyds<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171139358.gif#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=a2bhR&amp;originHeight=108&amp;originWidth=148&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;本文章首发于&lt;a href=&quot;https://www.yuque.com/ladjeek/ygg4q6&quot;&gt;语雀&lt;/a&gt;!&lt;br&gt;通过各种高科技功能同步到&lt;a href=&quot;https://blog.slqwq.cn&quot;&gt;Hajeekn 的博客&lt;/a&gt;&lt;br&gt;方便跳转,所以有了短</summary>
      
    
    
    
    <category term="link" scheme="https://blog.slqwq.cn/categories/link/"/>
    
    
    <category term="link" scheme="https://blog.slqwq.cn/tags/link/"/>
    
  </entry>
  
  <entry>
    <title>移动宽带开启 IPv6</title>
    <link href="https://blog.slqwq.cn/2021/posts/gw437lla/index.html"/>
    <id>https://blog.slqwq.cn/2021/posts/gw437lla/index.html</id>
    <published>2021-11-16T11:01:54.000Z</published>
    <updated>2022-05-01T04:30:41.403Z</updated>
    
    <content type="html"><![CDATA[<p>本文章首发于<a href="https://www.yuque.com/ladjeek/ygg4q6">语雀</a>!<br>通过各种高科技功能同步到<a href="https://blog.slqwq.cn">Hajeekn 的博客</a></p><h1 id="IPv6-简介-来自百度百科"><a href="#IPv6-简介-来自百度百科" class="headerlink" title="IPv6 简介(来自百度百科)"></a>IPv6 简介(来自百度百科)</h1><p>IPv6 是英文“Internet Protocol Version 6”（互联网协议第 6 版）的缩写，是互联网工程任务组（<a href="https://baike.baidu.com/item/IETF/2800318">IETF</a>）设计的用于替代<a href="https://baike.baidu.com/item/IPv4/422599">IPv4</a>的下一代 IP 协议，其地址数量号称可以为全世界的每一粒沙子编上一个地址 [1] 。<br>由于 IPv4 最大的问题在于网络地址资源不足，严重制约了互联网的应用和发展。IPv6 的使用，不仅能解决网络地址资源数量的问题，而且也解决了多种接入设备连入互联网的障碍 [1]</p><h2 id="IPv6-构成"><a href="#IPv6-构成" class="headerlink" title="IPv6 构成"></a>IPv6 构成</h2><h3 id="表示方法"><a href="#表示方法" class="headerlink" title="表示方法"></a>表示方法</h3><p>IPv6 的地址长度为 128 位，是 IPv4 地址长度的 4 倍。于是 IPv4 点分十进制格式不再适用，采用十六进制表示。IPv6 有 3 种表示方法<br>一、冒分十六进制表示法<br>格式为 X:X:X:X:X:X:X:X，其中每个 X 表示地址中的 16b，以十六进制表示，例如：<br>ABCD:EF01:2345:6789:ABCD:EF01:2345:6789<br>这种表示法中，每个 X 的前导 0 是可以省略的，例如：<br>2001:0DB8:0000:0023:0008:0800:200C:417A→ 2001:DB8:0:23:8:800:200C:417A<br>二、0 位压缩表示法<br>在某些情况下，一个 IPv6 地址中间可能包含很长的一段 0，可以把连续的一段 0 压缩为“::”。但为保证地址解析的唯一性，地址中”::”只能出现一次，例如：</p><ul><li>FF01:0:0:0:0:0:0:1101 → FF01::1101</li><li>0:0:0:0:0:0:0:1 → ::1</li><li>0:0:0:0:0:0:0:0 → ::</li></ul><p>三、内嵌 IPv4 地址表示法<br>为了实现 IPv4-IPv6 互通，IPv4 地址会嵌入 IPv6 地址中，此时地址常表示为：X:X:X:X:X:X:d.d.d.d，前 96b 采用冒分十六进制表示，而最后 32b 地址则使用 IPv4 的点分十进制表示，例如::192.168.0.1 与::FFFF:192.168.0.1 就是两个典型的例子，注意在前 96b 中，压缩 0 位的方法依旧适用 [9]</p><h3 id="报文内容"><a href="#报文内容" class="headerlink" title="报文内容"></a>报文内容</h3><p>IPv6<a href="https://baike.baidu.com/item/%E6%8A%A5%E6%96%87">报文</a>的整体结构分为 IPv6 报头、扩展报头和上层协议数据 3 部分。IPv6 报头是必选报文头部，长度固定为 40B，包含该报文的基本信息；扩展报头是可选报头，可能存在 0 个、1 个或多个，IPv6 协议通过扩展报头实现各种丰富的功能；上层协议数据是该 IPv6 报文携带的上层数据，可能是<a href="https://baike.baidu.com/item/ICMPv6">ICMPv6</a>报文、<a href="https://baike.baidu.com/item/TCP/33012">TCP</a>报文、UDP 报文或其他可能报文。<br>IPv6 的<strong>报文头部</strong>结构如图：<br><a href="https://baike.baidu.com/pic/IPv6/172297/0/eaf81a4c510fd9f94e7dcd152d2dd42a2834a460?fr=lemma&amp;ct=single"><img src="https://cdn.nlark.com/yuque/0/2021/jpeg/12488964/1637031905164-8b27a9ba-a02e-48c9-93a7-7695469a6708.jpeg#clientId=uc53eaa19-b6aa-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;id=u551d5b2a&amp;margin=%5Bobject%20Object%5D&amp;originHeight=279&amp;originWidth=600&amp;originalType=url&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=u1eb0cdc3-b099-468f-906f-2c3236148cd&amp;title=" alt=""></a></p><div class="table-container"><table><thead><tr><th><strong>版本号</strong></th><th>表示协议版本．值为 6</th></tr></thead><tbody><tr><td><strong>流量等级</strong></td><td>主要用于 QoS</td></tr><tr><td><strong>流标签</strong></td><td>用来标识同一个流里面的报文</td></tr><tr><td><strong>载荷长度</strong></td><td>表明该 IPv6 包头部后包含的字节数，包含扩展头部</td></tr><tr><td><strong>下一报头</strong></td><td>该字段用来指明报头后接的报文头部的类型，若存在扩展头，表示第一个扩展头的类型，否则表示其上层协议的类型，它是 IPv6 各种功能的核心实现方法</td></tr><tr><td><strong>跳数限制</strong></td><td>该字段类似于 IPv4 中的<a href="https://baike.baidu.com/item/TTL/130248">TTL</a>，每次转发跳数减一，该字段达到 0 时包将会被丢弃</td></tr><tr><td><strong>源地址</strong></td><td>标识该报文的来源地址</td></tr><tr><td><strong>目的地址</strong></td><td>标识该报文的目的地址</td></tr></tbody></table></div><p><strong>扩展头部</strong>：IPv6 报文中不再有“选项”字段，而是通过“下一报头”字段配合 IPv6 扩展报头来实现选项的功能。使用扩展头时，将在 IPv6 报文下一报头字段表明首个扩展报头的类型，再根据该类型对扩展报头进行读取与处理。每个扩展报头同样包含下一报头字段，若接下来有其他扩展报头，即在该字段中继续标明接下来的扩展报头的类型，从而达到添加连续多个扩展报头的目的。在最后一个扩展报头的下一报头字段中，则标明该报文上层协议的类型，用以读取上层协议数据 [10]</p><h2 id="地址类型"><a href="#地址类型" class="headerlink" title="地址类型"></a>地址类型</h2><p>IPv6 协议主要定义了三种地址类型：单播地址（Unicast Address）、组播地址（Multicast Address）和任播地址（Anycast Address）。与原来在 IPv4 地址相比，新增了“任播地址”类型，取消了原来 IPv4 地址中的广播地址，因为在 IPv6 中的广播功能是通过组播来完成的<br>单播地址：用来唯一标识一个接口，类似于 IPv4 中的单播地址。发送到单播地址的数据<a href="https://baike.baidu.com/item/%E6%8A%A5%E6%96%87">报文</a>将被传送给此地址所标识的一个接口<br>组播地址：用来标识一组接口（通常这组接口属于不同的节点），类似于 IPv4 中的组播地址。发送到组播地址的数据报文被传送给此地址所标识的所有接口<br>任播地址：用来标识一组接口（通常这组接口属于不同的节点）。发送到任播地址的数据报文被传送给此地址所标识的一组接口中距离源节点最近（根据使用的<a href="https://baike.baidu.com/item/%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE">路由协议</a>进行度量）的一个接口。<br>IPv6 地址类型是由地址前缀部分来确定，主要地址类型与地址前缀的对应关系如下：</p><div class="table-container"><table><thead><tr><th><strong>地址类型</strong></th><th></th><th><strong>地址前缀（二进制）</strong></th><th><strong>IPv6 前缀标识</strong></th></tr></thead><tbody><tr><td><strong>单播地址</strong></td><td>未指定地址</td><td>00…0(128 bits)</td><td>::/128</td></tr><tr><td></td><td>环回地址</td><td>00…1(128 bits)</td><td>::1/128</td></tr><tr><td></td><td>链路本地地址</td><td>1111111010</td><td>FE80::/10</td></tr><tr><td></td><td>唯一本地地址</td><td>1111 110</td><td>FC00::/7</td></tr></tbody></table></div><p>（包括 FD00::/8 和<br>不常用的 FC00::/8） |<br>| | 站点本地地址（已弃用，被唯一本地地址代替） | 1111111011 | FEC0::/10 |<br>| | 全局单播地址 | 其他形式 | - |<br>| <strong>组播地址</strong> |</p><p>| 11111111 | FF00::/8 |<br>| <strong>任播地址</strong> |</p><p>| 从单播地址空间中进行分配，使用单播地址的格式 | |</p><p>[11]</p><h3 id="单播地址"><a href="#单播地址" class="headerlink" title="单播地址"></a>单播地址</h3><p>IPv6 单播地址与 IPv4 单播地址一样，都只标识了一个接口。为了适应负载平衡系统，<a href="https://baike.baidu.com/item/RFC/1840">RFC</a>3513 允许多个接口使用同一个地址，只要这些接口作为主机上实现的 IPv6 的单个接口出现。单播地址包括四个类型：全局单播地址、本地单播地址、兼容性地址、特殊地址<br>一、全局单播地址：等同于 IPv4 中的公网地址，可以在 IPv6 Internet 上进行全局路由和访问。这种地址类型允许路由前缀的聚合，从而限制了全球路由表项的数量<br>二、本地单播地址：<br>链路本地地址和唯一本地地址都属于本地单播地址，在 IPv6 中，本地单播地址就是指本地网络使用的单播地址，也就是 IPV4 地址中<a href="https://baike.baidu.com/item/%E5%B1%80%E5%9F%9F%E7%BD%91">局域网</a>专用地址。每个接口上至少要有一个链路本地单播地址，另外还可分配任何类型（单播、任播和组播）或范围的 IPv6 地址<br>(1)链路本地地址（FE80::/10）：仅用于单个链路（链路层不能跨 VLAN），不能在不同子网中路由。结点使用链路本地地址与同一个链路上的相邻结点进行通信。例如，在没有路由器的单链路 IPv6 网络上，主机使用链路本地地址与该链路上的其他主机进行通信<br>(2)唯一本地地址（FC00::/7）：唯一本地地址是本地全局的，它应用于本地通信，但不通过 Internet 路由，将其范围限制为组织的边界<br>(3)站点本地地址（FEC0::/10，新标准中已被唯一本地地址代替）<br>三、兼容性地址：在 IPv6 的转换机制中还包括了一种通过 IPv4 路由接口以隧道方式动态传递 IPv6 包的技术。这样的 IPv6 结点会被分配一个在低 32 位中带有全球 IPv4 单播地址的 IPv6 全局单播地址。另有一种嵌入 IPv4 的 IPv6 地址，用于局域网内部，这类地址用于把 IPv4 结点当作 IPv6 结点。此外，还有一种称为“6to4”的 IPv6 地址，用于在两个通过 Internet 同时运行 IPv4 和 IPv6 的结点之间进行通信<br>四、特殊地址：包括未指定地址和<a href="https://baike.baidu.com/item/%E7%8E%AF%E5%9B%9E%E5%9C%B0%E5%9D%80">环回地址</a>。未指定地址（0:0:0:0:0:0:0:0 或::）仅用于表示某个地址不存在。它等价于 IPv4 未指定地址 0.0.0.0。未指定地址通常被用做尝试验证暂定地址唯一性数据包的源地址，并且永远不会指派给某个接口或被用做目标地址。环回地址（0:0:0:0:0:0:0:1 或::1）用于标识环回接口，允许节点将数据包发送给自己。它等价于 IPv4 环回地址 127.0.0.1。发送到环回地址的数据包永远不会发送给某个链接，也永远不会通过 IPv6 路由器转发 [12]</p><h3 id="组播地址"><a href="#组播地址" class="headerlink" title="组播地址"></a>组播地址</h3><p>IPv6 组播地址可识别多个接口，对应于一组接口的地址（通常分属不同节点）。发送到组播地址的数据包被送到由该地址标识的每个接口。使用适当的组播路由<a href="https://baike.baidu.com/item/%E6%8B%93%E6%89%91">拓扑</a>，将向组播地址发送的数据包发送给该地址识别的所有接口。任意位置的 IPv6 节点可以侦听任意 IPv6 组播地址上的组播通信。IPv6 节点可以同时侦听多个组播地址，也可以随时加入或离开组播组。<br>IPv6 组播地址的最明显特征就是最高的 8 位固定为 1111 1111。IPv6 地址很容易区分组播地址，因为它总是以 FF 开始的 [12]<br><a href="https://baike.baidu.com/pic/IPv6/172297/0/8718367adab44aeddfee9d9ebb1c8701a18bfb2c?fr=lemma&amp;ct=single"><img src="https://cdn.nlark.com/yuque/0/2021/jpeg/12488964/1637031981412-87465c12-6069-423d-950f-08ecb1cc8b7d.jpeg#clientId=uc53eaa19-b6aa-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;id=u8871b60f&amp;margin=%5Bobject%20Object%5D&amp;originHeight=119&amp;originWidth=500&amp;originalType=url&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;taskId=ua85d19d7-dad5-4f11-a52c-9e9cf79fc3a&amp;title=" alt=""></a></p><h3 id="任播地址"><a href="#任播地址" class="headerlink" title="任播地址"></a>任播地址</h3><p>一个 IPv6 任播地址与组播地址一样也可以识别多个接口，对应一组接口的地址。大多数情况下，这些接口属于不同的节点。但是，与组播地址不同的是，发送到任播地址的数据包被送到由该地址标识的其中一个接口。<br>通过合适的路由拓扑，目的地址为任播地址的数据包将被发送到单个接口（该地址识别的最近接口，最近接口定义的根据是因为路由距离最近），而组播地址用于一对多通信，发送到多个接口。一个任播地址必须不能用作 IPv6 数据包的源地址；也不能分配给 IPv6 主机，仅可以分配给 IPv6 路由器 [13]</p><h1 id="开启-IPv6"><a href="#开启-IPv6" class="headerlink" title="开启 IPv6"></a>开启 IPv6</h1><p>就目前来说中国电信、移动、联通等运营商，2019 年已经完成了门户网站、网站营业厅、掌上营业厅 APP、邮箱 APP 的 IPv6 的深度改造。根据最新监测数据，基础电信企业 30 款自营移动互联网应用平均 IPv6 流量占比超过 71%<br>大多数地区都实现了覆盖,但是你的宽带默认是不启用 IPv6 的,我们是需要手动开启的<br>本文以移动宽带做演示</p><h2 id="光猫配置-创维-DT741-csf"><a href="#光猫配置-创维-DT741-csf" class="headerlink" title="光猫配置(创维 DT741-csf)"></a>光猫配置(创维 DT741-csf)</h2><p>打开光猫配置界面<br>一般地址都是 192.168.1.1<br>移动光猫超级管理员:<br>账号: CMCCAdmin<br>密码: aDm8H%MdA<br>登陆后进入 网络-宽带设置-Internet 连接<br>在连接名称下拉框中找到 4_INTERNET_R_VID_41 (根据实际情况选择)<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171132721.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=BlySd&amp;originHeight=80&amp;originWidth=414&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>选定后找到<br>全局地址获取方式、网关获取方式、DNS 获取方式、前缀获取方式<br>打开 F12 开发者工具<br><img src="https://cdn.nlark.com/yuque/0/2021/png/12488964/1637032653642-c291628b-e16b-4b80-9451-0130f731f816.png#clientId=uc53eaa19-b6aa-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=16&amp;id=uf0766619&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=32&amp;originWidth=38&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=376&amp;status=done&amp;style=none&amp;taskId=u78871404-b51f-414d-97e2-2b4a98b0dbd&amp;title=&amp;width=19" alt="image.png">使用小箭头定位到下拉框<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171132237.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=rcH7t&amp;originHeight=433&amp;originWidth=937&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>手动将 disabled 删除<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171132856.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=pemya&amp;originHeight=49&amp;originWidth=455&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>将全局地址获取方式、网关获取方式、DNS 获取方式改为 SLAAC<br>前缀获取方式改为 DHCPv6<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171132940.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=MW5jQ&amp;originHeight=152&amp;originWidth=395&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>然后点击修改按钮就保存了</p><h3 id="检查-IPv6-是否设置成功"><a href="#检查-IPv6-是否设置成功" class="headerlink" title="检查 IPv6 是否设置成功"></a>检查 IPv6 是否设置成功</h3><p>进入 状态 - 网络侧信息 - IPv6 连接信息<br>如果类似这样<img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171133290.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=uqfRN&amp;originHeight=541&amp;originWidth=1025&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt="">就说明获取成功了</p><h2 id="路由器配置-Xiaomi-AX9000-演示"><a href="#路由器配置-Xiaomi-AX9000-演示" class="headerlink" title="路由器配置(Xiaomi AX9000 演示)"></a>路由器配置(Xiaomi AX9000 演示)</h2><p>进入路由器网关<br>一般都是 192.168.0.1<br>有些时候不一样,比如小米是 192.168.31.1<br>进入后选择常用设置 - 上网设置<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171133801.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=meApw&amp;originHeight=868&amp;originWidth=1535&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>往下翻在 IPV6 网络设置处打勾<br>上网方式依照环境选</p><ul><li>路由器拨号选 Native</li><li>光猫拨号路由器 DHCP 选 NAT6</li><li>当运营商下发了静态 IPv6 时选择 静态 IPv6 并按照运营商提供的信息填写,否则根据环境用上面的</li></ul><p><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171133007.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=E8pDl&amp;originHeight=499&amp;originWidth=786&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>我这边是因为移动来升级过光猫而且给我改成了光猫拨号<del>(气死 👿,而且改成桥接还没网络)</del><br>所以我就选择 NAT6<br>DNS 自填写<br>我用的是 <a href="https://alidns.com/">阿里 DNS</a><br>配置完后记得点击应用<br>应用完后往上翻<br>在上网信息里出现了 IPv6 信息就说明成功了<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171133599.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=k7dwo&amp;originHeight=527&amp;originWidth=850&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><h1 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><ul><li><a href="https://baike.baidu.com/item/IPv6/172297/">百度百科 IPv6</a></li><li><a href="https://zhuanlan.zhihu.com/p/368595019/">知乎蓝队云</a></li><li><a href="https://10086.cn/">移动客服</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;本文章首发于&lt;a href=&quot;https://www.yuque.com/ladjeek/ygg4q6&quot;&gt;语雀&lt;/a&gt;!&lt;br&gt;通过各种高科技功能同步到&lt;a href=&quot;https://blog.slqwq.cn&quot;&gt;Hajeekn 的博客&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;I</summary>
      
    
    
    
    <category term="chinamobile" scheme="https://blog.slqwq.cn/categories/chinamobile/"/>
    
    
    <category term="chinamobile" scheme="https://blog.slqwq.cn/tags/chinamobile/"/>
    
    <category term="ipv6" scheme="https://blog.slqwq.cn/tags/ipv6/"/>
    
  </entry>
  
  <entry>
    <title>Windows Subsystem for Android™ 安装教程</title>
    <link href="https://blog.slqwq.cn/2021/posts/yoelghal/index.html"/>
    <id>https://blog.slqwq.cn/2021/posts/yoelghal/index.html</id>
    <published>2021-10-29T19:05:11.000Z</published>
    <updated>2022-05-01T04:30:41.408Z</updated>
    
    <content type="html"><![CDATA[<p>本文章首发于<a href="https://www.yuque.com/ladjeek/ygg4q6">语雀</a>!<br>通过各种高科技功能同步到<a href="https://blog.slqwq.cn">Hajeekn 的博客</a><br>微软的安卓子系统已经发布很久了,这篇文章教大家如何免美区免亚马逊安装 <strong>Windows Subsystem for Android™</strong></p><h1 id="获取并安装-Windows-Subsystem-for-Android™-包"><a href="#获取并安装-Windows-Subsystem-for-Android™-包" class="headerlink" title="获取并安装 Windows Subsystem for Android™ 包"></a>获取并安装 Windows Subsystem for Android™ 包</h1><p><a href="https://www.microsoft.com/en-us/p/windows-subsystem-for-android-with-amazon-appstore/9p3395vx91nr?activetab=pivot:overviewtab">https://www.microsoft.com/en-us/p/windows-subsystem-for-android-with-amazon-appstore/9p3395vx91nr?activetab=pivot:overviewtab</a><br>这是 Windows Subsystem for Android™ 的微软应用商店地址,但是显然是不能在国区安装的<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171126089.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=DE8LP&amp;originHeight=1020&amp;originWidth=1920&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>所以我们需要对它进行抓包<br><a href="https://store.rg-adguard.net/">https://store.rg-adguard.net/</a><br>进入这个网站<br>将商店地址填写进去<br>保证填写后的配置如下<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171127030.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=WLFHV&amp;originHeight=435&amp;originWidth=937&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>这边注意通道选择 <strong>Slow(Windows Insider Slow) </strong><br>配置好后点击旁边的”√”<br>稍等一会儿列表就出来了<br>出来之后划到最下方,找到 1.21GB 的包,点击它下载下来<br>下载可以使用多线程软件加快速度<br>下载好后你会得到一个 msixbundle<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171127520.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=JHdoS&amp;originHeight=203&amp;originWidth=131&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>这个包不能直接安装,直接安装会报错<br>我们需要使用 Powershell 安装<br><strong>用管理员打开 Powershell</strong><br>用这个指令安装</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">add-appxpackage</span> <span class="string">&quot;文件地址&quot;</span></span><br></pre></td></tr></table></figure><p>对于 Windows 11<br>你获取文件地址可以右键文件选择获取文件地址</p><p><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171127335.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=kE8Kt&amp;originHeight=587&amp;originWidth=1204&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>安装好后任务栏会出现 Windows Subsystem for Android™<br>这时已经安装完成了</p><h1 id="配置-Windows-Subsystem-for-Android™"><a href="#配置-Windows-Subsystem-for-Android™" class="headerlink" title="配置 Windows Subsystem for Android™"></a>配置 Windows Subsystem for Android™</h1><h2 id="配置-ADB"><a href="#配置-ADB" class="headerlink" title="配置 ADB"></a>配置 ADB</h2><p>打开 Windows Subsystem for Android™<br>将子系统资源调整为持续<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171127092.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=KquZl&amp;originHeight=194&amp;originWidth=1178&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>接着打开开发者模式<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171128036.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=LgLDB&amp;originHeight=98&amp;originWidth=1206&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>然后我们需要安装 ADB<br><a href="https://developer.android.google.cn/studio/releases/platform-tools">SDK Platorm Tools</a><br>进入后依照系统版本选择 ADB<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171129876.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=NdOYc&amp;originHeight=434&amp;originWidth=937&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>将下载好的 ADB 解压到一个你不会动到的地方<br>我放在了系统盘根目录<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171129765.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=FJSce&amp;originHeight=806&amp;originWidth=1362&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>接着打开高级系统设置<br>选择环境变量<br>在系统变量内新建一个变量叫做 “adb”<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171129310.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=qLPNl&amp;originHeight=217&amp;originWidth=839&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>变量值写你放 adb 的文件夹<br>比如我的是 C:\adb 这里就写 C:\adb<br>接着双击用户变量的 Path<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171129451.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=yto8B&amp;originHeight=664&amp;originWidth=677&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>在这里新建一个<br>值写 %adb%</p><h2 id="驱动安装"><a href="#驱动安装" class="headerlink" title="驱动安装"></a>驱动安装</h2><p>在极少数情况下,会出现与驱动有关的错误,这可能就是你没有安装 adb 驱动<br>资源 by: <a href="https://jamcz.com/">晨中网络科技</a><br>进入 <a href="https://cz-jam.lanzoui.com/iTbJrtpfa5e">https://cz-jam.lanzoui.com/iTbJrtpfa5e</a> (提取码 intr)<br>下载.7z 文件并解压<br>在里面根据系统型号选择程序<br>32 选择 x32<br>64 选择 x64<br>这时问题应该就解决了</p><h2 id="调整内存-非必须"><a href="#调整内存-非必须" class="headerlink" title="调整内存(非必须)"></a>调整内存(非必须)</h2><p>微软官方给的推荐要求是内存为 16GB<br>我的机带内存是 8GB<br>所以就要通过虚拟内存来增加了<br>进入高级系统设置<br>选择性能设置<br>进入高级选项卡,点击虚拟内存下的更改<br>将自动管理所有驱动器的分页文件大小取消<br>选择一个空间够的盘,选择自定义大小,根据需要调整<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171129975.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=ca0Zf&amp;originHeight=694&amp;originWidth=508&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>注意 GB 和 MB 之间的进率是 1024<br>1GB = 1024MB<br>1024GB = 1024*1024MB<br>调整完后别忘了点击设置<br>然后在点击确定</p><h1 id="使用-Windows-Subsystem-for-Android™"><a href="#使用-Windows-Subsystem-for-Android™" class="headerlink" title="使用 Windows Subsystem for Android™"></a>使用 Windows Subsystem for Android™</h1><h2 id="安装-APK"><a href="#安装-APK" class="headerlink" title="安装 APK"></a>安装 APK</h2><p>Windows Subsystem for Android™ 是支持安装第三方 APK 的,需要通过 ADB 来安装<br>在安装 APK 之前你需要点击”文件”<br>启动一次 Windows Subsystem for Android™<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171130047.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=OxIuv&amp;originHeight=794&amp;originWidth=1350&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt="">出现这个界面后就可以关闭窗口了<br>打开开发者模式后会出现一行小字<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171130483.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=uQanT&amp;originHeight=20&amp;originWidth=898&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>于是我们可以通过 127.0.0.1:58526 连接 Windows Subsystem for Android™<br>打开终端<br>输入指令:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb connect <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">58526</span></span><br></pre></td></tr></table></figure><p>其中地址要根据提示来改变<br>当出现 “connected to 127.0.0.1:58526” 提示时就说明已经连接到 Windows Subsystem for Android™ 了<br>我们可以安装一个[酷安]以便下次安装不用指令<br>安装 apk 使用这个指令:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb install <span class="string">&quot;文件地址&quot;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;本文章首发于&lt;a href=&quot;https://www.yuque.com/ladjeek/ygg4q6&quot;&gt;语雀&lt;/a&gt;!&lt;br&gt;通过各种高科技功能同步到&lt;a href=&quot;https://blog.slqwq.cn&quot;&gt;Hajeekn 的博客&lt;/a&gt;&lt;br&gt;微软的安卓子系统已经</summary>
      
    
    
    
    <category term="Windows" scheme="https://blog.slqwq.cn/categories/Windows/"/>
    
    
    <category term="Windows" scheme="https://blog.slqwq.cn/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>Windows 使用 Scoop 管理软件</title>
    <link href="https://blog.slqwq.cn/2021/posts/kmlrip/index.html"/>
    <id>https://blog.slqwq.cn/2021/posts/kmlrip/index.html</id>
    <published>2021-08-22T14:08:23.000Z</published>
    <updated>2022-05-01T04:30:41.334Z</updated>
    
    <content type="html"><![CDATA[<p>本文章首发于<a href="https://www.yuque.com/ladjeek/ygg4q6">语雀</a>!<br>通过各种高科技功能同步到<a href="https://blog.slqwq.cn">Hajeekn 的博客</a><br>本篇文章参考 <a href="https://www.dejavu.moe/posts/windows-scoop/">Dejavu</a> 的文章和 <a href="https://scoop-docs.vercel.app/">Scoop</a> 官方文档<br>Windows 和 MacOS Linux 不一样<br>Windows 安装软件的途径一般是搜索引擎/软件管家</p><p>而 MacOS Linux 有自己的包管理器<br>MacOS 是 Homebrew<br>Linux 是 apt<br>Windows 下其实也有包管理器,比较流行的是</p><ul><li><a href="https://scoop.sh/">Scoop</a></li><li><a href="https://chocolatey.org/">Chocolatey</a></li><li><a href="https://github.com/microsoft/winget-cli">Winget-cli</a></li></ul><p>Scoop 和 Chocolatey 都是比较出名的第三方包管理器了,Winget 是微软整的一个新活<br>但是严格来说，Scoop 并不算是 “包管理器”，Scoop 官方解释为 “Scoop 是 Windows 的命令行安装程序”，但是它基本实现了一个包管理器的功能</p><h1 id="系统要求"><a href="#系统要求" class="headerlink" title="系统要求"></a>系统要求</h1><ul><li>Windows 7 SP1+ / Windows Server 2008+</li><li><a href="https://aka.ms/wmf5download">PowerShell 5</a> / <a href="https://docs.microsoft.com/en-us/powershell/scripting/install/installing-powershell-core-on-windows?view=powershell-6">PowerShell Core</a> 和 <a href="https://www.microsoft.com/net/download">.NET Framework 4.5</a> (或更高版本)</li></ul><h1 id="配置-Scoop-目录"><a href="#配置-Scoop-目录" class="headerlink" title="配置 Scoop 目录"></a>配置 Scoop 目录</h1><p>Scoop 默认的安装本体和软件目录为:<code>C:\Users\%username%\scoop\</code><br>Scoop 默认安装全局软件的目录为: <code>C:\ProgramData\scoop\</code><br>在我们安装 Scoop 前,我们应该使用环境变量配置安装目录<br>配置本体和软件目录:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$env</span>:SCOOP=<span class="string">&#x27;&lt;盘符&gt;:\Scoop&#x27;</span></span><br><span class="line">[Environment]::SetEnvironmentVariable(<span class="string">&#x27;SCOOP&#x27;</span>, <span class="variable">$env</span>:SCOOP, <span class="string">&#x27;User&#x27;</span>)</span><br></pre></td></tr></table></figure><p>配置全局软件目录:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$env</span>:SCOOP_GLOBAL=<span class="string">&#x27;&lt;盘符&gt;:\Scoop\Global&#x27;</span></span><br><span class="line">[Environment]::SetEnvironmentVariable(<span class="string">&#x27;SCOOP_GLOBAL&#x27;</span>, <span class="variable">$env</span>:SCOOP_GLOBAL, <span class="string">&#x27;Machine&#x27;</span>)</span><br></pre></td></tr></table></figure><p>配置完成后就可以开始安装 Scoop 了</p><h1 id="安装-Scoop"><a href="#安装-Scoop" class="headerlink" title="安装 Scoop"></a>安装 Scoop</h1><p>打开你的 Windows Terminal / Powershell 5<br>输入安装指令:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iwr -useb get.scoop.sh | iex</span><br></pre></td></tr></table></figure><p>安装时鉴于国内防火长城,推荐打开全局代理<br>当提示 successfully 的时候就安装完成了</p><h1 id="安装-Git"><a href="#安装-Git" class="headerlink" title="安装 Git"></a>安装 Git</h1><p>Git 是 Scoop 必须的组件,现在你可以通过一个简单指令安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoop install git openssh</span><br></pre></td></tr></table></figure><h1 id="安装-Aria2"><a href="#安装-Aria2" class="headerlink" title="安装 Aria2"></a>安装 Aria2</h1><p>接着我们需要安装 Aria2 让 Scoop 以多线程下载<br>你也可以通过一个简单的指令下载</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoop install aria2</span><br></pre></td></tr></table></figure><p>安装完成后需要配置一下 Aria2 的参数</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启用 Aria2</span></span><br><span class="line">scoop config aria2-enabled <span class="literal">true</span></span><br><span class="line"><span class="comment"># 设置单任务最大线程为 16</span></span><br><span class="line">scoop config aria2-split 16</span><br><span class="line"><span class="comment"># 设置单服务器最大线程为 16</span></span><br><span class="line">scoop config aria2-max-connection-per-server 16</span><br><span class="line"><span class="comment"># 设置文件最小切片大小为 1M</span></span><br><span class="line">scoop config aria2-min-split-size 1M</span><br></pre></td></tr></table></figure><h1 id="安装-Sudo"><a href="#安装-Sudo" class="headerlink" title="安装 Sudo"></a>安装 Sudo</h1><p>如果你使用 Scoop 全局安装软件(如 Node.js)你便需要管理员权限<br>安装 Sudo 可以简化提取权限步骤<br>同样,你也可以通过一个简单指令安装 Sudo</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoop install sudo</span><br></pre></td></tr></table></figure><h1 id="常用-Scoop-Bucket"><a href="#常用-Scoop-Bucket" class="headerlink" title="常用 Scoop Bucket"></a>常用 Scoop Bucket</h1><div class="table-container"><table><thead><tr><th><a href="https://github.com/lukesampson/scoop">Main</a></th><th>Windows 的命令行安装程序</th></tr></thead><tbody><tr><td><a href="https://github.com/lukesampson/scoop-extras">extras</a></td><td>包含不太符合主存储桶标准的应用</td></tr><tr><td><a href="https://github.com/ScoopInstaller/Main">main</a></td><td>下一代的 Scoop 默认 Bucket</td></tr><tr><td><a href="https://github.com/chawyehsu/dorado">chawyehsu/dorado</a></td><td>🐟 又是一个可爱的 Scoop 的 Bucket</td></tr><tr><td><a href="https://github.com/Ash258/Scoop-Ash258">Ash258/Scoop-Ash258</a></td><td>个人 Bucket，包含各种应用</td></tr><tr><td><a href="https://github.com/matthewjberger/scoop-nerd-fonts">nerd-fonts</a></td><td>一个用于安装 Nerd Fonts 字体的 Bucket</td></tr><tr><td><a href="https://github.com/ScoopInstaller/Java">java</a></td><td>用于 Oracle Java, OpenJDK, Zulu, ojdkbuild, AdoptOpenJDK, Amazon Corretto, BellSoft Liberica, SapMachine 和 Microsoft JDK 的 Bucket</td></tr><tr><td><a href="https://github.com/borger/scoop-galaxy-integrations">borger/scoop-galaxy-integrations</a></td><td>提供安装、附加和更新 GOG Galaxy 2 号集成的简单方法</td></tr><tr><td><a href="https://github.com/TheRandomLabs/Scoop-Spotify">TheRandomLabs/Scoop-Spotify</a></td><td>一个用于 Spotify、Spicetify 和相关软件包的 Bucket</td></tr><tr><td><a href="https://github.com/TheRandomLabs/scoop-nonportable">nonportable</a></td><td>一个用于非可移植应用程序的 Bucket</td></tr><tr><td><a href="https://github.com/Calinou/scoop-games">games</a></td><td>开源/免费游戏和游戏相关工具的 Bucket</td></tr><tr><td><a href="https://github.com/TheCjw/scoop-retools">TheCjw/scoop-retools</a></td><td>逆向工程工具的 Bucket</td></tr><tr><td><a href="https://github.com/Ash258/Scoop-JetBrains">jetbrains</a></td><td>包含 Jetbrians IDE 的 Bucket</td></tr><tr><td><a href="https://github.com/integzz/scoopet">integzz/scoopet</a></td><td>包含学术研究应用的 Bucket</td></tr><tr><td><a href="https://github.com/ScoopInstaller/Versions">Versions</a></td><td>包含一些知名软件包的旧版本的 Bucket</td></tr><tr><td><a href="https://github.com/Ash258/GenericBucket">Ash258/GenericBucket</a></td><td>通用的 Bucket 模板</td></tr><tr><td><a href="https://github.com/kidonng/sushi">kidonng/sushi</a></td><td>一个美味的、包容的 Bucket</td></tr><tr><td><a href="https://github.com/rasa/scoops">rasa/scoops</a></td><td>一个美味的的 Bucket</td></tr><tr><td><a href="https://github.com/littleli/scoop-clojure">littleli/scoop-clojure</a></td><td>安装 Clojure 的 Bucket</td></tr><tr><td><a href="https://github.com/MCOfficer/scoop-nirsoft">MCOfficer/scoop-nirsoft</a></td><td>个人收藏的 nirsoft.net-bucket，总共包含了 250 多个程序</td></tr><tr><td><a href="https://github.com/kkzzhizhou/scoop-apps">kkzzhizhou/coop-apps</a></td><td>合并多个 Scoop 仓库，使用 Github Action 自动更新</td></tr><tr><td><a href="https://github.com/KNOXDEV/wsl">KNOXDEV/wsl</a></td><td>一个用于 WSL 的 Bucket，不需要 Windows UWP 应用商店</td></tr><tr><td><a href="https://github.com/Ash258/Scoop-Sysinternals">Ash258/Scoop-Sysinternals</a></td><td>所有分开的 Sysinternals 工具的 Bucket</td></tr><tr><td><a href="https://github.com/TheRandomLabs/Scoop-Bucket">TheRandomLabs/Scoop-Bucket</a></td><td>个人收藏的 Bucket</td></tr><tr><td><a href="https://github.com/cderv/r-bucket">cderv/r-bucket</a></td><td>R 语言用户和软件工程师使用的个人 Bucket</td></tr><tr><td><a href="https://github.com/kkzzhizhou/scoop-zapps">kkzzhizhou/scoop-zapps</a></td><td>自用 Scoop 仓库，使用 Github Actions 自动更新</td></tr><tr><td><a href="https://github.com/tetradice/scoop-iyokan-jp">tetradice/scoop-iyokan-jp</a></td><td>日本語環境に最適化された scoop bucket</td></tr><tr><td><a href="https://github.com/rkbk60/scoop-for-jp">rkbk60/scoop-for-jp</a></td><td>适合小日子过得不错的日本人的 Bucket</td></tr><tr><td><a href="https://github.com/ZvonimirSun/scoop-iszy">ZvonimirSun/scoop-iszy</a></td><td>ZvonimirSun 个人收藏的 Bucket</td></tr><tr><td><a href="https://github.com/ScoopInstaller/PHP">php</a></td><td>PHP 的 Bucket</td></tr></tbody></table></div><p>你可以通过以下指令添加 Bucket</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoop bucket add &lt;name&gt; &lt;repo&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;本文章首发于&lt;a href=&quot;https://www.yuque.com/ladjeek/ygg4q6&quot;&gt;语雀&lt;/a&gt;!&lt;br&gt;通过各种高科技功能同步到&lt;a href=&quot;https://blog.slqwq.cn&quot;&gt;Hajeekn 的博客&lt;/a&gt;&lt;br&gt;本篇文章参考 &lt;a </summary>
      
    
    
    
    <category term="windows" scheme="https://blog.slqwq.cn/categories/windows/"/>
    
    
    <category term="windows" scheme="https://blog.slqwq.cn/tags/windows/"/>
    
  </entry>
  
  <entry>
    <title>Cloudflare 的 Argo Tunnel 使用</title>
    <link href="https://blog.slqwq.cn/2021/posts/fktz6u/index.html"/>
    <id>https://blog.slqwq.cn/2021/posts/fktz6u/index.html</id>
    <published>2021-08-06T18:38:20.000Z</published>
    <updated>2022-05-01T04:30:41.338Z</updated>
    
    <content type="html"><![CDATA[<p>本文章首发于<a href="https://www.yuque.com/ladjeek/ygg4q6">语雀</a>!<br>通过各种高科技功能同步到<a href="https://blog.slqwq.cn">Hajeekn 的博客</a><br>Cloudflare 是一个知名的老牌 CDN 厂商了,相信很多人应该都知道,今天我在逛 Cloudflare の Docs 时发现了个 Argo Tunnel 试用了一下,还可以,并且免费,于是<del>水</del>写了一篇文章介绍给大家</p><h1 id="安装-Argo-Tunnel"><a href="#安装-Argo-Tunnel" class="headerlink" title="安装 Argo Tunnel"></a>安装 Argo Tunnel</h1><p>本次以 Windows 11 演示<br>通过<a href="https://github.com/cloudflare/cloudflared/releases">GitHub</a>下载适用于 Windows 的安装包<br>这里包含了两种版本<br>386=i1386 也就是 32 位的 Windows 系统<br>amd64 也就是 64 位的 Windows 系统<br>我们下载.exe 可执行文件,msi 属于安装文件,也可以下载(但是我这里没安装成功)</p><h1 id="配置-Argo-Tunnel"><a href="#配置-Argo-Tunnel" class="headerlink" title="配置 Argo Tunnel"></a>配置 Argo Tunnel</h1><p>下载好后把文件改名为 cloudflared.exe<br>然后把他复制到一个合适的目录,我这里是 D 盘<br>打开 Windows Terminal ,如果你没有也可以用 Powershell 和 cmd<br>通过 cd 进入到放置 cloudflared.exe 的文件夹<br>如果你是 Windows 11 系统,可以直接在目录右键,点击 Open in Windows Terminal<br>然后在终端输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./cloudflared.exe --version</span><br></pre></td></tr></table></figure><p>如果跳出版本号就成功了<br>接着你需要打开<a href="https://dash.cloudflare.com/argotunnel">Cloudflare Argo Tunnel 的授权页面</a><br>在里面点击你要授权 Argo Tunnel 的域名<br>接着会弹出来一个弹窗<img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171116532.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=y8s2F&amp;originHeight=219&amp;originWidth=1050&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>提示你点击授权,照着文字点就行<br>然后你的浏览器会自动下载一个叫 cert.pem 的文件<br>复制它<br>然后进入到你的用户文件夹,创建一个.cloudflared 文件夹<br>将文件粘贴进去<br>这样就完成了对 Argo Tunnel 的配置</p><h1 id="创建-Argo-隧道"><a href="#创建-Argo-隧道" class="headerlink" title="创建 Argo 隧道"></a>创建 Argo 隧道</h1><p>打开终端,输入以下指令</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;cloudflared.exe tunnel create &lt;你想要的隧道名称&gt;</span><br></pre></td></tr></table></figure><p>创建一个隧道<br>然后你需要配置域名方面<br>打开 Cloudflare 的 DNS 面板,如果你是第三方托管打开第三方 DNS 面板<br>新建一个 CNAME 记录<br>记录名随便<br>记录类型选择 CNAME<br>记录内容写 你刚才从终端创建隧道时的 ID.cfargotunnel.com<br>ID 怎么获取呢?<br>你创建隧道时的 xxxxx.json 去掉.json 就是你的隧道 ID<br>然后保存<br>如果你是第三方托管,你还要去你的域名管理商新建一样的记录,但是 CNAME 值写&lt;记录名.域名.cdn.cloudflare.net&gt;<br>之后你就可以连接 Argo 隧道了</p><h1 id="连接-Argo-隧道"><a href="#连接-Argo-隧道" class="headerlink" title="连接 Argo 隧道"></a>连接 Argo 隧道</h1><p>在终端里面输入以下指令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./cloudflared tunnel --config path/config.yaml run &lt;刚刚的隧道名&gt; --url &lt;本地URL(可以带端口)&gt;</span><br></pre></td></tr></table></figure><p>其中你要填写隧道名和本地 URL<br>比如你想让 Argo 映射你的 Hexo,你就可以在本地先启动 Hexo 查看他的地址<br>Hexo 一般是 localhost:4000<br>其他项目就填进去就好了,记住不带 http 和 https 的协议头,也不带后缀 /<br>填写完成后回车,等它连接好<br>然后你打开你刚才创建的子域名,就会出现页面了<br><del>今天又水了一篇文章</del><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171116141.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=OXws5&amp;originHeight=43&amp;originWidth=42&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p>]]></content>
    
    
    <summary type="html">白嫖一个免费的内网穿透(bushi</summary>
    
    
    
    <category term="cloudflare" scheme="https://blog.slqwq.cn/categories/cloudflare/"/>
    
    
    <category term="cloudflare" scheme="https://blog.slqwq.cn/tags/cloudflare/"/>
    
  </entry>
  
  <entry>
    <title>物理机安装 Windows 11</title>
    <link href="https://blog.slqwq.cn/2021/posts/alioalnh/index.html"/>
    <id>https://blog.slqwq.cn/2021/posts/alioalnh/index.html</id>
    <published>2021-07-10T20:55:32.000Z</published>
    <updated>2022-05-01T04:30:41.341Z</updated>
    
    <content type="html"><![CDATA[<p>本文章首发于<a href="https://www.yuque.com/ladjeek/ygg4q6">语雀</a>!<br>通过各种高科技功能同步到<a href="https://blog.slqwq.cn">Hajeekn 的博客</a><br>最近 Windows 11 发布了,我趁机白嫖了个预览版镜像在虚拟机里面装着玩玩,之后便给实体机也装上了<br>本文章说说如何安装 Windows 11 和对于笔记本如何优化动效</p><h1 id="安装-Windows-11"><a href="#安装-Windows-11" class="headerlink" title="安装 Windows 11"></a>安装 Windows 11</h1><h2 id="获取-Windows-11-预览版镜像"><a href="#获取-Windows-11-预览版镜像" class="headerlink" title="获取 Windows 11 预览版镜像"></a>获取 Windows 11 预览版镜像</h2><p>天翼云：<a href="https://cloud.189.cn/t/bYbEzq7vAVra">https://cloud.189.cn/t/bYbEzq7vAVra</a> 访问码：q2rt<br>迅雷：<a href="https://pan.xunlei.com/s/VMdJtc5D8h_Yau9M19fH6mNiA1">https://pan.xunlei.com/s/VMdJtc5D8h_Yau9M19fH6mNiA1</a> 提取码：p5f9<br>UUP（arm64_zh cn）：<a href="https://pan.baidu.com/s/129jQDRLGqn2dMq7tEifRFg">https://pan.baidu.com/s/129jQDRLGqn2dMq7tEifRFg</a> 提取码: uyq8<br>UUP（amd64_zh cn）：<a href="https://pan.baidu.com/s/14x2a2VhopRAS3ZOYhkBQBA">https://pan.baidu.com/s/14x2a2VhopRAS3ZOYhkBQBA</a> 提取码:8wy5<br>通过这些地址获取预览版镜像</p><h2 id="安装-Windows-11-1"><a href="#安装-Windows-11-1" class="headerlink" title="安装 Windows 11"></a>安装 Windows 11</h2><p>下载之后解压镜像<br>双击运行 setup.exe 进行安装<br>如果提示你的电脑不能访问,那么下载一个 Windows 10 镜像内部的 appraiserres.dll 文件替换掉 Windows 11 内置的 appraiserres.dll 即可<br>之后应该会跳出类似这样的界面<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171113381.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=GXn4G&amp;originHeight=236&amp;originWidth=328&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>如果你下载了一个自带中文语言包的镜像,那么你看到的就是中文的安装界面<br>按照步骤安装完成后应该会跳出 OOBE<br>在这个界面选择 China<br>然后点击 Yes<br>然后会提示选择键盘布局,如果你下载了包含中文包的镜像那么这里可以选择中文输入法<br>之后你要配置账户,我用的是 Microsoft 365 E5 的组织账号<br>之后按照步骤提示配置完成后就可以啦<br>安装完成后界面大概是这样<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171113560.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=gLgjv&amp;originHeight=527&amp;originWidth=937&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><h2 id="优化动效-笔记本"><a href="#优化动效-笔记本" class="headerlink" title="优化动效(笔记本)"></a>优化动效(笔记本)</h2><p>之后进入设置<br>点击任务栏的 Windows 徽标<br>选择设置<br>找到 Windows Update<br>进入 Windows 预览体验计划<br>把选择预览体验成员设置里面的通道改为 Dev<br>然后点击打开 Windows 更新<br>找到英特尔 Display 更新,把这个补丁安装了<br>之后你的 Windows 11 会非常流畅,然后点击任务栏的搜索(放大镜)搜索查看”高级系统设置”<br>找到性能-设置<br>点击调为最佳外观<br>然后确定<br>然后再搜索控制面板<br>进入控制面板\硬件和声音\电源选项<br>创建电源计划<br>选择高性能<br>点击下一页<br>然后切换计划到高性能就可以了</p><h1 id="使用情况反馈"><a href="#使用情况反馈" class="headerlink" title="使用情况反馈"></a>使用情况反馈</h1><p>√ 动效多样<br>√ UI 好看(果里果气)<br>√ 原生支持 Android APP(WSA 子系统)</p>]]></content>
    
    
    <summary type="html">最近Windows 11发布了,我趁机白嫖了个预览版镜像在虚拟机里面装着玩玩,之后便给实体机也装上了</summary>
    
    
    
    <category term="Windows" scheme="https://blog.slqwq.cn/categories/Windows/"/>
    
    <category term="Windows11" scheme="https://blog.slqwq.cn/categories/Windows/Windows11/"/>
    
    
    <category term="Windows" scheme="https://blog.slqwq.cn/tags/Windows/"/>
    
    <category term="Windows11" scheme="https://blog.slqwq.cn/tags/Windows11/"/>
    
  </entry>
  
  <entry>
    <title>Floccus 食用教程</title>
    <link href="https://blog.slqwq.cn/2021/posts/eur9h5la/index.html"/>
    <id>https://blog.slqwq.cn/2021/posts/eur9h5la/index.html</id>
    <published>2021-04-18T10:49:42.000Z</published>
    <updated>2022-05-01T04:30:41.343Z</updated>
    
    <content type="html"><![CDATA[<p>本文章首发于<a href="https://www.yuque.com/ladjeek/ygg4q6">语雀</a>!<br>通过各种高科技功能同步到<a href="https://blog.slqwq.cn">Hajeekn 的博客</a><br>| 演示过程基于 Twinkstar(星愿)浏览器,其他浏览器可能大致步骤一样</p><h1 id="什么是-Floccus"><a href="#什么是-Floccus" class="headerlink" title="什么是 Floccus"></a>什么是 Floccus</h1><p>Floccus 是一个在 GitHub 上的开源项目，该项目的官方简介如下<br>| Sync your bookmarks across browsers via Nextcloud, WebDAV or a local file (and thus any file sync solution).<br>简单的说它就是一个支持 Google Chrome 和 Mozilla Firefox 跨平台同步的一个插件，依赖于 WebDAV、nextcloud、本地文件等</p><h1 id="下载并安装-Floccus-插件"><a href="#下载并安装-Floccus-插件" class="headerlink" title="下载并安装 Floccus 插件"></a>下载并安装 Floccus 插件</h1><p><a href="https://chrome.google.com/webstore/detail/floccus/fnaicdffflnofjppbagibeoednhnbjhg">Chrome Store Download</a><br><a href="https://github.com/marcelklehr/floccus/releases/">GitHub Release 下载</a></p><h1 id="配置坚果云"><a href="#配置坚果云" class="headerlink" title="配置坚果云"></a>配置坚果云</h1><p>坚果云支持 WebDAV,并且在国内,速度快,所以我们就选用了<a href="https://jianguoyun.com/">坚果云</a><br>如果你有账号点击登录<br>如果你没有账号点击注册<br>我有账号就直接登录了<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171111947.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=KZgFg&amp;originHeight=867&amp;originWidth=1920&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>进入后可以看见这些东西<br>sync 刚开始是没有的<br>接下来我们可以创建一个文件夹用于存放书签文件<br>这边命名为 sync,你也更改<br>在坚果云刚刚创建的文件夹中创建一个名为 bookmarks.xbel 的文件,文件内放入这些内容:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">xbel</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;+//IDN python.org//DTD XML Bookmark Exchange Language 1.0//EN//XML&quot;</span> <span class="meta-string">&quot;http://pyxml.sourceforge.net/topics/dtds/xbel.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">xbel</span> <span class="attr">version</span>=<span class="string">&quot;1.0&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">xbel</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>然后保存就可以了<br>接下来进入账号信息<br>安全选项<br>点击添加第三方应用<br>点击生成密码</p><h1 id="配置-Floccus-插件"><a href="#配置-Floccus-插件" class="headerlink" title="配置 Floccus 插件"></a>配置 Floccus 插件</h1><p>打开 Floocus 选择新建账户<br>WEBDAV URL 写： <a href="https://dav.jianguoyun.com/dav/">https://dav.jianguoyun.com/dav/</a><br>用户名写示例里面的<br>密码写你的用户密码<br>书签路径写自己新建的文件夹/bookmarks.xbel<br>接下来点击保存即可</p>]]></content>
    
    
    <summary type="html">书签还在傻傻的导入导出?快来试试 Floccus</summary>
    
    
    
    <category term="书签同步" scheme="https://blog.slqwq.cn/categories/%E4%B9%A6%E7%AD%BE%E5%90%8C%E6%AD%A5/"/>
    
    
    <category term="书签同步" scheme="https://blog.slqwq.cn/tags/%E4%B9%A6%E7%AD%BE%E5%90%8C%E6%AD%A5/"/>
    
  </entry>
  
  <entry>
    <title>Butterfly友链朋友圈</title>
    <link href="https://blog.slqwq.cn/2021/posts/alopakmn/index.html"/>
    <id>https://blog.slqwq.cn/2021/posts/alopakmn/index.html</id>
    <published>2021-03-14T12:58:42.000Z</published>
    <updated>2022-05-01T04:30:41.344Z</updated>
    
    <content type="html"><![CDATA[<p>本文章首发于<a href="https://www.yuque.com/ladjeek/ygg4q6">语雀</a>!<br>通过各种高科技功能同步到<a href="https://blog.slqwq.cn">Hajeekn 的博客</a></p><hr><h1 id="什么是友链朋友圈？"><a href="#什么是友链朋友圈？" class="headerlink" title="什么是友链朋友圈？"></a>什么是友链朋友圈？</h1><p><strong>你是否经常烦恼于友链过多但没有时间浏览？那么友链朋友圈将解决这一痛点。你可以随时获取友链网站的更新内容，并了解友链的活跃情况 。</strong><br>效果图如下：<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171109786.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=rV54U&amp;originHeight=521&amp;originWidth=386&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br><del>因为是 beta 版本，所以不可避免还有错误，为了更好制作这个项目，发现 bug。我首先 release 这个 beta 版本。</del><br>目前 release1.5 版本：<br>① 支持<strong>butterfly、volantis、matery 主题</strong>的友链获取<br>② 支持<a href="https://docs.tzki.cn/Friend"><strong>小康友链</strong></a><strong>及</strong>volantis 主题友链<strong>，即部署于 gitee 上的 issuse 友链获取<br>③ 支持 butterfly、volantis、matery 主题的最新文章获取</strong><br>④ 支持大部分拥有 sitemap 网站的文章获取<br>⑤ 拥有友链屏蔽、关键词屏蔽、等自定义 yaml 的配置项</p><hr><p>以上照搬于冰卡诺老师的介绍</p><h1 id="Config1-Get-leancloud-id-amp-key"><a href="#Config1-Get-leancloud-id-amp-key" class="headerlink" title="Config1: Get leancloud id&amp;key"></a>Config1: Get leancloud id&amp;key</h1><h2 id="①-账号的注册与登录"><a href="#①-账号的注册与登录" class="headerlink" title="① 账号的注册与登录"></a>① 账号的注册与登录</h2><p>进入<a href="https://leancloud.app">Leancloud 国际版本</a><br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171110864.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=nbiM1&amp;originHeight=429&amp;originWidth=937&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>点击 Console<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171110926.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=BC5lt&amp;originHeight=862&amp;originWidth=1920&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>在这个页面,如果你没有 LeanCloud 账号选择注册<br>如果有就登陆</p><h2 id="②-创建应用并获取-id-amp-key"><a href="#②-创建应用并获取-id-amp-key" class="headerlink" title="② 创建应用并获取 id&amp;key"></a>② 创建应用并获取 id&amp;key</h2><p>进入设置 -&gt; 域名绑定绑定一个域名<br>(其实也可以不绑定)<br>绑定完后进入设置 -&gt; 应用 Keys<br>复制 APPID 和 APPKEY</p><h1 id="Config2-Config-GitHub-Actions"><a href="#Config2-Config-GitHub-Actions" class="headerlink" title="Config2: Config GitHub Actions"></a>Config2: Config GitHub Actions</h1><h2 id="①-Fork-项目"><a href="#①-Fork-项目" class="headerlink" title="① Fork 项目"></a>① Fork 项目</h2><p>进入<a href="https://github.com/Zfour/hexo-circle-of-friends">GitHub 项目</a><br>Fork 此项目</p><h2 id="②-配置变量"><a href="#②-配置变量" class="headerlink" title="② 配置变量"></a>② 配置变量</h2><p>进入设置 -&gt; 机密(Secrets)<br><strong>Name</strong>分别以 APPID、APPKEY、LINK 创建环境变量。<br><strong>Value 分别</strong>填入刚刚保存 Leancloud 的应用 ID（AppID）和应用密钥（AppKey）以及你的友链地址<br>保存三个环境变量。</p><h2 id="③-修改配置文件并启用"><a href="#③-修改配置文件并启用" class="headerlink" title="③ 修改配置文件并启用"></a>③ 修改配置文件并启用</h2><p>修改_config.yml<br><strong>如果你使用的的是</strong><a href="https://docs.tzki.cn/Friend"><strong>小康友链</strong></a><strong>部署，选择</strong><code>**type: normal**</code>** <strong>`</strong>gitee_friends_links<strong>`</strong>的<strong>`</strong>enable<strong>`</strong>改为<strong>`</strong>true<strong>`</strong>，然后填入你的 gitee 用户名、gitee 仓库名及抓取的 issue 状态即可**<br><strong>如果你是 volantis 主题，则选择</strong><code>**type: volantis**</code><strong>，然后填入你的 gitee 用户名、gitee 仓库名及抓取的 issue 状态。</strong><br><strong>你可以通过</strong><code>**block_word**</code><strong>手动屏蔽 sitemap 中的关键字。比如你想屏蔽</strong><code>**example.com/bookshop**</code><strong>这个页面和以下分类则添加</strong><code>**bookshop**</code><strong>作为屏蔽项。</strong><br><strong>你可以通过</strong><code>**block_chars**</code><strong>手动屏蔽 sitemap 抓取的标题中包含的站点信息字符。比如你想屏蔽</strong><code>**我是鸽子|小冰博客**</code><strong>这篇文章的</strong><code>**|小冰博客**</code><strong>则添加</strong><code>**|**</code><strong>作为屏蔽项。（目前只支持 gbk 字符）</strong><br><strong>如果你发现，你的友链中有十分 bug 的网站或者你不感兴趣的网站，你也可以添加网站屏蔽。添加  </strong><code>**[https://example.com/](https://example.com/)**</code><strong>作为屏蔽项。但为了您的友谊，我不建议屏蔽。（这个功能其实是为了减少 bug 而设计的）</strong><br>如果完成了上述更改就可以给自己 Fork 的项目点个 Star 就可以启用了</p><h1 id="Config3-Config-Vercel-API"><a href="#Config3-Config-Vercel-API" class="headerlink" title="Config3: Config Vercel API"></a>Config3: Config Vercel API</h1><h2 id="①-注册"><a href="#①-注册" class="headerlink" title="① 注册"></a>① 注册</h2><p>为了不暴露<a href="https://console.leancloud.app/apps">leancloud</a>的应用 ID（AppID）和应用密钥（AppKey），同时减少前端处理数据的压力，还需配置 vercel api。<br>首先前往  <a href="https://vercel.com/">Vercel 官网</a>，点击右上角的 sign up 进行注册。</p><h2 id="②-导入项目并部署-API"><a href="#②-导入项目并部署-API" class="headerlink" title="② 导入项目并部署 API"></a>② 导入项目并部署 API</h2><p>点击仪表盘的 New Project -&gt; Import Third-Party Git Repository<br>然后填入冰卡诺老师的仓库<br><code>https://github.com/Zfour/hexo-circle-of-friends-api</code><br>选择个人账户(PERSONAL ACCOUNT)<br>选择 GitHub 按钮后他就会克隆一份到你的 GitHub 中<br>然后继续点击下一步(Continue)<br>接着会跳转到快要部署的界面<br>点击 Deploy 就部署完成了<br>然后进入项目的设置<br>找到 Envionment Variables<br><strong>Name</strong>分别以 LEANCLOUD_ID、LEANCLOUD_KEY 创建环境变量。<br><strong>Value 分别</strong>填入刚刚保存 Leancloud 的应用 ID（AppID）和应用密钥（AppKey）。</p><h2 id="③-检查-API-是否部署好"><a href="#③-检查-API-是否部署好" class="headerlink" title="③ 检查 API 是否部署好"></a>③ 检查 API 是否部署好</h2><p>访问(Vercel 分给你的地址/api)<br>如果出现数据就可以了,如果提示 502 回到项目的主页,查看 Build Logs<br>重新部署一下就可以了</p><h1 id="Config4-Config-Page"><a href="#Config4-Config-Page" class="headerlink" title="Config4: Config Page"></a>Config4: Config Page</h1><p>首先前往主题目录/layout/includes/page<br>新建一个 circle.pug<br>里面写入</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br></pre></td><td class="code"><pre><span class="line">#article-container</span><br><span class="line">  <span class="keyword">if</span> top_img === <span class="literal">false</span></span><br><span class="line">    h1.page-title= page.title</span><br><span class="line">  <span class="keyword">if</span> theme.circle.enable</span><br><span class="line">  div.js-pjax</span><br><span class="line">    div(id=<span class="string">&#x27;moments_container&#x27;</span>)</span><br><span class="line">    script.</span><br><span class="line">      <span class="keyword">var</span> requests_url = <span class="string">&#x27;!&#123;theme.circle.requests_url&#125;&#x27;</span>; <span class="comment">//api地址</span></span><br><span class="line">      <span class="keyword">var</span> orign_data = []; <span class="comment">//api请求所得到的源数据</span></span><br><span class="line">      <span class="keyword">var</span> maxnumber = !&#123;theme.circle.maxnumber&#125;; <span class="comment">//页面展示文章数量</span></span><br><span class="line">      <span class="keyword">var</span> addnumber = !&#123;theme.circle.addnumber&#125;; <span class="comment">//每次加载增加的篇数</span></span><br><span class="line">      <span class="keyword">var</span> opentype = <span class="string">&#x27;!&#123;theme.circle.opentype&#125;&#x27;</span>;  <span class="comment">//&#x27;_blank&#x27;打开新标签,&#x27;_self&#x27;本窗口打开</span></span><br><span class="line">      <span class="keyword">var</span> nofollow = <span class="literal">true</span>; <span class="comment">//禁止搜索引擎抓取</span></span><br><span class="line">      <span class="comment">// 自定义loading图 例如: var loadingCutom = &#x27;&lt;i class=&quot;fa fa-spinner fa-spin&quot;&gt;&lt;/i&gt;&#x27;</span></span><br><span class="line">      <span class="comment">// 自定义loading图 例如: var loadingCutom = &#x27;&lt;img src=&quot;你的图片地址&quot; alt=&quot;加载中...&quot;&gt;&#x27;</span></span><br><span class="line">      <span class="keyword">var</span> loadingCutom = <span class="string">&#x27;!&#123;theme.circle.loading&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//处理数据</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span>(<span class="built_in">document</span>.getElementById(<span class="string">&#x27;moments_container&#x27;</span>))&#123;</span><br><span class="line">      <span class="comment">//添加加载动画</span></span><br><span class="line">      <span class="keyword">var</span> loading_pic = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;moments_container&#x27;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 判断loadingCutom值是否为空</span></span><br><span class="line">      <span class="keyword">if</span>(<span class="keyword">typeof</span> loadingCutom == <span class="string">&quot;undefined&quot;</span> || loadingCutom == <span class="literal">null</span> || loadingCutom === <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">      loading_pic.innerHTML = <span class="string">&#x27;&lt;span id=&quot;moments_loading&quot;&gt;&lt;i class=&quot;fa fa-spinner fa-spin&quot;&gt;&lt;/i&gt;&lt;/span&gt;&#x27;</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      loading_pic.innerHTML = <span class="string">&#x27;&lt;span id=&quot;moments_loading&quot;&gt;&#x27;</span>+loadingCutom+<span class="string">&#x27;&lt;/span&gt;&#x27;</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      fetch(requests_url).then(</span><br><span class="line">      data =&gt; data.json()</span><br><span class="line">      ).then(</span><br><span class="line">      data =&gt; &#123;</span><br><span class="line">      orign_data = data;</span><br><span class="line">      data_handle(nofollow,orign_data, maxnumber)</span><br><span class="line">      &#125;</span><br><span class="line">      )&#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> data_handle = <span class="function">(<span class="params">nofollow,data, maxnumber</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> today = todaypost();</span><br><span class="line">      <span class="keyword">var</span> Datetody = <span class="keyword">new</span> <span class="built_in">Date</span>(today);</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> item = <span class="number">0</span>; item &lt; data[<span class="number">1</span>].length; item++) &#123;</span><br><span class="line">      <span class="keyword">var</span> Datedate = <span class="keyword">new</span> <span class="built_in">Date</span>(data[<span class="number">1</span>][item][<span class="number">1</span>]);</span><br><span class="line">      <span class="keyword">if</span> (Datedate &gt; Datetody) &#123;</span><br><span class="line">      data[<span class="number">1</span>].splice(item--, <span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">var</span> today_post = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">var</span> error = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">var</span> unique_live_link;</span><br><span class="line">      <span class="keyword">var</span> datalist = data[<span class="number">1</span>].slice(<span class="number">0</span>, maxnumber);</span><br><span class="line">      <span class="keyword">var</span> listlenth = data[<span class="number">1</span>].length;</span><br><span class="line">      <span class="keyword">var</span> user_lenth = data[<span class="number">0</span>].length;</span><br><span class="line">      <span class="keyword">var</span> datalist_slice = slice_month(datalist);</span><br><span class="line">      <span class="keyword">var</span> last_update_time = timezoon(datalist_slice);</span><br><span class="line">      <span class="keyword">var</span> link_list = [];</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> item <span class="keyword">of</span> data[<span class="number">1</span>]) &#123;</span><br><span class="line">      <span class="keyword">if</span> (item[<span class="number">1</span>] === today) &#123;</span><br><span class="line">      today_post += <span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      link_list.push(item[<span class="number">3</span>]);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">var</span> arr = unique(link_list);</span><br><span class="line">      unique_live_link = arr.length;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> item <span class="keyword">of</span> data[<span class="number">0</span>]) &#123;</span><br><span class="line">      <span class="keyword">if</span> (item[<span class="number">3</span>] === <span class="string">&#x27;true&#x27;</span>) &#123;</span><br><span class="line">      error += <span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">var</span> html_item = <span class="string">&#x27;&lt;h2&gt;统计信息&lt;/h2&gt;&#x27;</span>;</span><br><span class="line">      html_item += <span class="string">&#x27;&lt;div id=&quot;info_user_pool&quot; class=&quot;moments-item info_user_pool&quot; style=&quot;&quot;&gt;&#x27;</span>;</span><br><span class="line">      html_item += <span class="string">&#x27;&lt;div class=&quot;moments_chart&quot;&gt;&lt;span class=&quot;moments_post_info_title&quot;&gt;当前友链数：&lt;/span&gt;&lt;span class=&quot;moments_post_info_number&quot;&gt;&#x27;</span> + user_lenth + <span class="string">&#x27; 个&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;moments_post_info_title&quot;&gt;失败数：&lt;/span&gt;&lt;span class=&quot;moments_post_info_number&quot;&gt;&#x27;</span> + error + <span class="string">&#x27; 个&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">      html_item += <span class="string">&#x27;&lt;div class=&quot;moments_chart&quot;&gt;&lt;span class=&quot;moments_post_info_title&quot;&gt;活跃友链数：&lt;/span&gt;&lt;span class=&quot;moments_post_info_number&quot;&gt;&#x27;</span> + unique_live_link + <span class="string">&#x27; 个&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;moments_post_info_title&quot;&gt;当前库存：&lt;/span&gt;&lt;span class=&quot;moments_post_info_number&quot;&gt;&#x27;</span> + listlenth + <span class="string">&#x27; 篇&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">      html_item += <span class="string">&#x27;&lt;div class=&quot;moments_chart&quot;&gt;&lt;span class=&quot;moments_post_info_title&quot;&gt;今日更新：&lt;/span&gt;&lt;span class=&quot;moments_post_info_number&quot;&gt;&#x27;</span> + today_post + <span class="string">&#x27; 篇&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;moments_post_info_title&quot;&gt;最近更新：&lt;/span&gt;&lt;span class=&quot;moments_post_info_number&quot;&gt;&#x27;</span> + last_update_time + <span class="string">&#x27;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">      html_item += <span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> month_item <span class="keyword">of</span> datalist_slice) &#123;</span><br><span class="line">      html_item += <span class="string">&#x27;&lt;h2&gt;&#x27;</span> + month_item[<span class="number">0</span>] + <span class="string">&#x27;&lt;/h2&gt;&#x27;</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> post_item <span class="keyword">of</span> month_item[<span class="number">1</span>]) &#123;</span><br><span class="line">      <span class="keyword">var</span> rel = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">      <span class="keyword">if</span> (nofollow &amp;&amp; opentype == <span class="string">&#x27;_blank&#x27;</span>)&#123;</span><br><span class="line">      rel = <span class="string">&#x27;noopener nofollow&#x27;</span>;</span><br><span class="line">      &#125;<span class="keyword">else</span> <span class="keyword">if</span>(nofollow)&#123;</span><br><span class="line">      rel = <span class="string">&#x27;nofollow&#x27;</span>;</span><br><span class="line">      &#125;<span class="keyword">else</span> <span class="keyword">if</span>(opentype == <span class="string">&#x27;_blank&#x27;</span>)&#123;</span><br><span class="line">      rel = <span class="string">&#x27;noopener&#x27;</span>;</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      rel = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      html_item += <span class="string">&#x27; &lt;div class=&quot;moments-item&quot;&gt;&#x27;</span>;</span><br><span class="line">      html_item += <span class="string">&#x27; &lt;a target=&quot;&#x27;</span> + opentype + <span class="string">&#x27;&quot; class=&quot;moments-item-img&quot; href=&quot;&#x27;</span> + post_item[<span class="number">2</span>] + <span class="string">&#x27;&quot; title=&quot;&#x27;</span> + post_item[<span class="number">0</span>] + <span class="string">&#x27;&quot;rel=&quot;&#x27;</span>+ rel + <span class="string">&#x27;&quot;&gt;&#x27;</span>;</span><br><span class="line">      html_item += <span class="string">&#x27;&lt;img onerror=&quot;this.onerror=null,this.src=&amp;quot;https://cdn.jsdelivr.net/gh/Zfour/Butterfly-friend-poor-html/friendcircle/404.png&amp;quot;&quot;&#x27;</span>;</span><br><span class="line">      html_item += <span class="string">&#x27; src=&quot;&#x27;</span> + post_item[<span class="number">4</span>] + <span class="string">&#x27;&quot;&gt;&lt;/a&gt;&#x27;</span>;</span><br><span class="line">      html_item += <span class="string">&#x27;&lt;div class=&quot;moments-item-info&quot;&gt;&lt;div class=&quot;moments-item-time&quot;&gt;&lt;i class=&quot;far fa-user&quot;&gt;&lt;/i&gt;&#x27;</span>;</span><br><span class="line">      html_item += <span class="string">&#x27;&lt;span&gt;&#x27;</span> + post_item[<span class="number">3</span>] + <span class="string">&#x27;&lt;/span&gt;&#x27;</span>;</span><br><span class="line">      html_item += <span class="string">&#x27; &lt;div class=&quot;moments_post_time&quot;&gt;&lt;i class=&quot;far fa-calendar-alt&quot;&gt;&lt;/i&gt;&#x27;</span> +</span><br><span class="line">      <span class="string">&#x27;&lt;time datetime=&quot;&#x27;</span> + post_item[<span class="number">1</span>] + <span class="string">&#x27;&quot; title=&quot;&#x27;</span> + post_item[<span class="number">1</span>] + <span class="string">&#x27;&quot;&gt;&#x27;</span> + post_item[<span class="number">1</span>] + <span class="string">&#x27;&lt;/time&gt;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">      html_item += <span class="string">`&lt;/div&gt;&lt;a target=&quot;<span class="subst">$&#123;opentype&#125;</span>&quot; class=&quot;moments-item-title&quot; href=&quot;<span class="subst">$&#123;post_item[<span class="number">2</span>]&#125;</span>&quot; title=&quot;<span class="subst">$&#123;post_item[<span class="number">0</span>]&#125;</span>&quot;rel=&quot;<span class="subst">$&#123;rel&#125;</span>&quot;&gt;<span class="subst">$&#123;post_item[<span class="number">0</span>]&#125;</span>&lt;/a&gt;&lt;/div&gt;`</span>;</span><br><span class="line">      html_item += <span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (data[<span class="number">1</span>].length - maxnumber &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      html_item += <span class="string">&#x27;&lt;div style=&quot;text-align: center&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;moments_load_button&quot; &#x27;</span> +</span><br><span class="line">      <span class="string">&#x27;onclick=&quot;load_more_post()&quot;&gt;加载更多...&lt;/button&gt;&#x27;</span> +</span><br><span class="line">      <span class="string">&#x27;&lt;/div&gt;&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">      html_item += <span class="string">&#x27;&lt;style&gt;.moments-item-info span&#123;padding-left:.3rem;padding-right:.3rem&#125;.moments_post_time time&#123;padding-left:.3rem;cursor:default&#125;.moments_post_info_title&#123;font-weight:700&#125;.moments_post_info_number&#123;float:right&#125;.moments_chart&#123;align-items:flex-start;flex:1;width:100px;height:60px;margin:20px&#125;@media screen and (max-width:500px)&#123;.info_user_pool&#123;padding:10px;flex-direction:column;max-height:200px&#125;.moments_chart&#123;flex:0;width:100%;height:160px;margin:0&#125;&#125;.moments-item:before&#123;border:0&#125;@media screen and (min-width:500px)&#123;.moments_post_time&#123;float:right&#125;&#125;.moments_load_button&#123;-webkit-transition-duration:.4s;transition-duration:.4s;text-align:center;border:1px solid #ededed;border-radius:.3em;display:inline-block;background:transparent;color:#555;padding:.5em 1.25em&#125;.moments_load_button:hover&#123;color:#3090e4;border-color:#3090e4&#125;.moments-item&#123;position:relative;display:-webkit-box;display:-moz-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-moz-box-align:center;-o-box-align:center;-ms-flex-align:center;-webkit-align-items:center;align-items:center;margin:0 0 1rem .5rem;-webkit-transition:all .2s ease-in-out;-moz-transition:all .2s ease-in-out;-o-transition:all .2s ease-in-out;-ms-transition:all .2s ease-in-out;transition:all .2s ease-in-out;box-shadow:rgba(0,0,0,0.07) 0 2px 2px 0,rgba(0,0,0,0.1) 0 1px 5px 0;border-radius:2px&#125;.moments-item-img&#123;overflow:hidden;width:80px;height:80px&#125;.moments-item-img img&#123;max-width:100%;width:100%;height:100%;object-fit:cover&#125;.moments-item-info&#123;-webkit-box-flex:1;-moz-box-flex:1;-o-box-flex:1;box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;padding:0 .8rem&#125;.moments-item-title&#123;display:-webkit-box;overflow:hidden;-webkit-box-orient:vertical;font-size:1.1em;-webkit-transition:all .3s;-moz-transition:all .3s;-o-transition:all .3s;-ms-transition:all .3s;transition:all .3s;-webkit-line-clamp:1&#125;&lt;/style&gt;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> moments_container = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;moments_container&#x27;</span>) ;</span><br><span class="line">      append_div(moments_container, html_item)</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> load_more_post = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span>(<span class="built_in">document</span>.getElementById(<span class="string">&#x27;moments_container&#x27;</span>))&#123;</span><br><span class="line">      maxnumber = maxnumber + addnumber;</span><br><span class="line">      <span class="built_in">document</span>.getElementById(<span class="string">&#x27;moments_container&#x27;</span>) .innerHTML = <span class="string">&quot;&quot;</span>;</span><br><span class="line">      data_handle(nofollow,orign_data, maxnumber)&#125;</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="comment">//加载更多文章</span></span><br><span class="line">      <span class="comment">//将html放入指定id的div容器</span></span><br><span class="line">      <span class="keyword">var</span> append_div = <span class="function">(<span class="params">parent, text</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span>(<span class="built_in">document</span>.getElementById(<span class="string">&#x27;moments_container&#x27;</span>))&#123;</span><br><span class="line">      loading_pic.innerHTML = <span class="string">``</span>;</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> text === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> temp = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">      temp.innerHTML = text;</span><br><span class="line">      <span class="comment">// 防止元素太多 进行提速</span></span><br><span class="line">      <span class="keyword">var</span> frag = <span class="built_in">document</span>.createDocumentFragment();</span><br><span class="line">      <span class="keyword">while</span> (temp.firstChild) &#123;</span><br><span class="line">      frag.appendChild(temp.firstChild);</span><br><span class="line">      &#125;</span><br><span class="line">      parent.appendChild(frag);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      parent.appendChild(text);</span><br><span class="line">      &#125;</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//去重</span></span><br><span class="line">      <span class="keyword">var</span> unique = <span class="function">(<span class="params">arr</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(arr))</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//时区优化</span></span><br><span class="line">      <span class="keyword">var</span> formatDate = <span class="function">(<span class="params">strDate</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.parse(strDate.replace(<span class="regexp">/-/g</span>, <span class="string">&quot;/&quot;</span>)));</span><br><span class="line">      <span class="keyword">var</span> gettimeoffset;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">Date</span>().getTimezoneOffset()) &#123;</span><br><span class="line">      gettimeoffset = <span class="keyword">new</span> <span class="built_in">Date</span>().getTimezoneOffset();</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      gettimeoffset = <span class="number">8</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">var</span> timeoffset = gettimeoffset * <span class="number">60</span> * <span class="number">1000</span>;</span><br><span class="line">      <span class="keyword">var</span> len = date.getTime();</span><br><span class="line">      <span class="keyword">var</span> date2 = <span class="keyword">new</span> <span class="built_in">Date</span>(len - timeoffset);</span><br><span class="line">      <span class="keyword">var</span> sec = date2.getSeconds().toString();</span><br><span class="line">      <span class="keyword">var</span> min = date2.getMinutes().toString();</span><br><span class="line">      <span class="keyword">if</span> (sec.length === <span class="number">1</span>) &#123;</span><br><span class="line">      sec = <span class="string">&quot;0&quot;</span> + sec;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (min.length === <span class="number">1</span>) &#123;</span><br><span class="line">      min = <span class="string">&quot;0&quot;</span> + min;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> date2.getFullYear().toString() + <span class="string">&quot;/&quot;</span> + (date2.getMonth() + <span class="number">1</span>).toString() + <span class="string">&quot;/&quot;</span> + date2.getDate().toString() + <span class="string">&quot; &quot;</span> + date2.getHours().toString() + <span class="string">&quot;:&quot;</span> + min + <span class="string">&quot;:&quot;</span> + sec</span><br><span class="line">      &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> timezoon = <span class="function">(<span class="params">datalist_slice</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> time = datalist_slice[<span class="number">0</span>][<span class="number">1</span>][<span class="number">0</span>][<span class="number">5</span>];</span><br><span class="line">      <span class="keyword">return</span> formatDate(time)</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//今日时间</span></span><br><span class="line">      <span class="keyword">var</span> todaypost = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">      <span class="keyword">var</span> year = date.getFullYear();</span><br><span class="line">      <span class="keyword">var</span> month = (date.getMonth() + <span class="number">1</span>).toString();</span><br><span class="line">      <span class="keyword">var</span> day = (date.getDate()).toString();</span><br><span class="line">      <span class="keyword">if</span> (month.length === <span class="number">1</span>) &#123;</span><br><span class="line">      month = <span class="string">&quot;0&quot;</span> + month;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (day.length === <span class="number">1</span>) &#123;</span><br><span class="line">      day = <span class="string">&quot;0&quot;</span> + day;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> year + <span class="string">&quot;-&quot;</span> + month + <span class="string">&quot;-&quot;</span> + day</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//月份切片</span></span><br><span class="line">      <span class="keyword">var</span> slice_month = <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> monthlist = [];</span><br><span class="line">      <span class="keyword">var</span> datalist = [];</span><br><span class="line">      <span class="keyword">var</span> data_slice = data;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> item <span class="keyword">in</span> data_slice) &#123;</span><br><span class="line">      data_slice[item].push(item);</span><br><span class="line">      <span class="keyword">if</span> (data_slice[item][<span class="number">1</span>].lenth !== <span class="number">10</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> list = data_slice[item][<span class="number">1</span>].split(<span class="string">&#x27;-&#x27;</span>);</span><br><span class="line">      <span class="keyword">if</span> (list[<span class="number">1</span>].length &lt; <span class="number">2</span>) &#123;</span><br><span class="line">      list[<span class="number">1</span>] = <span class="string">&quot;0&quot;</span> + list[<span class="number">1</span>]</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (list[<span class="number">2</span>].length &lt; <span class="number">2</span>) &#123;</span><br><span class="line">      list[<span class="number">2</span>] = <span class="string">&quot;0&quot;</span> + list[<span class="number">2</span>]</span><br><span class="line">      &#125;</span><br><span class="line">      data_slice[item][<span class="number">1</span>] = list.join(<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">var</span> month = data_slice[item][<span class="number">1</span>].slice(<span class="number">0</span>, <span class="number">7</span>);</span><br><span class="line">      <span class="keyword">if</span> (monthlist.indexOf(month) !== -<span class="number">1</span>) &#123;</span><br><span class="line">      datalist[monthlist.length - <span class="number">1</span>][<span class="number">1</span>].push(data_slice[item])</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      monthlist.push(month);</span><br><span class="line">      datalist.push([month, [data_slice[item]]])</span><br><span class="line">      &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> mounthgroup <span class="keyword">of</span> datalist) &#123;</span><br><span class="line">      mounthgroup.push(mounthgroup[<span class="number">1</span>][<span class="number">0</span>][<span class="number">6</span>]);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> datalist</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>保存,然后返回到 layout 文件夹<br>打开 page.pug<br>在 default 的上面添加</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">when <span class="string">&#x27;circle&#x27;</span></span><br><span class="line">  include includes/page/circle.pug</span><br></pre></td></tr></table></figure><p>保存文件<br>然后打开主题配置<br>写入</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">circle:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>  <span class="string">//</span> <span class="string">总开关</span></span><br><span class="line">  <span class="attr">requests_url:</span> <span class="string">https://quanfr-api.slqwq.cn/api</span>  <span class="string">//</span> <span class="string">API地址</span></span><br><span class="line">  <span class="attr">maxnumber:</span> <span class="number">20</span>  <span class="string">//</span> <span class="string">页面展示文章数量</span></span><br><span class="line">  <span class="attr">addnumber:</span> <span class="number">10</span>  <span class="string">//</span> <span class="string">每次加载增加的篇数</span></span><br><span class="line">  <span class="attr">opentype:</span> <span class="string">_blank</span>  <span class="string">//</span> <span class="string">&#x27;_blank&#x27;</span><span class="string">打开新标签,&#x27;_self&#x27;本窗口打开</span></span><br><span class="line">  <span class="attr">loading:</span> <span class="string">//自定义loading动画,可留空</span></span><br></pre></td></tr></table></figure><h1 id="Config5-New-Page"><a href="#Config5-New-Page" class="headerlink" title="Config5: New Page"></a>Config5: New Page</h1><p>在命令行输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page circle</span><br></pre></td></tr></table></figure><p>进入 Hexo 根目录/source 的 circle 文件夹<br>打开 index.md<br>在<br>—-内写入 type: circle<br>这样就配置好啦,可以看看效果了<br><strong>通过此方法配置,默认兼容 Pjax</strong></p><h1 id="Thanks-for-you"><a href="#Thanks-for-you" class="headerlink" title="Thanks for you"></a>Thanks for you</h1>]]></content>
    
    
    <summary type="html">基于冰卡诺老师的友链朋友圈,支持直接在主题配置文件配置</summary>
    
    
    
    <category term="魔改" scheme="https://blog.slqwq.cn/categories/%E9%AD%94%E6%94%B9/"/>
    
    <category term="友链朋友圈" scheme="https://blog.slqwq.cn/categories/%E9%AD%94%E6%94%B9/%E5%8F%8B%E9%93%BE%E6%9C%8B%E5%8F%8B%E5%9C%88/"/>
    
    
    <category term="魔改" scheme="https://blog.slqwq.cn/tags/%E9%AD%94%E6%94%B9/"/>
    
    <category term="友链朋友圈" scheme="https://blog.slqwq.cn/tags/%E5%8F%8B%E9%93%BE%E6%9C%8B%E5%8F%8B%E5%9C%88/"/>
    
  </entry>
  
  <entry>
    <title>如何给自己的网站添加音乐播放器</title>
    <link href="https://blog.slqwq.cn/2021/posts/adlloiau/index.html"/>
    <id>https://blog.slqwq.cn/2021/posts/adlloiau/index.html</id>
    <published>2021-02-24T11:00:47.000Z</published>
    <updated>2022-05-01T04:30:41.347Z</updated>
    
    <content type="html"><![CDATA[<p>本文章首发于<a href="https://www.yuque.com/ladjeek/ygg4q6">语雀</a>!<br>通过各种高科技功能同步到<a href="https://blog.slqwq.cn">Hajeekn 的博客</a></p><hr><p>本文章为以前文章的重制版本,会详细说明</p><h1 id="开始前言"><a href="#开始前言" class="headerlink" title="开始前言"></a>开始前言</h1><p>首先,这篇文章所写的教程适用于大部分主题和网站<br>本篇文章会提供 HTML/YML 引用方法,可以将 HTML 引用方法转换成你主题所提供的自定义 head 方法</p><h1 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h1><p>首先打开你的 Butterfly 配置文件<br>一般为以下几个名称</p><ul><li>_config.butterfly.yml(存在于根目录下)</li><li>butterfly.yml(存在于 source/_data 目录下)</li><li>_config.yml(存在于主题目录下)</li></ul><p>找到 inject<br>在 head 部分粘贴以下内容</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css&quot;</span>  <span class="string">media=&quot;defer&quot;</span> <span class="string">onload=&quot;this.media=&#x27;all&#x27;&quot;&gt;</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">&lt;meting-js</span> <span class="string">server=&#x27;tencent&#x27;</span> <span class="string">type=&#x27;playlist&#x27;</span> <span class="string">id=&#x27;3813658180&#x27;</span> <span class="string">fixed=&#x27;true&#x27;&gt;&lt;/meting-js&gt;</span></span><br></pre></td></tr></table></figure><p>在 bottom 部分粘贴以下内容</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">async</span> <span class="string">src=&quot;https://cdn.jsdelivr.net/npm/aplayer&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">async</span> <span class="string">src=&quot;https://cdn.jsdelivr.net/npm/meting/dist/Meting.min.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><p>HTML 引入方法:<br>在 head 添加</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;link</span><br><span class="line">  rel=&quot;stylesheet&quot;</span><br><span class="line">  href=&quot;https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css&quot;</span><br><span class="line">  media=&quot;defer&quot;</span><br><span class="line">  onload=&quot;this.media=&#x27;all&#x27;&quot;</span><br><span class="line">/&gt;</span><br><span class="line">&lt;meting-js</span><br><span class="line">  server=&quot;tencent&quot;</span><br><span class="line">  type=&quot;playlist&quot;</span><br><span class="line">  id=&quot;3813658180&quot;</span><br><span class="line">  fixed=&quot;true&quot;</span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">meting-js</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在/body 前添加</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">async</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/aplayer&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&lt;script</span><br><span class="line">  async</span><br><span class="line">  src=&quot;https://cdn.jsdelivr.net/npm/meting/dist/Meting.min.js&quot;</span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>其中<code>server=&#39;tencent&#39; type=&#39;playlist&#39; id=&#39;3813658180&#39; fixed=&#39;true&#39;</code>可以自定义<br>自定义方法可参照 MetingJS 官方 README<br><a href="https://github.com/metowolf/MetingJS/blob/master/README.md">https://github.com/metowolf/MetingJS/blob/master/README.md</a><br>水完了,溜了溜了</p><h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p>如果你要达到本博客的刷新不断歌(除主动刷新或刷新 JavaScript 脚本)<br>需要开启 Pjax 功能</p><h1 id="Thanks-for-you"><a href="#Thanks-for-you" class="headerlink" title="Thanks for you"></a>Thanks for you</h1>]]></content>
    
    
    <summary type="html">添加一个音乐播放器 in your website</summary>
    
    
    
    <category term="Butterfly" scheme="https://blog.slqwq.cn/categories/Butterfly/"/>
    
    <category term="Custom" scheme="https://blog.slqwq.cn/categories/Butterfly/Custom/"/>
    
    
    <category term="Butterfly" scheme="https://blog.slqwq.cn/tags/Butterfly/"/>
    
    <category term="Custom" scheme="https://blog.slqwq.cn/tags/Custom/"/>
    
  </entry>
  
  <entry>
    <title>Waline评论系统部署日志</title>
    <link href="https://blog.slqwq.cn/2021/posts/rbblakpo/index.html"/>
    <id>https://blog.slqwq.cn/2021/posts/rbblakpo/index.html</id>
    <published>2021-02-21T19:46:58.000Z</published>
    <updated>2022-05-01T04:30:41.349Z</updated>
    
    <content type="html"><![CDATA[<p>本文章首发于<a href="https://www.yuque.com/ladjeek/ygg4q6">语雀</a>!<br>通过各种高科技功能同步到<a href="https://blog.slqwq.cn">Hajeekn 的博客</a><br><strong>本文基于</strong><a href="https://blog.ccknbc.cc/posts/waline-commens-system-deployment-logs/">@CCKNBC</a><strong>的日志</strong><a href="https://waline.js.org/">@Waline 官方文档</a>和博主自己部署时的实际情况编写<br>如果需要最详细的配置请前往 <a href="https://waline.js.org/">@Waline 官方文档</a></p><hr><h1 id="评论系统特性"><a href="#评论系统特性" class="headerlink" title="评论系统特性"></a>评论系统特性</h1><ul><li>快速</li><li><strong>真</strong>·安全</li><li>Markdown 语法支持</li><li>轻量易用</li><li>免费部署</li><li>多种部署方式和存储服务支持，每列选择一项多达 48 种部署方式任君选择</li></ul><div class="table-container"><table><thead><tr><th></th><th>Waline</th><th></th></tr></thead><tbody><tr><td><strong>客户端脚本</strong></td><td><strong>服务端部署</strong></td><td><strong>数据存储</strong></td></tr><tr><td>@waline/client</td><td>Vercel</td><td>LeanCloud</td></tr><tr><td>MiniValine</td><td>CloudBase</td><td>CloudBase</td></tr><tr><td></td><td>Docker</td><td>MongoDB</td></tr><tr><td></td><td>独立部署</td><td>MySQL</td></tr><tr><td></td><td></td><td>SQLite</td></tr><tr><td></td><td></td><td>PostgreSQL</td></tr><tr><td></td><td></td><td>Github</td></tr></tbody></table></div><h2 id="Todo"><a href="#Todo" class="headerlink" title="Todo"></a>Todo</h2><ul><li>[x] 微信通知</li><li>[x] QQ 通知</li><li>[x] Telegram 通知</li><li>[x] Akismet</li><li>[x] 文章统计</li><li>[x] 多语言同步</li><li>[x] 自定义语言支持</li><li>[x] 登录支持</li><li>[x] 评论管理</li><li>[x] 评论删除</li><li>[x] 其它数据库支持</li><li>[x] 基于 IP 的发布评论频率限制</li><li>[x] 基于关键词的评论过滤限制</li><li>[x] IP 黑名单</li><li>[x] 重复内容检测</li><li>[x] CloudBase 腾讯云开发部署支持</li><li>[x] 社交登录</li><li>[ ] AWS, GCP, Azure 部署支持</li><li>[ ] 置顶评论</li><li>[ ] 评论赞踩</li></ul><p>如果您要获得来自 Waline 群友或公子大佬的支持,可以在<a href="https://github.com/lizheming/waline/discussions">Github Discussions</a> 中发布问题获取支持。当然你也可以加入 Waline 的 <a href="https://t.me/walinejs">Telegram</a> 小组或者是加入我们的 <a href="https://qm.qq.com/cgi-bin/qm/qr?k=rPZvq_EBfwQa6QZX7sToVlhH49c6ed0R&amp;jump_from=webapi">Waline 用户交流 QQ 群</a>获取更多的支持。</p><h1 id="上手"><a href="#上手" class="headerlink" title="上手"></a>上手</h1><p>博主采用 Butterfly 主题,已经内置 Waline 评论系统</p><h2 id="Vercel-LeanCloud"><a href="#Vercel-LeanCloud" class="headerlink" title="Vercel + LeanCloud"></a>Vercel + LeanCloud</h2><p><strong>博主就使用了这种方式</strong><del>(毕竟能白嫖谁还要花钱啊?</del><br>博主推荐使用<a href="https://leancloud.app">LeanCloud 国际版本</a>,如果您使用的是<a href="https://leancloud.cn">LeanCloud 中国版本</a>,除了本文介绍的环境变量,还需要绑定 LeanCloud 域名<br>配置方式: 设置 &gt; 域名绑定 &gt; API 访问域名 绑定新域名 &gt; 输入需要绑定的已备案域名点击 确定。之后按照页面上的提示去 DNS 上做正确的 CNAME 解析即可。<br><a href="https://vercel.com/import/project?template=https://github.com/lizheming/waline/tree/master/example"> </a><img src="https://cdn.nlark.com/yuque/0/2021/svg/12488964/1613908946082-2b97a876-6dcf-437c-8b06-d1be78602a82.svg#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;height=32&amp;id=SkrZu&amp;originHeight=32&amp;originWidth=92&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=0&amp;status=done&amp;style=none&amp;title=&amp;width=92" alt=""><br>点击上面的 Deploy 按钮就可以快速跳转到 Vercel 部署辣<br>如果你没有 Vercel 账号,可能提示你需要注册一个,这里不要用 QQ 邮箱因为他们会认为 QQ 邮箱是一个垃圾邮箱<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171106702.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=nd4Cj&amp;originHeight=875&amp;originWidth=1896&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>PROJECT NAME 可以随便填写一个<br>这就是项目名称,不过为了之后好辩别,还是写一个方便记住的吧<br>输入了你的项目名称后点击 Continue 进入下一步<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171107459.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=GLi6Z&amp;originHeight=874&amp;originWidth=1898&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>不过可能会提示你要选择一个<br>随便来一个就是(前提是你有对应的账号,否则老老实实选择 GitHub<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171107509.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=uKJnF&amp;originHeight=429&amp;originWidth=937&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>进入下一步后会让你填写创建的 Git 仓库名称<br>点击你的用户名可以显示出你账号绑定的 GitHub 账号<br>这样就可以自定义创建的账号</p><p>下方 👇 的 Create private Git Repository 如果勾选上创建的时候就会创建一个私有仓库<br>然后再次点击 Continue 进行下一步<br>然后就会出现这个页面<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171107245.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=ARA2n&amp;originHeight=863&amp;originWidth=1895&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>不管他,下滑<br>找到 Environment Variables 配置环境变量<br>默认需要的环境变量如下:</p><ul><li>LEAN_ID</li><li>LEAN_KEY</li><li>LEAN_MASTER_KEY</li></ul><p>它们的值分别对应上一步在 LeanCloud 中获得的 APPID APPKEY MasterKey<br>获取方法:<br>进入 LeanCloud<br>这边用国际版演示<br>进入选择 <a href="https://console.leancloud.app/">Console</a><br>如果没有创建一个应用<br><strong>注意 ⚠: 如果您之前用了 Valine 评论系统 就不用创建了,因为 Waline 评论数据与 Valine 评论数据可以共用</strong><br>进入应用设置后选择 设置 -&gt; 应用 Keys<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171107450.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=N57mx&amp;originHeight=512&amp;originWidth=915&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>复制并保存 Credentials 的所有配置<br>你看不到我的是因为我遮掉了<br>顺便教各位在拍摄截图时怎么遮掉重要内容<br>F12 找到重要内容的文字标签<br>这里是 code<br>然后加上<br>color: 网页背景颜色; 和<br>background: 网页背景颜色;<br>这样就行辣<br>我们获取到了 APPID APPKEY MasterKey<br>创建变量填写就 OK<br>这里的变量需要一个一个填<br>你填完一个点击 ADD 然后就会填的数据就会在下方,但是上面的输入框会没有文字,这点就很棒(๑•̀ㅂ•́)و✧<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171108331.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=JpTSM&amp;originHeight=376&amp;originWidth=948&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>设置都完成后就可以点击 Deploy 了<br>在这里稍等一会儿就可以部署完成<br>部署完成后 Vercel 会放烟花 🎇 庆祝一下<br>然后在接下来的页面点击 Visit<br>就可以打开部署好的示例网页<br>然后你需要注册一个账号<br>在 Vercel 分配的域名后面加上/ui/register<br>第一个注册的会成为管理员哦~<br>如果你想要自定义管理员头衔<br>可以在客户端脚本中用<code>langMode.admin</code>配置哦<br>例如:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">waline</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> Waline = <span class="built_in">require</span>(<span class="string">&quot;@waline/client&quot;</span>);</span><br><span class="line">  <span class="keyword">new</span> Waline(&#123;</span><br><span class="line">    el: <span class="string">&quot;#waline-comment&quot;</span>,</span><br><span class="line">    serverURL: <span class="string">&quot;https://logwaline.vercel.app&quot;</span>,</span><br><span class="line">    path: <span class="built_in">window</span>.location.pathname,</span><br><span class="line">    visitor: <span class="literal">true</span>,</span><br><span class="line">    lang: location.pathname.startsWith(<span class="string">&quot;/en/&quot;</span>) ? <span class="string">&quot;en&quot;</span> : <span class="string">&quot;zh-CN&quot;</span>,</span><br><span class="line">    langMode: &#123;</span><br><span class="line">      admin: location.pathname.startsWith(<span class="string">&quot;/en/&quot;</span>) ? <span class="string">&quot;Administrator&quot;</span> : <span class="string">&quot;Hajeekn&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>按这样来说,你还可以配置访客的角标(头衔)<br>具体去看看<a href="https://waline.js.org/">Waline 文档</a>或者<a href="https://blog.ccknbc.cc/">@CCKNBC</a><br>当然如果你和我一样用的是 Butterfly<br>那么可以找到 Waline 配置项<br>在<code>option</code>配置项下面加入<br>    langMode:<br>     admin: Hajeekn<br>即可<br>示例:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">option:</span></span><br><span class="line">  <span class="attr">pageSize:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">requiredFields:</span> <span class="string">mail</span></span><br><span class="line">  <span class="comment"># anonymous: false</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">社交登录可助您快速录入信息，可匿名评论，但您的评论必须经人工审核通过后才会显示，并可收到相关回复邮件通知，因此邮箱为必填项</span></span><br><span class="line">  <span class="comment"># avatarCDN: https://sdn.geekzu.org/avatar/</span></span><br><span class="line">  <span class="comment">#https://valinecdn.bili33.top/</span></span><br><span class="line">  <span class="attr">langMode:</span></span><br><span class="line">    <span class="attr">admin:</span> <span class="string">Hajeekn</span></span><br></pre></td></tr></table></figure><p>当然 Waline 现在也可以更改邮件模板<br>只需要在环境变量内写入就行<br>但是环境变量限制大小,推荐按照<a href="https://github.com/lizheming/waline/issues/106">issues/106</a>配置<br>当然如果你的评论不是很多，并且之前配置过 Valine-Admin，那么你仍然可以使用 LeanCloud 来做异步发送通知，关闭默认的通知配置，或者使用 js 推送</p><h2 id="表情包配置-Butterfly"><a href="#表情包配置-Butterfly" class="headerlink" title="表情包配置(Butterfly)"></a>表情包配置(Butterfly)</h2><p>这部分和 Valine 没多大差别,格式也可以直接复制粘贴 Valine 的<br>只需要把名字改为 waline.json<br>具体可以查看<a href="https://butterfly.js.org/posts/ceeb73f/#%E8%A9%95%E8%AB%96">主题文档</a></p><h1 id="CloudBase-云开发部署"><a href="#CloudBase-云开发部署" class="headerlink" title="CloudBase 云开发部署"></a>CloudBase 云开发部署</h1><p>可以去看看<a href="https://blog.ccknbc.cc/posts/waline-commens-system-deployment-logs/#CloudBase-%E4%BA%91%E5%BC%80%E5%8F%91%E9%83%A8%E7%BD%B2">@CCKNBC</a>(CC)大佬写的</p><h1 id="升级"><a href="#升级" class="headerlink" title="升级"></a>升级</h1><h2 id="Vercel"><a href="#Vercel" class="headerlink" title="Vercel"></a>Vercel</h2><p>这里照搬<a href="https://blog.ccknbc.cc/posts/waline-commens-system-deployment-logs/#CloudBase-%E4%BA%91%E5%BC%80%E5%8F%91%E9%83%A8%E7%BD%B2">@CCKNBC</a>の<br>所需要的工具</p><ul><li><a href="https://github.com/marketplace/renovate">Renovate</a></li><li><a href="https://github.com/marketplace/mergify">Mergify</a></li></ul><p>当然前提是公开仓库<br>安装完成后你就可以删除你现有的名为 Waline 的仓库，再 fork <a href="https://github.com/ccknbc-actions/waline">CCKNBC 的仓库</a>，然后去你的 Vercel 解绑之前的仓库，再绑定你 fork 的仓库，最后点一下重新部署即可<br>但是如果你没用 tcb 就把 .github/workflows/Update Waline TCB.yml   里的文件删掉，因为涉及到自动部署更新云开发，还有环境变量问题，如果没设定会导致报错<br><strong><em>这部分照搬了 CC 的文章熬</em></strong></p><h2 id="Tencent-CloudBase"><a href="#Tencent-CloudBase" class="headerlink" title="Tencent CloudBase"></a>Tencent CloudBase</h2><p>和上面一样<br>Fork <a href="https://github.com/ccknbc-actions/waline">CCKNBC 的仓库</a> 然后新建几个变量<br>进入你的仓库/settings/secrets/actions</p><div class="table-container"><table><thead><tr><th>变量名</th><th>变量解释</th></tr></thead><tbody><tr><td>SECRETID</td><td>API 访问密钥 ID，可<a href="https://console.cloud.tencent.com/cam/capi">点击这里</a></td></tr><tr><td>新建/查看</td></tr><tr><td>SECRETKEY</td><td>API 访问密钥 KEY，可<a href="https://console.cloud.tencent.com/cam/capi">点击这里</a></td></tr><tr><td>新建/查看</td></tr><tr><td>TCBFUNNAME（没什么好加密的，就叫 waline 算了）</td><td>你想要新建/已有函数的名称，比如 <code>Waline</code></td></tr><tr><td>TCBENVID</td><td>环境 ID，可<a href="https://console.cloud.tencent.com/tcb/env/overview">点击这里</a></td></tr></tbody></table></div><p>或<a href="https://console.cloud.tencent.com/tcb/env/index">这里</a><br>查看，地址栏后也会显示，反正就是很多地方都在上面点一下就能看到 |</p><hr><p>我的博客即将同步至腾讯云+社区，邀请大家一同入驻：<a href="https://cloud.tencent.com/developer/support-plan?invite_code=3gll8aqhc2kgg">https://cloud.tencent.com/developer/support-plan?invite_code=3gll8aqhc2kgg</a></p>]]></content>
    
    
    <summary type="html">SL部署Waline评论系统时的日志，希望你也能用上这款评论系统</summary>
    
    
    
    <category term="评论" scheme="https://blog.slqwq.cn/categories/%E8%AF%84%E8%AE%BA/"/>
    
    <category term="部署日志" scheme="https://blog.slqwq.cn/categories/%E8%AF%84%E8%AE%BA/%E9%83%A8%E7%BD%B2%E6%97%A5%E5%BF%97/"/>
    
    
    <category term="评论" scheme="https://blog.slqwq.cn/tags/%E8%AF%84%E8%AE%BA/"/>
    
    <category term="部署日志" scheme="https://blog.slqwq.cn/tags/%E9%83%A8%E7%BD%B2%E6%97%A5%E5%BF%97/"/>
    
  </entry>
  
  <entry>
    <title>使用语雀随时编写文章</title>
    <link href="https://blog.slqwq.cn/2021/posts/gklcufla/index.html"/>
    <id>https://blog.slqwq.cn/2021/posts/gklcufla/index.html</id>
    <published>2021-02-20T11:41:21.000Z</published>
    <updated>2022-05-01T04:30:41.351Z</updated>
    
    <content type="html"><![CDATA[<p>本文章首发于<a href="https://www.yuque.com/ladjeek/ygg4q6">语雀</a>!<br>通过各种高科技功能同步到<a href="https://blog.slqwq.cn">Hajeekn 的博客</a><br><div class="note info simple"><p>本文章基于<a href="https://zfe.space/post/554e.html">冰卡诺老师的教程</a>编写</p></div><br><div class="note danger simple"><p>「语雀」是一个「专业的云端知识库」，孵化自  <a href="https://www.antfin.com/?deer_tracert_token=cc478126-c93a-459b-a448-dd41de67f2d4">蚂蚁金服</a> ，是  <a href="https://www.yuque.com/yubo/explore/tcaywl?deer_tracert_token=cc478126-c93a-459b-a448-dd41de67f2d4">体验科技</a>  理念下的一款创新产品，已是 10 万阿里员工进行文档编写、知识沉淀的标配。<br>语雀诞生伊始，只是希望能给工程师提供一个好用的工具用来写技术文档，达成「用 Markdown 写文档」这个小目标。但在产品研发的过程中，我们发现其实身边的每个人、每个团队、每个组织都有很多知识，但一直以来缺少一个好用的工具让这些知识不只是留在每个人的大脑或电脑里，还可以被记录、分享和交流。<br>所以，带着这颗初心，我们觉得语雀不应止步于服务工程师，应该致力于为每个想表达所思所想的人提供一款顺手的工具，让知识能得以记录和传播，让人们可以在「语雀」中平等快乐地创作和交流知识，让再小的个体也可以拥有自己的知识库。</p></div></p><h1 id="部署流程"><a href="#部署流程" class="headerlink" title="部署流程"></a>部署流程</h1><p>在语雀上编写文章并发布 -&gt; 通过 Webhook 触发 serverless 云函数的部署 — serverless 云函数使用 token 等数据调用 GitHub API -&gt; GitHub Actions 脚本运行(包括安装依赖与 Hexo / 同步语雀文章到本地 / 执行部署)</p><h1 id="教前准备"><a href="#教前准备" class="headerlink" title="教前准备"></a>教前准备</h1><ul><li>一个语雀账号</li></ul><a class="btn-beautify outline green larger" href="https://www.yuque.com/login?platform=wechat&inviteToken=f6e959505e77f114312173f53ec62f7b2c4ff248e08ed045603ad16d2ecf62ec"   title="Click Me"><i class="far fa-hand-point-right"></i><span>Click Me</span></a><ul><li>Vercel 账号</li><li>GitHub 私钥</li></ul><h2 id="GitHub-私钥的获得"><a href="#GitHub-私钥的获得" class="headerlink" title="GitHub 私钥的获得"></a>GitHub 私钥的获得</h2><a class="btn-beautify outline orange larger" href="https://github.com/settings/tokens"   title="Click Me"><i class="far fa-hand-point-right"></i><span>Click Me</span></a><p>进入以上地址<br><img src="https://cdn.nlark.com/yuque/0/2021/png/12488964/1613794133135-53076e7e-49e3-4d92-9453-c8df7c660726.png#align=left&amp;display=inline&amp;height=428&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=856&amp;originWidth=1895&amp;size=180244&amp;status=done&amp;style=none&amp;width=947.5" alt="image.png"></p><p>选择 Generate new token<br><img src="https://cdn.nlark.com/yuque/0/2021/png/12488964/1613794201009-7268b5a9-3ad0-48b1-9543-d402d1585bdf.png#align=left&amp;display=inline&amp;height=254&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=508&amp;originWidth=1146&amp;size=57781&amp;status=done&amp;style=none&amp;width=573" alt="image.png"><br>Note 随便填写<br>Select scopes 选择 repo / 或者宁可以全选,但是泄露了你就完蛋了(哭笑)<br><img src="https://cdn.nlark.com/yuque/0/2021/png/12488964/1613794290580-44aca6a7-fe80-4b5a-b691-5a7e190ec607.png#align=left&amp;display=inline&amp;height=41&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=82&amp;originWidth=1105&amp;size=7769&amp;status=done&amp;style=none&amp;width=552.5" alt="image.png"><br>生成好后复制这一串(避免有人手贱,推荐点击后面的蓝色按钮<img src="https://cdn.nlark.com/yuque/0/2021/png/12488964/1613794321440-4e986b79-26e1-4a71-b995-ed4e0ef2fa7b.png#align=left&amp;display=inline&amp;height=24&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=48&amp;originWidth=41&amp;size=462&amp;status=done&amp;style=none&amp;width=20.5" alt="image.png"><br>然后我们可以新建个 txt 记录下来,避免老年痴呆忘记(不是)<br><img src="https://cdn.nlark.com/yuque/0/2021/png/12488964/1613794384285-47ab5e7d-b087-4d16-b0db-05e94348338c.png#align=left&amp;display=inline&amp;height=473&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=946&amp;originWidth=1202&amp;size=436597&amp;status=done&amp;style=none&amp;width=601" alt="image.png"></p><h2 id="仓库新建"><a href="#仓库新建" class="headerlink" title="仓库新建"></a>仓库新建</h2><p>进入 GitHub 新建仓库<br><a class="btn-beautify outline orange larger" href="https://github.com/new"   title="点我传送"><i class="far fa-hand-point-right"></i><span>点我传送</span></a><br><img src="https://cdn.nlark.com/yuque/0/2021/png/12488964/1613794501142-563d3399-8640-4fae-bd35-c5b155fcea5f.png#align=left&amp;display=inline&amp;height=338&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=676&amp;originWidth=1163&amp;size=74636&amp;status=done&amp;style=none&amp;width=581.5" alt="image.png"><br>创建仓库时,权限请选择 Private(否则后续会很麻烦的)</p><h1 id="开始工作"><a href="#开始工作" class="headerlink" title="开始工作"></a>开始工作</h1><h2 id="创建知识库"><a href="#创建知识库" class="headerlink" title="创建知识库"></a>创建知识库</h2><p>登录语雀,进入<a href="https://www.yuque.com/dashboard">工作台</a><br>进入<a href="https://www.yuque.com/dashboard/my_books">个人知识库</a><br><img src="https://cdn.nlark.com/yuque/0/2021/png/12488964/1613794635798-0d420722-b9d5-43ae-aab4-63085925d0c9.png#align=left&amp;display=inline&amp;height=434&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=867&amp;originWidth=1882&amp;size=97209&amp;status=done&amp;style=none&amp;width=941" alt="image.png"><br>选择创建知识库<br><img src="https://cdn.nlark.com/yuque/0/2021/png/12488964/1613794717549-8483e394-ed71-49f9-9df9-ea6f3c1cc2ca.png#align=left&amp;display=inline&amp;height=419&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=838&amp;originWidth=1642&amp;size=175733&amp;status=done&amp;style=none&amp;width=821" alt="image.png"><br>归属选择你自己,类型选择文档知识库<br>点击下一步<br><img src="https://cdn.nlark.com/yuque/0/2021/png/12488964/1613794787185-a03d9656-feb9-4887-8af7-aff03fc038db.png#align=left&amp;display=inline&amp;height=371&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=743&amp;originWidth=1273&amp;size=100718&amp;status=done&amp;style=none&amp;width=636.5" alt="image.png"><br>名称随便填写,可见范围选择互联网可见<br>公开内容是否允许搜索引擎收录选择允许(其实允许不允许也没关系)<br>然后我们点击三个点 - 管理文档<br>新建 - 导入<img src="https://cdn.nlark.com/yuque/0/2021/png/12488964/1613794928815-d3f3928d-63ee-4e34-b718-de33f831c308.png#align=left&amp;display=inline&amp;height=420&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=839&amp;originWidth=917&amp;size=86665&amp;status=done&amp;style=none&amp;width=458.5" alt="image.png"><br>类型选择 Markdown<br>为了方便以后文档的撰写，可以新建模板。注意图片链接需要加上’’防止被渲染成链接。<br>盗一下冰老师的图</p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/8391485/1608132265373-09c816b7-bbf8-4a6f-9ea0-012060269c8b.png#align=left&amp;display=inline&amp;height=789&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=789&amp;originWidth=1279&amp;size=127438&amp;status=done&amp;style=none&amp;width=1279#align=left&amp;display=inline&amp;height=789&amp;margin=%5Bobject%20Object%5D&amp;originHeight=789&amp;originWidth=1279&amp;status=done&amp;style=none&amp;width=1279" alt="image.png"><br>如果你使用了 abbrlink，请手动填写 abbrlink。<br>这里提供一套语雀模板</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line"></span><br><span class="line">title: 使用语雀随时编写文章</span><br><span class="line">sticky: 1</span><br><span class="line">tags: [云端写作,语雀]</span><br><span class="line">description: 蛤,台式机不好带?GitHub上不去?用语雀写文章鸭</span><br><span class="line">categories: [云端写作,语雀[</span><br><span class="line">cover:</span><br><span class="line">photos: </span><br><span class="line">abbrlink: gklcufla</span><br><span class="line">date: 2021-02-20 11:41:21</span><br><span class="line">copyright<span class="emphasis">_author_</span>href: https://blog.slqwq.cn</span><br><span class="line">author: Hajeekn</span><br><span class="line">id: 32</span><br><span class="line"></span><br><span class="line">---</span><br></pre></td></tr></table></figure><p>tags 配置和 categories 配置推荐用数组格式</p><h2 id="安装语雀插件进行本地调试"><a href="#安装语雀插件进行本地调试" class="headerlink" title="安装语雀插件进行本地调试"></a>安装语雀插件进行本地调试</h2><p>为了确保在云端能够正常生成博客，需要首先在本地进行调试。<br>打开你的终端<br>使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g yuque-hexo</span><br></pre></td></tr></table></figure><p>全局安装 yuque-hexo 插件</p><h3 id="修改-package-json"><a href="#修改-package-json" class="headerlink" title="修改 package.json"></a>修改 package.json</h3><p>在第一个对象代码块后增加”yuqueConfig”代码块。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;hexo-site&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;0.0.0&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;private&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;build&quot;</span>: <span class="string">&quot;hexo generate&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;clean&quot;</span>: <span class="string">&quot;hexo clean&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;deploy&quot;</span>: <span class="string">&quot;hexo deploy&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;server&quot;</span>: <span class="string">&quot;hexo server&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line">  <span class="attr">&quot;yuqueConfig&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;postPath&quot;</span>: <span class="string">&quot;source/_posts&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;cachePath&quot;</span>: <span class="string">&quot;yuque.json&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;mdNameFormat&quot;</span>: <span class="string">&quot;slug&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;adapter&quot;</span>: <span class="string">&quot;markdown&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;concurrency&quot;</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="attr">&quot;baseUrl&quot;</span>: <span class="string">&quot;https://www.yuque.com/api/v2&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;login&quot;</span>: <span class="string">&quot;bingkanuo&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;repo&quot;</span>: <span class="string">&quot;sffipz&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;token&quot;</span>: <span class="string">&quot;***********************&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;onlyPublished&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;onlyPublic&quot;</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><p>其中的 login repo token 需要自己更改<br>login:<br><img src="https://cdn.nlark.com/yuque/0/2021/png/12488964/1613795210885-4690758f-c8cb-4846-b5a5-7b330221299f.png#align=left&amp;display=inline&amp;height=23&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=45&amp;originWidth=359&amp;size=3434&amp;status=done&amp;style=none&amp;width=179.5" alt="image.png">框起来的这一段(不要/和<a href="https://www.yuque.com">https://www.yuque.com</a>)<br>token 是在右上角头像 -&gt; 账户设置 -&gt; Token 添加的，权限的话只给读取就可以。复制粘贴获取的”token”字段。<br>再次盗图</p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/8391485/1608133711645-569d4bb4-3de1-450b-80b6-5cf1ca7060b0.png#align=left&amp;display=inline&amp;height=789&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=789&amp;originWidth=1279&amp;size=176577&amp;status=done&amp;style=none&amp;width=1279#align=left&amp;display=inline&amp;height=789&amp;margin=%5Bobject%20Object%5D&amp;originHeight=789&amp;originWidth=1279&amp;status=done&amp;style=none&amp;width=1279" alt="image.png"><br>添加完成后保存，在执行命令前，请先备份自己的_post 文件夹，因为语雀的下载操作会覆盖原有的_post 文件夹。<br>在终端中输入‘yuque-hexo sync’就会把语雀的文章给下载下来。<br>然后通过‘hexo g&amp;hexo s’进行调试。<br>ps：输入‘yuque-hexo clean’就会清除_post 下的所有文章。<br>如果存在外挂标签，请确保外挂标签格式的书写规范，否则容易报错。</p><h2 id="配置-GitHub-Actions"><a href="#配置-GitHub-Actions" class="headerlink" title="配置 GitHub Actions"></a>配置 GitHub Actions</h2><h3 id="删除主题的-git-使用-npm-安装请忽略"><a href="#删除主题的-git-使用-npm-安装请忽略" class="headerlink" title="删除主题的.git(使用 npm 安装请忽略)"></a>删除主题的.git(使用 npm 安装请忽略)</h3><p>因为在仓库里面再放一个仓库是没法把里面那个仓库 push 到 github 的，只会传一个空文件夹，会导致后期博客成了空白页面，需要把 git clone 的 hexo 主题里的.git 文件夹给删掉。</p><h2 id="修改-hexo-主题文件中的-meta"><a href="#修改-hexo-主题文件中的-meta" class="headerlink" title="修改 hexo 主题文件中的 meta"></a>修改 hexo 主题文件中的 meta</h2><p>以 Butterfly 主题为例<br>进入%brt%/themes/butterfly/layout/includes/head.pug (Windows 用户请替换 / 为 \ )<br>在 meta(name=”theme-color” content=themeColor)后方添加 meta(name=”referrer” content=”no-referrer”)。<br>该步骤是确保语雀中的图片可以正常加载。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">meta(name=&quot;theme-color&quot;</span> <span class="string">content=themeColor)</span></span><br><span class="line"><span class="string">meta(name=&quot;referrer&quot;</span> <span class="string">content=&quot;no-referrer&quot;)</span></span><br></pre></td></tr></table></figure><h2 id="修改-hexo-的-config-yml"><a href="#修改-hexo-的-config-yml" class="headerlink" title="修改 hexo 的_config,yml"></a>修改 hexo 的_config,yml</h2><p>前往博客的根目录，修改 hexo 的_config,yml 中关于 develop 的配置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repository:</span></span><br><span class="line">    <span class="attr">github:</span> <span class="string">https://用户名:保存在txt中的密钥@github.com/用户名/仓库名.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#例子：https://ladjeek-actions:*******@github.com/slblog-github/Blog.git</span></span><br></pre></td></tr></table></figure><h3 id="创建-GitHub-Actions-脚本"><a href="#创建-GitHub-Actions-脚本" class="headerlink" title="创建 GitHub Actions 脚本"></a>创建 GitHub Actions 脚本</h3><p>在博客根目录下新建.github 文件夹（点不要漏掉了），在该文件夹下新建 workflows 文件夹。<br><a href="https://cdn.nlark.com/yuque/0/2020/png/8391485/1608135890427-0dc37d9e-8eed-4581-8570-e806b5e4fa1a.png#align=left&amp;display=inline&amp;height=65&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=65&amp;originWidth=349&amp;size=4021&amp;status=done&amp;style=none&amp;width=349"><img src="https://cdn.nlark.com/yuque/0/2020/png/8391485/1608135890427-0dc37d9e-8eed-4581-8570-e806b5e4fa1a.png#align=left&amp;display=inline&amp;height=65&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=65&amp;originWidth=349&amp;size=4021&amp;status=done&amp;style=none&amp;width=349#align=left&amp;display=inline&amp;height=65&amp;margin=%5Bobject%20Object%5D&amp;originHeight=65&amp;originWidth=349&amp;status=done&amp;style=none&amp;width=349" alt="image.png"></a><br>在 workflows 文件夹下新建 autodeploy.yml。并填入以下代码。<br>将下面那个 user.name 和 user.email 修改为自己的信息，注意对齐。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">自动部署</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 当有改动推送和语雀发布时，启动Action</span></span><br><span class="line"><span class="attr">on:</span> [<span class="string">push</span>, <span class="string">repository_dispatch</span>]</span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">deploy:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">检查分支</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">ref:</span> <span class="string">master</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">安装</span> <span class="string">Node</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&quot;12.x&quot;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">安装</span> <span class="string">Hexo</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line">          <span class="string">export</span> <span class="string">TZ=&#x27;Asia/Shanghai&#x27;</span></span><br><span class="line">          <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-cli</span> <span class="string">-g</span> </span><br><span class="line">          <span class="comment">#npm install gulp-cli -g </span></span><br><span class="line">          <span class="comment">#如果你有使用gulp的话，打开上面这一行</span></span><br><span class="line">          <span class="string">npm</span> <span class="string">install</span> <span class="string">yuque-hexo</span> <span class="string">-g</span></span><br><span class="line">          <span class="string">yuque-hexo</span> <span class="string">clean</span></span><br><span class="line">          <span class="string">yuque-hexo</span> <span class="string">sync</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">缓存</span> <span class="string">Hexo</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/cache@v1</span></span><br><span class="line">        <span class="attr">id:</span> <span class="string">cache</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">node_modules</span></span><br><span class="line">          <span class="attr">key:</span> <span class="string">$&#123;&#123;runner.OS&#125;&#125;-$&#123;&#123;hashFiles(&#x27;**/package-lock.json&#x27;)&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">安装依赖</span></span><br><span class="line">        <span class="attr">if:</span> <span class="string">steps.cache.outputs.cache-hit</span> <span class="type">!=</span> <span class="string">&#x27;true&#x27;</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line">          <span class="string">npm</span> <span class="string">install</span> <span class="string">--save</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">更新</span> <span class="string">语雀拉取缓存及文章</span> <span class="comment">#更新yuque 拉取的文章到GitHub仓库</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line">          <span class="string">echo</span> <span class="string">`date</span> <span class="string">+&quot;%Y-%m-%d</span> <span class="string">%H:%M:%S&quot;`</span> <span class="string">begin</span> <span class="string">&gt;</span> <span class="string">time.log</span></span><br><span class="line">          <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.email</span> <span class="string">&quot;499984532@qq.com&quot;</span></span><br><span class="line">          <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.name</span> <span class="string">&quot;Zfour&quot;</span></span><br><span class="line">          <span class="string">git</span> <span class="string">add</span> <span class="string">.</span></span><br><span class="line">          <span class="string">git</span> <span class="string">commit</span> <span class="string">-m</span> <span class="string">&quot;Refresh yuque json&quot;</span> <span class="string">-a</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">推送</span> <span class="string">语雀拉取缓存及文章</span> <span class="comment">#推送修改后的yuque json</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">ad-m/github-push-action@master</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">github_token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITHUB_TOKEN</span> <span class="string">&#125;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">生成静态文件</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line">          <span class="string">hexo</span> <span class="string">clean</span></span><br><span class="line">          <span class="string">hexo</span> <span class="string">g</span></span><br><span class="line">          <span class="comment">#gulp # 使用Gulp压缩取消#号并和上面命令对齐</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">部署</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line">          <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.name</span> <span class="string">&quot;slblog-github&quot;</span></span><br><span class="line">          <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.email</span> <span class="string">&quot;sladmin@slwebtap.onmicrosoft.com&quot;</span></span><br><span class="line">          <span class="string">hexo</span> <span class="string">deploy</span></span><br></pre></td></tr></table></figure><h2 id="上传博客源码"><a href="#上传博客源码" class="headerlink" title="上传博客源码"></a>上传博客源码</h2><p>在你的终端输入:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;first commit&quot;</span></span><br><span class="line">git remote add origin https://github.com/你的用户名/你的私有博客源码仓库名.git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure><h2 id="进行云端调试"><a href="#进行云端调试" class="headerlink" title="进行云端调试"></a>进行云端调试</h2><p>上传后你会发现 github action 生效。等待几分钟后，如果打勾，就说明部署成功。如果未打勾请检查出错的步骤。</p><h2 id="配置云函数"><a href="#配置云函数" class="headerlink" title="配置云函数"></a>配置云函数</h2><p>以下采用 Vercel 示范,其他云函数请看详细步骤:<a href="https://zfe.space/post/554e.html">https://zfe.space/post/554e.html</a><br>为了方便调用,冰老师写了一个 API<br>调用方式如下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;yuque-vercel-webhook-api.vercel.app&#x2F;api?token&#x3D;&#39;&#123;填写你的github私钥&#125;&#39;&amp;user&#x3D;&#39;&#123;填写你的github用户名&#125;&#39;&amp;source&#x3D;&#39;&#123;填写你的github仓库地址&#125;&#39;</span><br></pre></td></tr></table></figure><p>你需要传递的参数有 token，user，source。<br>当然你也可以直接 Fork 冰老师的项目自己搭建<br><a href="https://github.com/Zfour/yuque_vercel_webhook_api">https://github.com/Zfour/yuque_vercel_webhook_api</a><br>部署完成后将<a href="https://yuque-vercel-webhook-api.vercel.app">https://yuque-vercel-webhook-api.vercel.app</a>换成你搭建好的地址</p><h2 id="配置语雀的-webhook"><a href="#配置语雀的-webhook" class="headerlink" title="配置语雀的 webhook"></a>配置语雀的 webhook</h2><h3 id="设定触发规则"><a href="#设定触发规则" class="headerlink" title="设定触发规则"></a>设定触发规则</h3><p>在知识库中选择设置 -&gt; 开发者<br><img src="https://cdn.nlark.com/yuque/0/2021/png/12488964/1613795895821-bbc15fcb-adab-4966-9b36-62ed416b8b73.png#align=left&amp;display=inline&amp;height=282&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=563&amp;originWidth=900&amp;size=44950&amp;status=done&amp;style=none&amp;width=450" alt="image.png"><br>添加一个 WebHook<br>推送方式选择发布文档 更新文档 删除文档<br>然后名称随便写,URL 就把上面的调用方式补充完成放上去就行<br>设置完毕后，你可以尝试发布一篇文章进行测试。如果 github action 执行则说明配置成功。</p><h1 id="Thanks-for-you"><a href="#Thanks-for-you" class="headerlink" title="Thanks for you~"></a>Thanks for you~</h1>]]></content>
    
    
    <summary type="html">蛤,台式机不好带?GitHub上不去?用语雀写文章鸭</summary>
    
    
    
    <category term="云端写作" scheme="https://blog.slqwq.cn/categories/%E4%BA%91%E7%AB%AF%E5%86%99%E4%BD%9C/"/>
    
    <category term="语雀" scheme="https://blog.slqwq.cn/categories/%E4%BA%91%E7%AB%AF%E5%86%99%E4%BD%9C/%E8%AF%AD%E9%9B%80/"/>
    
    
    <category term="云端写作" scheme="https://blog.slqwq.cn/tags/%E4%BA%91%E7%AB%AF%E5%86%99%E4%BD%9C/"/>
    
    <category term="语雀" scheme="https://blog.slqwq.cn/tags/%E8%AF%AD%E9%9B%80/"/>
    
  </entry>
  
  <entry>
    <title>部署你的RSS机器人</title>
    <link href="https://blog.slqwq.cn/2021/posts/yllqclb9/index.html"/>
    <id>https://blog.slqwq.cn/2021/posts/yllqclb9/index.html</id>
    <published>2021-02-18T17:03:01.000Z</published>
    <updated>2022-05-01T04:30:41.353Z</updated>
    
    <content type="html"><![CDATA[<p>本文章首发于<a href="https://www.yuque.com/ladjeek/ygg4q6">语雀</a>!<br>通过各种高科技功能同步到<a href="https://blog.slqwq.cn">Hajeekn 的博客</a><br>转眼望去,离上一篇已经有 7 天左右了,今天入手了一位大神写的<a href="https://github.com/indes/flowerss-bot">flowerss bot</a><br>挺好用的,今天给大家安利一下搭建方法( 白 嫖 )<br>首先呢，各位要注意下，flowerss bot 需要依赖一个 VPS，我知道你没钱买<s>其实我也是辣</s>，所以这篇教程用 Euserv 示范<br>白嫖 Euserv 鸡子的教程挺多的，各位可以自行 Bing 一下这边就不讲了。</p><h1 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h1><p>首先连接上 Euserv(我用的是嘿哟终端)<br>接着用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir flbot</span><br><span class="line">$ <span class="built_in">cd</span> flbot</span><br></pre></td></tr></table></figure><p>然后根据你的系统版本安装对应的版本<br>我是 64 就用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl -LJO https://github.com/indes/flowerss-bot/releases/download/v0.8.3/flowerss-bot-v0.8.3-linux-amd64.tar.gz</span><br></pre></td></tr></table></figure><p>如果你的 32 就用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl -LJO https://github.com/indes/flowerss-bot/releases/download/v0.8.3/flowerss-bot-v0.8.3-linux-386.tar.gz</span><br></pre></td></tr></table></figure><p>然后用 tar 命令解压包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tar zxvf  flowerss-bot-v0.8.3-linux-amd64.tar.gz</span><br></pre></td></tr></table></figure><p>如果是 32 位请用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tar zxvf  flowerss-bot-v0.8.3-linux-amd386.tar.gz</span><br></pre></td></tr></table></figure><p>再用 rm 命令删除包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ rm flowerss-bot-v0.8.3-linux-amd64.tar.gz</span><br></pre></td></tr></table></figure><p>如果是 32 位请用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ rm flowerss-bot-v0.8.3-linux-amd386.tar.gz</span><br></pre></td></tr></table></figure><p>然后执行 ls 查看文件<br>如果正确的话,目录结构应该如下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">flbot                          # 文件所在的目录</span><br><span class="line">|         |——README.md         # 项目的README</span><br><span class="line">|         |——config.yml.sample # 配置文件示例</span><br><span class="line">|         |——flowerss-bot      # 程序的文件</span><br></pre></td></tr></table></figure><p>然后你需要用 mv 指令去重命名 config.yml.sample</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mv config.yml.sample config.yml</span><br></pre></td></tr></table></figure><p>然后你就可以用 vim 编辑配置文件了</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim config.yml</span><br></pre></td></tr></table></figure><p>配置项如下:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这是配置文件示例</span></span><br><span class="line"><span class="attr">bot_token:</span> <span class="string">XXX</span></span><br><span class="line"><span class="comment">#多个telegraph_token可采用数组格式：</span></span><br><span class="line"><span class="comment"># telegraph_token:</span></span><br><span class="line"><span class="comment">#  - token_1</span></span><br><span class="line"><span class="comment">#  - token_2</span></span><br><span class="line"><span class="attr">telegraph_token:</span> <span class="string">xxxx</span></span><br><span class="line"><span class="attr">user_agent:</span> <span class="string">Mozilla/5.0</span> <span class="string">(X11;</span> <span class="string">Linux</span> <span class="string">x86_64)</span> <span class="string">AppleWebKit/537.36</span> <span class="string">(KHTML,</span> <span class="string">like</span> <span class="string">Gecko)</span> <span class="string">Chrome/51.0.2704.103</span> <span class="string">Safari/537.36</span></span><br><span class="line"><span class="attr">preview_text:</span> <span class="number">0</span></span><br><span class="line"><span class="attr">disable_web_page_preview:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">socks5:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:1080</span></span><br><span class="line"><span class="attr">update_interval:</span> <span class="number">10</span></span><br><span class="line"><span class="attr">error_threshold:</span> <span class="number">100</span></span><br><span class="line"><span class="attr">telegram:</span></span><br><span class="line">  <span class="attr">endpoint:</span> <span class="string">https://xxx.com/</span></span><br><span class="line"><span class="attr">mysql:</span></span><br><span class="line">  <span class="attr">host:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">3306</span></span><br><span class="line">  <span class="attr">user:</span> <span class="string">mysql_username</span></span><br><span class="line">  <span class="attr">password:</span> <span class="string">mysql_password</span></span><br><span class="line">  <span class="attr">database:</span> <span class="string">flowerss</span></span><br><span class="line"><span class="attr">sqlite:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">./data.db</span></span><br><span class="line"><span class="attr">allowed_users:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">123</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">234</span></span><br></pre></td></tr></table></figure><p>注意 ⚠: 如果您想要关闭终端后保持机器人的运行,请一定注意按以下步骤来<br>安装 screen</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get update</span><br><span class="line">$ apt-get install screen</span><br></pre></td></tr></table></figure><p>在终端执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ screen</span><br></pre></td></tr></table></figure><p>创建一个 screen 窗口<br>然后在里面启动就可以了</p><h1 id="配置项说明"><a href="#配置项说明" class="headerlink" title="配置项说明"></a>配置项说明</h1><p>bot_token(Telegram Bot Token)(必填)<br>telegraph_token(Telegraph Token 用于转存原文到 Telegraph)(可忽略)<br>preview_text(纯文字预览字数)(可忽略)<br>user_agent(User Agent)(可忽略)<br>disable_web_page_preview(是否禁用 web 页面预览)(可忽略)<br>update_interval(RSS 源扫描间隔/分钟)(可忽略)<br>error_threshold(源最大出错次数)(可忽略）<br>socks5(用于无法正常 Telegram API 的环境)(可忽略)<br>mysql(MySQL 数据库配置)(可忽略)<br>sqlite(SQLite 配置)(可忽略(已配置 mysql 时，该项失效))<br>telegram.endpoint(自定义 telegram bot api url)(可忽略)<br>allowed_users(允许使用 bot 的用户 telegram id)(可忽略(为空时所有用户都能使用 bot))</p><h1 id="申请-Telegram-Bot-Token"><a href="#申请-Telegram-Bot-Token" class="headerlink" title="申请 Telegram Bot Token"></a>申请 Telegram Bot Token</h1><p>以下部分截图和文章来自<a href="https://www.dejavu.moe/">Spoience 的博客</a><br>打开 Telegram 搜索 @BotFather</p><p><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171105160.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=rJkSB&amp;originHeight=203&amp;originWidth=351&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><p>点击 Start，发送 /newbot<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171105356.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=e7ELr&amp;originHeight=711&amp;originWidth=637&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><p>然后给你的 Telegram Bot 取一个昵称和名字，框中马赛克部分就是创建的 Telegram Bot Token，请妥善保管该 Token：<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171105882.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=lsW1L&amp;originHeight=763&amp;originWidth=643&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><h1 id="申请-Telegraph-Token"><a href="#申请-Telegraph-Token" class="headerlink" title="申请 Telegraph Token"></a>申请 Telegraph Token</h1><p>| Telegram 应用内预览需要 Telegraph Api，所以我们还需要申请个 Telegraph Token<br>在终端中执行下面命令，会返回一段 json 格式的文本，其中的 access_token 字段值即为 Telegraph Token，请妥善保存</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">curl</span> <span class="string">https://api.telegra.ph/createAccount?short_name=DaiRSS_Bot&amp;author_name=Spoience&amp;author_url=https://spoience.com</span></span><br></pre></td></tr></table></figure><p>其中的 short_name author_name author_url 请替换成自己的</p><h1 id="查看-Telegram-ID"><a href="#查看-Telegram-ID" class="headerlink" title="查看 Telegram ID"></a>查看 Telegram ID</h1><p>| 默认的配置是允许所有用户使用我们刚刚创建的 Telegram RSS Bot，但为了安全、防止被滥用我们可以设置指定 ID 的 Telegram 用户能够使用该 Bot，获取允许使用用户（比如自己）的 Telegram ID 并填入配置文件的 allowed_users 字段<br>获取 Telegram ID：<a href="https://t.me/getmyid_bot?start=botostore">https://t.me/getmyid_bot?start=botostore</a></p><h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><p>将 Bot 添加到您的频道中，并设置为管理员，Bot 的管理命令如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/sub @ChannelID [url] 订阅</span><br><span class="line">/unsub @ChannelID [url] 取消订阅</span><br><span class="line">/list @ChannelID 查看当前订阅</span><br><span class="line">/check @ChannelID 检查当前订阅</span><br><span class="line">/unsuball @ChannelID 取消所有订阅</span><br><span class="line">/activeall @ChannelID 开启所有订阅</span><br><span class="line">/setfeedtag @ChannelID [sub id] [tag1] [tag2]  设置订阅标签（最多设置三个Tag，以空格分隔）</span><br><span class="line">/import 导入 OPML 文件</span><br><span class="line">/export @ChannelID 导出 OPML 文件</span><br><span class="line">/pauseall @ChannelID 暂停所有订阅</span><br></pre></td></tr></table></figure><p>然后这样一个机器人就配置好啦，你可以把它拉入你的频道,然后自己配置下 RSS<br>配置完成后你就可以看到更新文章时你的频道会有提示辣<br>Spoience 的频道: <a href="https://t.me/Spoience_com">Click Me</a></p>]]></content>
    
    
    <summary type="html">快来部署一个支持TG内预览RSS的机器人吧</summary>
    
    
    
    
    <category term="VPS" scheme="https://blog.slqwq.cn/tags/VPS/"/>
    
  </entry>
  
  <entry>
    <title>搭建 YesPlayMusic 网页版</title>
    <link href="https://blog.slqwq.cn/2021/posts/oc1hvkia/index.html"/>
    <id>https://blog.slqwq.cn/2021/posts/oc1hvkia/index.html</id>
    <published>2021-02-11T11:39:55.000Z</published>
    <updated>2022-05-01T04:30:41.355Z</updated>
    
    <content type="html"><![CDATA[<p>本文章首发于<a href="https://www.yuque.com/ladjeek/ygg4q6">语雀</a>!<br>通过各种高科技功能同步到<a href="https://blog.slqwq.cn">Hajeekn 的博客</a><br>最近在看 Spoience 的博客时看到了一篇文章: “一款高颜值跨平台的第三方网易云播放器 YesPlayMusic”<br>于是便看了看<br>看完后我进入了 YesPlayMusic 的 GitHub,突然我看到了这个<br><img src="https://npm.elemecdn.com/wytong-source/photos/PicGo/202204171057375.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=CzHCn&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>可以直接将这个项目部署至云端，于是便抱着好奇的心试了试<br>以下是搭建步骤</p><h1 id="搭建网易云-API"><a href="#搭建网易云-API" class="headerlink" title="搭建网易云 API"></a>搭建网易云 API</h1><p>考虑到大部分人没有钱买服务器,抱着白嫖的心态部署在了 leancloud 尝试,没想到竟然可以<br>以下就是步骤喽</p><h2 id="登录-Leancloud"><a href="#登录-Leancloud" class="headerlink" title="登录 Leancloud"></a>登录 Leancloud</h2><p>进入<a href="https://leancloud.app">leancloud 的国际版官网</a><br><img src="https://npm.elemecdn.com/wytong-source/photos/PicGo/202204171057084.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=XCCLZ&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>有账号的点击 Console<br>没有账号的选择中间的 Get started for free</p><h2 id="创建应用"><a href="#创建应用" class="headerlink" title="创建应用"></a>创建应用</h2><p>进入控制台后创建一个应用<br><img src="https://npm.elemecdn.com/wytong-source/photos/PicGo/202204171057214.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=GrIzH&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>⚠ 注意: 现在必须写入应用描述,否则无法创建</p><h2 id="部署-API"><a href="#部署-API" class="headerlink" title="部署 API"></a>部署 API</h2><p>创建成功后进入你创建的应用后台<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171102794.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=WkOzz&amp;originHeight=436&amp;originWidth=320&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt="">选择云引擎 -&gt; WEB -&gt; 部署<br>选择部署项目 -&gt; Git 部署 -&gt; 配置 Git<br>在配置 Git 处填入<br><a href="https://github.com/ChenYFan-Tester/NeteaseCloudMusicApi.git">https://github.com/ChenYFan-Tester/NeteaseCloudMusicApi.git</a><br>然后点击保存<br>保存完成之后再次进入部署项目<br>选择手动部署 -&gt; 生产环境 -&gt; 部署<br>稍等片刻即可部署完成<img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171102499.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=eXVYi&amp;originHeight=622&amp;originWidth=1060&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><p>完成后关闭部署日志窗口<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171103830.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=pbkBY&amp;originHeight=441&amp;originWidth=309&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt="">选择设置 -&gt;　域名绑定 -&gt; 绑定新域名<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171103997.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=XK9TM&amp;originHeight=689&amp;originWidth=1068&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>在域名处填入自己准备绑定的域名,然后其他的原封不动,选择绑定<br><img src="https://rmt.ladydaily.com/fetch/hajeekn/storage/202204171103224.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=mZS3w&amp;originHeight=452&amp;originWidth=654&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>这时候会给你分配一个 cname 域名<br>进入你的域名解析商<br>添加一个解析<br>解析记录选择 CNAME<br>主机记录填写刚才填写的域名(去掉.xxx.xx)<br>记录值填写刚才 leancloud 分配的 CNAME 域名<br>填写完成后大概的样子是这样的<br>保存,稍等片刻 leancloud 处就会显示部署完成<br>然后就可以部署主程序了</p><h2 id="部署主程序"><a href="#部署主程序" class="headerlink" title="部署主程序"></a>部署主程序</h2><p>首先克隆云端仓库下来构建<br>在终端输入以下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/qier222/YesPlayMusic.git</span><br><span class="line"><span class="built_in">cd</span> YesPlayMusic</span><br></pre></td></tr></table></figure><p>然后你需要安装依赖<br>在终端输入以下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn install</span><br></pre></td></tr></table></figure><p>依赖安装完成后把目录下的.env.example 改成.env<br>修改 VUE_APP_NETEASE_API_URL=后的数据为你刚才部署的 API 的地址<br>例如我的是<a href="https://testapi.slqwq.cn就填写进去">https://testapi.slqwq.cn就填写进去</a><br>VUE_APP_ELECTRON_API_URL=后的数据填写/<br>然后就可以用 yarn serve 查看<br>查看后觉得效果不错就可以用 yarn build 进行构建了<br>构建完成后上传到 GitHub 启动 Pages 服务就可以愉快的用了<br>如果想让这个 YesPlayMusic 支持播放灰色音乐还需要搭建 UnlockNeteaseMusic<br>各位可以自行去摸索<br>这边放上一个我搭建的网页<br><a href="https://music.slqwq.cn">https://music.slqwq.cn</a></p><h1 id="Thanks-for-you"><a href="#Thanks-for-you" class="headerlink" title="Thanks for you"></a>Thanks for you</h1><p>啊对了,今天是新年,祝各位新年快乐哦!</p>]]></content>
    
    
    <summary type="html">没有服务器?用Leancloud鸭</summary>
    
    
    
    <category term="Leancloud" scheme="https://blog.slqwq.cn/categories/Leancloud/"/>
    
    
    <category term="Leancloud" scheme="https://blog.slqwq.cn/tags/Leancloud/"/>
    
  </entry>
  
  <entry>
    <title>一款超好看(不好看)的H++说说主题</title>
    <link href="https://blog.slqwq.cn/2021/posts/alilvpyl/index.html"/>
    <id>https://blog.slqwq.cn/2021/posts/alilvpyl/index.html</id>
    <published>2021-02-08T18:00:41.000Z</published>
    <updated>2022-05-01T04:30:41.357Z</updated>
    
    <content type="html"><![CDATA[<p>本文章首发于<a href="https://www.yuque.com/ladjeek/ygg4q6">语雀</a>!<br>通过各种高科技功能同步到<a href="https://blog.slqwq.cn">Hajeekn 的博客</a><br>事发起因:<br>在前几天入手了<a href="https://blog.cyfan.top]写的HexoPlusPlus于是今天给 Butterfly 提了 Pr,适配 HexoPlusPlus 的说说突然,我在翻看文档时看到了这个![image.png](https://cdn.nlark.com/yuque/0/2021/png/12488964/1612778558561-4610a8c9-9e0c-411f-8f1f-877c6a822eab.png#align=left&amp;display=inline&amp;height=146&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=292&amp;originWidth=1217&amp;size=28590&amp;status=done&amp;style=none&amp;width=608.5">CYF 大佬</a><br>自定义主题<br>欸我就想着,我也可以写个啊,于是就有了这篇文章。<br>噗(/≧▽≦)/<br><div class="note green icon simple"><i class="note-icon fab fa-internet-explorer"></i><p>前排提示: 本 CSS 基于 HexoPlusPlus 制作,使用请先配置 HexoPlusPlus。</p></div></p><h1 id="参考文档配置-HexoPlusPlus"><a href="#参考文档配置-HexoPlusPlus" class="headerlink" title="参考文档配置 HexoPlusPlus"></a>参考文档配置 HexoPlusPlus</h1><a class="btn-beautify orange larger" href="https://hexoplusplus.js.org"   title="Click me to HexoPlusPlus Docs"><i class="far fa-hand-point-right"></i><span>Click me to HexoPlusPlus Docs</span></a><h1 id="配置说说"><a href="#配置说说" class="headerlink" title="配置说说"></a>配置说说</h1><p>在你的 Hexo 新建一个页面<br>里面填写以下内容</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;link</span><br><span class="line">  rel=&quot;stylesheet&quot;</span><br><span class="line">  href=&quot;https://cdn.jsdelivr.net/gh/HexoPlusPlus/HexoPlusPlus@1.1.0/talk.css&quot;</span><br><span class="line">/&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/HexoPlusPlus/HexoPlusPlus@1.1.0/talk_user.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;hpp_talk&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">new</span> hpp_talk(&#123;</span></span><br><span class="line"><span class="javascript">    id: <span class="string">&quot;hpp_talk&quot;</span>, <span class="comment">//容器id</span></span></span><br><span class="line"><span class="javascript">    domain: <span class="string">&quot;&quot;</span>, <span class="comment">//您的HexoPlusPlus域名，如blogadmin.cyfan.top</span></span></span><br><span class="line"><span class="javascript">    limit: <span class="number">10</span>, <span class="comment">//单次获取的最多条数</span></span></span><br><span class="line"><span class="javascript">    start: <span class="number">0</span>, <span class="comment">//从第几条开始</span></span></span><br><span class="line"><span class="javascript">    themecss: <span class="string">&quot;&quot;</span>, <span class="comment">//自定义说说主题，可选【仅1.1.0版本及以上使用】</span></span></span><br><span class="line">  &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>(如果你用的版本已经内置了 HPP 的说说,那就用自带的吧)<br>其中的 domain 换成你刚才部署的 HexoPlusPlus 的域名<br>在 themecss 处填入<br><a href="https://cdn.jsdelivr.net/gh/ladjeek-actions/CDN@master/plugin/theme/hpp_user_talk/Fuitrt.css">https://cdn.jsdelivr.net/gh/ladjeek-actions/CDN@master/plugin/theme/hpp_user_talk/Fuitrt.css</a><br>更改后内容如下:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;link</span><br><span class="line">  rel=&quot;stylesheet&quot;</span><br><span class="line">  href=&quot;https://cdn.jsdelivr.net/gh/HexoPlusPlus/HexoPlusPlus@1.1.0/talk.css&quot;</span><br><span class="line">/&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/HexoPlusPlus/HexoPlusPlus@1.1.0/talk_user.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;hpp_talk&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">new</span> hpp_talk(&#123;</span></span><br><span class="line"><span class="javascript">    id: <span class="string">&quot;hpp_talk&quot;</span>, <span class="comment">//容器id</span></span></span><br><span class="line"><span class="javascript">    domain: <span class="string">&quot;&quot;</span>, <span class="comment">//您的HexoPlusPlus域名，如blogadmin.cyfan.top</span></span></span><br><span class="line"><span class="javascript">    limit: <span class="number">10</span>, <span class="comment">//单次获取的最多条数</span></span></span><br><span class="line"><span class="javascript">    start: <span class="number">0</span>, <span class="comment">//从第几条开始</span></span></span><br><span class="line">    themecss:</span><br><span class="line"><span class="javascript">      <span class="string">&quot;https://cdn.jsdelivr.net/gh/ladjeek-actions/CDN@master/plugin/theme/hpp_user_talk/Fuitrt.css&quot;</span>, <span class="comment">//自定义说说主题，可选【仅1.1.0版本及以上使用】</span></span></span><br><span class="line">  &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>然后配置就完成了,可以 hexo s 看效果了<br><strong>请注意,使用**</strong>Fuitrt 做为说说主题时需要为你的 Butterfly 主题配置一个背景,并且文章卡片不应为全白~**</p><h1 id="Pofato-主题"><a href="#Pofato-主题" class="headerlink" title="Pofato 主题"></a>Pofato 主题</h1><p>这款主题与上面的安装方法一致<br>只需要把 themecss 改成以下配置</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">themecss:</span><br><span class="line">&quot;https://cdn.jsdelivr.net/gh/ladjeek-actions/CDN@master/plugin/theme/hpp_user_talk/Pofato.css&quot;</span><br><span class="line">//自定义说说主题，可选【仅1.1.0版本及以上使用】</span><br></pre></td></tr></table></figure><h1 id="文章结束-没有什么好看的了"><a href="#文章结束-没有什么好看的了" class="headerlink" title="文章结束,没有什么好看的了"></a>文章结束,没有什么好看的了</h1>]]></content>
    
    
    <summary type="html">由博主写的一款超好看(不好看)的HPP说说主题</summary>
    
    
    
    <category term="CSS" scheme="https://blog.slqwq.cn/categories/CSS/"/>
    
    
    <category term="CSS" scheme="https://blog.slqwq.cn/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>让我们拥有一个属于自己的美妙终端吧~</title>
    <link href="https://blog.slqwq.cn/2021/posts/al1eiu0l/index.html"/>
    <id>https://blog.slqwq.cn/2021/posts/al1eiu0l/index.html</id>
    <published>2021-02-04T11:28:20.000Z</published>
    <updated>2022-05-01T04:30:41.359Z</updated>
    
    <content type="html"><![CDATA[<p>本文章首发于<a href="https://www.yuque.com/ladjeek/ygg4q6">语雀</a>!<br>通过各种高科技功能同步到<a href="https://blog.slqwq.cn">Hajeekn 的博客</a><br>⚠ 本文章仅适用于 - Windows 10(未精简版)<br>先放上我的图~<br><img src="https://cdn.nlark.com/yuque/0/2021/png/12488964/1612409189457-80f7a8aa-52ae-4bb2-ba22-943dbdfa83a7.png#align=left&amp;display=inline&amp;height=471&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=941&amp;originWidth=1746&amp;size=3116069&amp;status=done&amp;style=none&amp;width=873" alt="image.png"><br>oh,看起来是不是很美妙呢?<br>让我们开始吧~~~~ 1.下载并安装 Windows Terminal / Powershell(7)<br>首先,我们需要下载 Windows Terminal<br>打开 Windows 10 Microsoft Store<br>在搜索框搜索 Windows Terminal<br><img src="https://cdn.nlark.com/yuque/0/2021/png/12488964/1612409116465-446496df-50a3-4750-ba33-5b7d80504dd6.png#align=left&amp;display=inline&amp;height=44&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=88&amp;originWidth=467&amp;size=12534&amp;status=done&amp;style=none&amp;width=233.5" alt="image.png"><br>进入这个应用卡片(Windows Terminal / Windows Terminal Pre 版)<br>安装它~<br>安装完成 Windows Terminal 后就可以进入下一步 - 安装 Powershell<br>注意了,这里指的 Powershell 可不是那个蓝蓝的玩意儿<br><img src="https://cdn.nlark.com/yuque/0/2021/png/12488964/1612409140109-e7f9784a-645f-4ea9-ae07-b5fdc2fee715.png#align=left&amp;display=inline&amp;height=490&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=981&amp;originWidth=1889&amp;size=53394&amp;status=done&amp;style=none&amp;width=944.5" alt="image.png"><br>你猜对了,不是上面这个奇怪的玩意儿,而是 Powershell 7(新版)<br>| 首先声明，我们这儿用的 Powershell 与 Windows 自带的 Powershell 是完全不同的两个东西，除了功能相似和名字相同，两者内在已经天差地别。| (声明来自康佬~)<br>首先我们前去 Powershell 7 的<a href="https://github.com/PowerShell/PowerShell/releases">GitHub 页面</a><br>随便下载一个版本,下载完成后安装就是了。 2. 安装字体<br>然后我们安装一个字体<br>这边笔者采用了<a href="https://github.com/tonsky/FiraCode/releases/download/3.1/FiraCode_3.1.zip">Fira Code</a> 3. 安装插件<br>这边我推荐的插件如下:</p><ul><li>PSReadLine</li><li>oh-my-posh</li><li>posh-git</li></ul><p>作用介绍:<br>(PSReadLine):<br>PSReadLine 是一个由微软发布的用于 PowerShell 的行读取实现，提供了以下功能：</p><ul><li>语法着色</li><li>简单语法错误通知</li><li>良好的多行体验</li><li>可自定义的键绑定</li><li>Cmd 和 Emacs 模式</li><li>许多配置选项</li><li>Bash 样式的补全</li><li>Bash/zsh 样式的交互式历史记录搜索</li><li>Emacs yank/kill ring</li><li>基于 PowerShell Token 的单词移动和删除</li><li>撤销 / 重做</li><li>自动保存历史记录，包括在实时会话中共享历史记录</li><li>菜单补全、Intellisense</li></ul><p>(oh-my-posh / posh-git):</p><ul><li>类似于 oh-my-zsh，oh-my-posh 为 PowerShell 提供了很多自定义主题和配色，而 posh-git 为 PowerShell 提供了 git 状态显示和命令补全等。</li></ul><p>看完上边的三个插件介绍，我们来安装这三个插件。<br>用管理员模式打开刚装好的<strong>新版</strong> powershell，输入命令。<br>Install-Module -Name PSReadLine -AllowPrerelease -Force<br>Install-Module posh-git -Scope CurrentUser<br>Install-Module oh-my-posh -Scope CurrentUser</p><p><strong>一定要用刚刚安装的新版的 powershell，安装过程可能过于慢，请耐心等待。</strong><br>后面两个包的来源可能<strong><em>不受系统信任</em></strong>，不用管它，如果让你选择是否信任，直接输入 <code>Y</code> 即可。 4. 编辑 $Profile 文件<br>在命令行输入以下命令:<br>notepad.exe $Profile</p><p>如果提示不存在就直接创建<br>在内部写入以下代码:<br>Import-Module posh-git # 引入 posh-git<br>Import-Module oh-my-posh # 引入 oh-my-posh</p><p>Set-Theme Paradox # 设置主题为 Paradox</p><p>Set-PSReadlineKeyHandler -Key Tab -Function Complete # 设置 Tab 键补全<br>Set-PSReadLineKeyHandler -Key “Ctrl+d” -Function MenuComplete # 设置 Ctrl+d 为菜单补全和 Intellisense<br>Set-PSReadLineKeyHandler -Key “Ctrl+z” -Function Undo # 设置 Ctrl+z 为撤销<br>Set-PSReadLineKeyHandler -Key UpArrow -Function HistorySearchBackward # 设置向上键为后向搜索历史记录<br>Set-PSReadLineKeyHandler -Key DownArrow -Function HistorySearchForward # 设置向下键为前向搜索历史纪录</p><blockquote><p><strong>oh-my-posh 提供了 10 款 漂亮 的主题供我们选择。 <code>Agnoster</code>,<code>Avit</code>,<code>Darkblood</code>,<code>Fish</code>,<code>Honukai</code>,<code>Paradox</code>,<code>PowerLine</code>,<code>robbyrussell</code>,<code>Sorin</code>,<code>tehrob</code></strong>5. 接下来打开 &gt; <code>Windows Terminal</code><br>Windows Terminal 默认为旧版本的 powershell，我们需要把新版本作为默认。<br><img src="https://cdn.nlark.com/yuque/0/2021/png/12488964/1612409052253-3da368bd-60ed-4f1d-8c7d-92157148ecc7.png#align=left&amp;display=inline&amp;height=627&amp;margin=%5Bobject%20Object%5D&amp;originHeight=627&amp;originWidth=986&amp;size=0&amp;status=done&amp;style=none&amp;width=986" alt=""></p></blockquote><p>修改的内容有三个，如果你不想自己改可以直接将我的粘贴到配置文件（需要注意的是：你的 <code>commandline</code>，如果按照默认路径安装（预览版），那么可以直接复制下边。正式版或者更换了安装位置，那么请手动更改位置。其他信息试自己能力进行修改）。<br>// This file was initially generated by Windows Terminal 1.0.1401.0<br>// It should still be usable in newer versions, but newer versions might have additional<br>// settings, help text, or changes that you will not see unless you clear this file<br>// and let us generate a new one for you.</p><p>// To view the default settings, hold “alt” while clicking on the “Settings” button.<br>// For documentation on these settings, see: <a href="https://aka.ms/terminal-documentation">https://aka.ms/terminal-documentation</a><br>{<br>    “$schema”: “<a href="https://aka.ms/terminal-profiles-schema">https://aka.ms/terminal-profiles-schema</a>“,</p><p>“defaultProfile”: “{574e775e-4f2a-5b96-ac1e-a2962a402336}”,</p><p>// You can add more global application settings here.<br>    // To learn more about global settings, visit <a href="https://aka.ms/terminal-global-settings">https://aka.ms/terminal-global-settings</a></p><p>// If enabled, selections are automatically copied to your clipboard.<br>    “copyOnSelect”: false,</p><p>// If enabled, formatted data is also copied to your clipboard<br>    “copyFormatting”: false,</p><p>// A profile specifies a command to execute paired with information about how it should look and feel.<br>    // Each one of them will appear in the ‘New Tab’ dropdown,<br>    //   and can be invoked from the commandline with <code>wt.exe -p xxx</code><br>    // To learn more about profiles, visit <a href="https://aka.ms/terminal-profile-settings">https://aka.ms/terminal-profile-settings</a><br>    “profiles”: {<br>        “defaults”: {<br>            // Put settings here that you want to apply to all profiles.<br>        },<br>        “list”: [<br>            {<br>                // Make changes here to the powershell.exe profile.<br>                “guid”: “{61c54bbd-c2c6-5271-96e7-009a87ff44bf}”,<br>                “name”: “Windows PowerShell”,<br>                “commandline”: “powershell.exe”,<br>                “hidden”: false<br>            },<br>            {<br>                // Make changes here to the cmd.exe profile.<br>                “guid”: “{0caa0dad-35be-5f56-a8ff-afceeeaa6101}”,<br>                “name”: “命令提示符”,<br>                “commandline”: “cmd.exe”,<br>                “hidden”: false<br>            },<br>            {<br>                “guid”: “{b453ae62-4e3d-5e58-b989-0a998ec441b8}”,<br>                “hidden”: false,<br>                “name”: “Azure Cloud Shell”,<br>                “source”: “Windows.Terminal.Azure”<br>            },<br>            {<br>                “guid”: “{574e775e-4f2a-5b96-ac1e-a2962a402336}”,<br>                “hidden”: false,<br>                “name”: “PowerShell”,<br>                “source”: “Windows.Terminal.PowershellCore”<br>            },<br>            {<br>                // Powershell 7 配置<br>                “guid”: “{574e775e-4f2a-5b96-ac1e-a2962a402336}”,<br>                “hidden”: false,<br>                “name”: “pwsh”,<br>                // 注意：一定要写上 -nologo，否则开启 powershll 会有一段话输出，很讨厌！<br>                // 如果下载的是正是版，那么路径为：C:/Program Files/PowerShell/7/pwsh.exe -nologo<br>                “commandline”: “C:/Program Files/PowerShell/7-preview/pwsh.exe -nologo”,<br>                “source”: “Windows.Terminal.PowershellCore”,<br>                // 启动菜单一定要设置为 &lt;.&gt;，否则后面重要的一步将会无效！<br>                “startingDirectory”: “.”,<br>                // 字体<br>                “fontFace”: “Fira Code”,<br>                “fontSize”: 11,<br>                “historySize”: 9001,<br>                “padding”: “5, 5, 20, 25”,<br>                “snapOnInput”: true,<br>                “useAcrylic”: false,<br>                // 颜色<br>                “colorScheme”: “idleToes”<br>            }    ]<br>    },</p><p>// Add custom color schemes to this array.<br>    // To learn more about color schemes, visit <a href="https://aka.ms/terminal-color-schemes">https://aka.ms/terminal-color-schemes</a><br>    “schemes”: [<br>        {<br>            “name”: “Zenburn”,<br>            “black”: “#4d4d4d”,<br>            “red”: “#705050”,<br>            “green”: “#60b48a”,<br>            “yellow”: “#f0dfaf”,<br>            “blue”: “#506070”,<br>            “purple”: “#dc8cc3”,<br>            “cyan”: “#8cd0d3”,<br>            “white”: “#dcdccc”,<br>            “brightBlack”: “#709080”,<br>            “brightRed”: “#dca3a3”,<br>            “brightGreen”: “#c3bf9f”,<br>            “brightYellow”: “#e0cf9f”,<br>            “brightBlue”: “#94bff3”,<br>            “brightPurple”: “#ec93d3”,<br>            “brightCyan”: “#93e0e3”,<br>            “brightWhite”: “#ffffff”,<br>            “background”: “#3f3f3f”,<br>            “foreground”: “#dcdccc”<br>        },<br>        {<br>            “name”: “PencilDark”,<br>            “black”: “#212121”,<br>            “red”: “#c30771”,<br>            “green”: “#10a778”,<br>            “yellow”: “#a89c14”,<br>            “blue”: “#008ec4”,<br>            “purple”: “#523c79”,<br>            “cyan”: “#20a5ba”,<br>            “white”: “#d9d9d9”,<br>            “brightBlack”: “#424242”,<br>            “brightRed”: “#fb007a”,<br>            “brightGreen”: “#5fd7af”,<br>            “brightYellow”: “#f3e430”,<br>            “brightBlue”: “#20bbfc”,<br>            “brightPurple”: “#6855de”,<br>            “brightCyan”: “#4fb8cc”,<br>            “brightWhite”: “#f1f1f1”,<br>            “background”: “#212121”,<br>            “foreground”: “#f1f1f1”<br>        },<br>        {<br>            “name”: “Slate”,<br>            “black”: “#222222”,<br>            “red”: “#e2a8bf”,<br>            “green”: “#81d778”,<br>            “yellow”: “#c4c9c0”,<br>            “blue”: “#264b49”,<br>            “purple”: “#a481d3”,<br>            “cyan”: “#15ab9c”,<br>            “white”: “#02c5e0”,<br>            “brightBlack”: “#ffffff”,<br>            “brightRed”: “#ffcdd9”,<br>            “brightGreen”: “#beffa8”,<br>            “brightYellow”: “#d0ccca”,<br>            “brightBlue”: “#7ab0d2”,<br>            “brightPurple”: “#c5a7d9”,<br>            “brightCyan”: “#8cdfe0”,<br>            “brightWhite”: “#e0e0e0”,<br>            “background”: “#222222”,<br>            “foreground”: “#35b1d2”<br>        },<br>        {<br>            “name”: “OneHalfDark”,<br>            “black”: “#282c34”,<br>            “red”: “#e06c75”,<br>            “green”: “#98c379”,<br>            “yellow”: “#e5c07b”,<br>            “blue”: “#61afef”,<br>            “purple”: “#c678dd”,<br>            “cyan”: “#56b6c2”,<br>            “white”: “#dcdfe4”,<br>            “brightBlack”: “#282c34”,<br>            “brightRed”: “#e06c75”,<br>            “brightGreen”: “#98c379”,<br>            “brightYellow”: “#e5c07b”,<br>            “brightBlue”: “#61afef”,<br>            “brightPurple”: “#c678dd”,<br>            “brightCyan”: “#56b6c2”,<br>            “brightWhite”: “#dcdfe4”,<br>            “background”: “#282c34”,<br>            “foreground”: “#dcdfe4”<br>        },<br>        {<br>            “name”: “OneHalfLight”,<br>            “black”: “#383a42”,<br>            “red”: “#e45649”,<br>            “green”: “#50a14f”,<br>            “yellow”: “#c18401”,<br>            “blue”: “#0184bc”,<br>            “purple”: “#a626a4”,<br>            “cyan”: “#0997b3”,<br>            “white”: “#fafafa”,<br>            “brightBlack”: “#4f525e”,<br>            “brightRed”: “#e06c75”,<br>            “brightGreen”: “#98c379”,<br>            “brightYellow”: “#e5c07b”,<br>            “brightBlue”: “#61afef”,<br>            “brightPurple”: “#c678dd”,<br>            “brightCyan”: “#56b6c2”,<br>            “brightWhite”: “#ffffff”,<br>            “background”: “#fafafa”,<br>            “foreground”: “#383a42”<br>        },<br>        {<br>            “name”: “Material”,<br>            “black”: “#212121”,<br>            “red”: “#b7141f”,<br>            “green”: “#457b24”,<br>            “yellow”: “#f6981e”,<br>            “blue”: “#134eb2”,<br>            “purple”: “#560088”,<br>            “cyan”: “#0e717c”,<br>            “white”: “#efefef”,<br>            “brightBlack”: “#424242”,<br>            “brightRed”: “#e83b3f”,<br>            “brightGreen”: “#7aba3a”,<br>            “brightYellow”: “#ffea2e”,<br>            “brightBlue”: “#54a4f3”,<br>            “brightPurple”: “#aa4dbc”,<br>            “brightCyan”: “#26bbd1”,<br>            “brightWhite”: “#d9d9d9”,<br>            “background”: “#eaeaea”,<br>            “foreground”: “#232322”<br>        },<br>        {<br>            “name”: “MaterialDark”,<br>            “black”: “#212121”,<br>            “red”: “#b7141f”,<br>            “green”: “#457b24”,<br>            “yellow”: “#f6981e”,<br>            “blue”: “#134eb2”,<br>            “purple”: “#560088”,<br>            “cyan”: “#0e717c”,<br>            “white”: “#efefef”,<br>            “brightBlack”: “#424242”,<br>            “brightRed”: “#e83b3f”,<br>            “brightGreen”: “#7aba3a”,<br>            “brightYellow”: “#ffea2e”,<br>            “brightBlue”: “#54a4f3”,<br>            “brightPurple”: “#aa4dbc”,<br>            “brightCyan”: “#26bbd1”,<br>            “brightWhite”: “#d9d9d9”,<br>            “background”: “#232322”,<br>            “foreground”: “#e5e5e5”<br>        },<br>        {<br>            “name”: “Homebrew”,<br>            “black”: “#000000”,<br>            “red”: “#FC5275”,<br>            “green”: “#00a600”,<br>            “yellow”: “#999900”,<br>            “blue”: “#6666e9”,<br>            “purple”: “#b200b2”,<br>            “cyan”: “#00a6b2”,<br>            “white”: “#bfbfbf”,<br>            “brightBlack”: “#666666”,<br>            “brightRed”: “#e50000”,<br>            “brightGreen”: “#00d900”,<br>            “brightYellow”: “#e5e500”,<br>            “brightBlue”: “#0000ff”,<br>            “brightPurple”: “#e500e5”,<br>            “brightCyan”: “#00e5e5”,<br>            “brightWhite”: “#e5e5e5”,<br>            “background”: “#283033”,<br>            “foreground”: “#00ff00”<br>        },<br>        {<br>            “name”: “Breeze”,<br>            “black”: “#31363b”,<br>            “red”: “#ed1515”,<br>            “green”: “#11d116”,<br>            “yellow”: “#f67400”,<br>            “blue”: “#1d99f3”,<br>            “purple”: “#9b59b6”,<br>            “cyan”: “#1abc9c”,<br>            “white”: “#eff0f1”,<br>            “brightBlack”: “#7f8c8d”,<br>            “brightRed”: “#c0392b”,<br>            “brightGreen”: “#1cdc9a”,<br>            “brightYellow”: “#fdbc4b”,<br>            “brightBlue”: “#3daee9”,<br>            “brightPurple”: “#8e44ad”,<br>            “brightCyan”: “#16a085”,<br>            “brightWhite”: “#fcfcfc”,<br>            “background”: “#31363b”,<br>            “foreground”: “#eff0f1”<br>        },<br>        {<br>            “name”: “idleToes”,<br>            “black”: “#323232”,<br>            “red”: “#d25252”,<br>            “green”: “#7fe173”,<br>            “yellow”: “#ffc66d”,<br>            “blue”: “#4099ff”,<br>            “purple”: “#f680ff”,<br>            “cyan”: “#bed6ff”,<br>            “white”: “#eeeeec”,<br>            “brightBlack”: “#535353”,<br>            “brightRed”: “#f07070”,<br>            “brightGreen”: “#9dff91”,<br>            “brightYellow”: “#ffe48b”,<br>            “brightBlue”: “#5eb7f7”,<br>            “brightPurple”: “#ff9dff”,<br>            “brightCyan”: “#dcf4ff”,<br>            “brightWhite”: “#ffffff”,<br>            “background”: “#323232”,<br>            “foreground”: “#00ff00”<br>        },<br>        {<br>            “name”: “Firewatch”,<br>            “black”: “#585f6d”,<br>            “red”: “#d95360”,<br>            “green”: “#5ab977”,<br>            “yellow”: “#dfb563”,<br>            “blue”: “#4d89c4”,<br>            “purple”: “#d55119”,<br>            “cyan”: “#44a8b6”,<br>            “white”: “#e6e5ff”,<br>            “brightBlack”: “#585f6d”,<br>            “brightRed”: “#d95360”,<br>            “brightGreen”: “#5ab977”,<br>            “brightYellow”: “#dfb563”,<br>            “brightBlue”: “#4c89c5”,<br>            “brightPurple”: “#d55119”,<br>            “brightCyan”: “#44a8b6”,<br>            “brightWhite”: “#e6e5ff”,<br>            “background”: “#1e2027”,<br>            “foreground”: “#9ba2b2”<br>        },<br>        {<br>            “name”: “Github”,<br>            “black”: “#3e3e3e”,<br>            “red”: “#970b16”,<br>            “green”: “#07962a”,<br>            “yellow”: “#f8eec7”,<br>            “blue”: “#003e8a”,<br>            “purple”: “#e94691”,<br>            “cyan”: “#89d1ec”,<br>            “white”: “#ffffff”,<br>            “brightBlack”: “#666666”,<br>            “brightRed”: “#de0000”,<br>            “brightGreen”: “#87d5a2”,<br>            “brightYellow”: “#f1d007”,<br>            “brightBlue”: “#2e6cba”,<br>            “brightPurple”: “#ffa29f”,<br>            “brightCyan”: “#1cfafe”,<br>            “brightWhite”: “#ffffff”,<br>            “background”: “#f4f4f4”,<br>            “foreground”: “#3e3e3e”<br>        }<br>    ],</p><p>// Add custom keybindings to this array.<br>    // To unbind a key combination from your defaults.json, set the command to “unbound”.<br>    // To learn more about keybindings, visit <a href="https://aka.ms/terminal-keybindings">https://aka.ms/terminal-keybindings</a><br>    “keybindings”: [<br>        // Copy and paste are bound to Ctrl+Shift+C and Ctrl+Shift+V in your defaults.json.<br>        // These two lines additionally bind them to Ctrl+C and Ctrl+V.<br>        // To learn more about selection, visit <a href="https://aka.ms/terminal-selection">https://aka.ms/terminal-selection</a><br>        { “command”: { “action”: “copy”, “singleLine”: false }, “keys”: “ctrl+c” },<br>        { “command”: “paste”, “keys”: “ctrl+v” },</p><p>// Press Ctrl+Shift+F to open the search box<br>        { “command”: “find”, “keys”: “ctrl+shift+f” },</p><p>// Press Alt+Shift+D to open a new pane.<br>        // - “split”: “auto” makes this pane open in the direction that provides the most surface area.<br>        // - “splitMode”: “duplicate” makes the new pane use the focused pane’s profile.<br>        // To learn more about panes, visit <a href="https://aka.ms/terminal-panes">https://aka.ms/terminal-panes</a><br>        {<br>            “command”: {<br>                “action”: “splitPane”,<br>                “split”: “auto”,<br>                “splitMode”: “duplicate”<br>            },<br>            “keys”: “alt+shift+d”<br>        }<br>    ]<br>}</p><ol><li><p>配置鼠标右键<br>完成上面的操作后，重新打开 Windows Terminal 就会发现模样已经变化了。</p></li><li><p>接下来就是配置鼠标右键了，添加鼠标右键的方式有两种，一种是用脚本，另一种就是改注册表。我本人比较推荐直接使用脚本，毕竟修改注册表有风险。。。</p></li><li>直接使用脚本</li><li><p>脚本下载地址：<a href="https://github.com/lextm/windowsterminal-shell/">https://github.com/lextm/windowsterminal-shell/</a><br>在 .\install.ps1 后面接参数可以定制你要的效果，该仓库提供了三个效果。如果不加参数，则使用默认效果。该仓库有个好处，那就是可以添加一个右键【以管理员身份在此打开】的选项，简便了不少。</p></li><li><p>再次使用管理员模式打开 PowerShell7，然后切换到放 <code>install.ps1</code> 的目录进行安装。我这里使用默认安装。如果你想用其他模式，也可以使用其他模式，看自己心情即可。其他模式请参考项目文档。</p></li></ol><p><img src="https://cdn.nlark.com/yuque/0/2021/png/12488964/1612409052354-fb0c3b7d-ec21-41aa-a5fd-670e37dd21b5.png#align=left&amp;display=inline&amp;height=631&amp;margin=%5Bobject%20Object%5D&amp;originHeight=631&amp;originWidth=1254&amp;size=0&amp;status=done&amp;style=none&amp;width=1254" alt=""><br><img src="https://cdn.nlark.com/yuque/0/2021/png/12488964/1612409052529-27013e70-c1f9-43c7-bc90-8f748c0a8593.png#align=left&amp;display=inline&amp;height=382&amp;margin=%5Bobject%20Object%5D&amp;originHeight=382&amp;originWidth=713&amp;size=0&amp;status=done&amp;style=none&amp;width=713" alt=""></p><ol><li>修改注册表。</li><li>自行百度</li><li>接下来我们到对应目录点击 pwsh 即可呼唤出新版的 powershell。</li></ol>]]></content>
    
    
    <summary type="html">你也想拥有一个美妙的终端吗?看看这篇文章吧</summary>
    
    
    
    <category term="Windows" scheme="https://blog.slqwq.cn/categories/Windows/"/>
    
    <category term="终端" scheme="https://blog.slqwq.cn/categories/Windows/%E7%BB%88%E7%AB%AF/"/>
    
    
    <category term="终端" scheme="https://blog.slqwq.cn/tags/%E7%BB%88%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>Hexo-Butterfly主题魔改</title>
    <link href="https://blog.slqwq.cn/2021/posts/bbr35lia/index.html"/>
    <id>https://blog.slqwq.cn/2021/posts/bbr35lia/index.html</id>
    <published>2021-01-26T20:00:46.000Z</published>
    <updated>2022-05-01T04:30:41.361Z</updated>
    
    <content type="html"><![CDATA[<p>本文章首发于<a href="https://www.yuque.com/ladjeek/ygg4q6">语雀</a>!<br>通过各种高科技功能同步到<a href="https://blog.slqwq.cn">Hajeekn 的博客</a><br><strong>由于每个人的博客目录都不相同，这里博客目录使用%brt%代替</strong><br><strong>本文章除 Pace wowjs 普通引入法以外,其他魔改都不适合 Butterfly3.6.0 及以上</strong></p><h1 id="通过-wowjs-给博客添加好看的样式"><a href="#通过-wowjs-给博客添加好看的样式" class="headerlink" title="通过 wowjs 给博客添加好看的样式"></a>通过 wowjs 给博客添加好看的样式</h1><h2 id="基础样式篇"><a href="#基础样式篇" class="headerlink" title="基础样式篇"></a>基础样式篇</h2><ul><li>1.创建 JS</li></ul><p>前往<code>%brt%\themes\butterfly\source\js\</code><br>新建一个 js,名称为<code>wow-init.js</code><br>其 JS 内部写入如下内容</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">wow = <span class="keyword">new</span> WOW(&#123;</span><br><span class="line">  boxClass: <span class="string">&quot;wow&quot;</span>,</span><br><span class="line">  <span class="comment">// 用户滚动时显示隐藏框的类名称(可以自行配置)</span></span><br><span class="line">  animateClass: <span class="string">&quot;animate__animated&quot;</span>,</span><br><span class="line">  <span class="comment">// 触发 CSS 动画的类名称（动画库默认为&quot;animate.css&quot;库）(可以自行配置)</span></span><br><span class="line">  offset: <span class="number">0</span>,</span><br><span class="line">  <span class="comment">// 定义浏览器视口底部与隐藏框顶部之间的距离。</span></span><br><span class="line">  <span class="comment">// 当用户滚动并到达此距离时，将显示隐藏的框。</span></span><br><span class="line">  <span class="comment">// 可以自行配置</span></span><br><span class="line">  live: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// 在页面上检查新的 wow.js元素。</span></span><br><span class="line">&#125;);</span><br><span class="line">wow.init();</span><br></pre></td></tr></table></figure><p>如果您觉得不想出现注释，也可以删掉注释。</p><ul><li>2.前往<code>%brt%\themes\butterfly\layout\includes\third-party\</code>目录,新建一个名为<code>wow-js.pug</code>的文件</li></ul><p>其文件内部写入如下代码:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">.pjax-reload</span><br><span class="line">  <span class="keyword">if</span> theme.wowjs.animateitem</span><br><span class="line">    each item <span class="keyword">in</span> theme.wowjs.animateitem</span><br><span class="line">      script(<span class="keyword">async</span>).</span><br><span class="line">        var arr = document.getElementsByClassName(<span class="string">&#x27;!&#123;item.class&#125;&#x27;</span>);</span><br><span class="line">        <span class="keyword">for</span>(var i = <span class="number">0</span>;i&lt;arr.length;i++)&#123;</span><br><span class="line">            arr[i].classList.add(<span class="string">&#x27;wow&#x27;</span>);</span><br><span class="line">            arr[i].classList.add(<span class="string">&#x27;!&#123;item.style&#125;&#x27;</span>);</span><br><span class="line">            arr[i].setAttribute(<span class="string">&#x27;data-wow-duration&#x27;</span>, <span class="string">&#x27;!&#123;item.duration&#125;&#x27;</span>);</span><br><span class="line">            arr[i].setAttribute(<span class="string">&#x27;data-wow-delay&#x27;</span>, <span class="string">&#x27;!&#123;item.delay&#125;&#x27;</span>);</span><br><span class="line">            arr[i].setAttribute(<span class="string">&#x27;data-wow-offset&#x27;</span>, <span class="string">&#x27;!&#123;item.offset&#125;&#x27;</span>);</span><br><span class="line">            arr[i].setAttribute(<span class="string">&#x27;data-wow-iteration&#x27;</span>, <span class="string">&#x27;!&#123;item.iteration&#125;&#x27;</span>);</span><br><span class="line">          &#125;</span><br><span class="line">script(defer src=url_for(theme.CDN.wowjs))</span><br><span class="line">script(defer src=url_for(theme.CDN.wowjs_init))</span><br></pre></td></tr></table></figure><ul><li>3.修改<code>%brt%\themes\butterfly\layout\includes\head.pug</code>的内容</li></ul><p>在 //- font 的配置下<br>//- global config 的配置上的空白部分写入以下代码(请直接复制粘贴,避免出现缩进错误 ❌)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;- animate_css</span><br><span class="line">if theme.wowjs.enable</span><br><span class="line">  link(rel&#x3D;&#39;stylesheet&#39; href&#x3D;url_for(theme.CDN.animate_css) media&#x3D;&quot;print&quot; onload&#x3D;&quot;this.media&#x3D;&#39;all&#39;&quot;)</span><br></pre></td></tr></table></figure><ul><li>4.修改<code>%brt&amp;\themes\butterfly\layout\includes\additional-js.pug</code>文件内部的内容</li></ul><p>在 if theme.pjax.enable 配置大项的 baidu-push 小项下写入一下代码(请直接复制粘贴,避免出现缩进错误 ❌)<br>V3.4.0 以下(不包括 3.4.0):<br>将其中的</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;script[data-pjax]&#x27;</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br></pre></td></tr></table></figure><p>删除,并修改为:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;script[data-pjax], .pjax-reload script&quot;</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="built_in">this</span>).parent().append($(<span class="built_in">this</span>).remove());</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>V3.4.0 以上(包括 3.4.0):<br>找到</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;script[data-pjax]&#x27;</span>).forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br></pre></td></tr></table></figure><p>删除它,并写入以下代码(请直接复制粘贴,避免缩进错误 ❌)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span></span><br><span class="line">  .querySelectorAll(<span class="string">&quot;script[data-pjax], .pjax-reload script&quot;</span>)</span><br><span class="line">  .forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> newScript = <span class="built_in">document</span>.createElement(<span class="string">&quot;script&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> content = item.text || item.textContent || item.innerHTML || <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="built_in">Array</span>.from(item.attributes).forEach(<span class="function">(<span class="params">attr</span>) =&gt;</span></span><br><span class="line">      newScript.setAttribute(attr.name, attr.value)</span><br><span class="line">    );</span><br><span class="line">    newScript.appendChild(<span class="built_in">document</span>.createTextNode(content));</span><br><span class="line">    item.parentNode.replaceChild(newScript, item);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><ul><li>5.修改<code>%brt\%config%\_config.butterfly.yml</code>(请将%config%替换为你主题配置文件的位置,如果在根目录请无视)</li></ul><p>找到 CDN 配置项<br>在</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">utils:</span> <span class="string">/js/utils.js</span></span><br></pre></td></tr></table></figure><p>的配置项下添加 wowjs、wowjs-init、animate 的库(请直接复制粘贴以下代码,避免格式缩进导致的错误 ❌)</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">wowjs:</span> <span class="string">https://cdn.jsdelivr.net/gh/graingert/wow@1.3.0/dist/wow.min.js</span></span><br><span class="line"><span class="attr">wowjs_init:</span> <span class="string">/js/wow_init.js</span></span><br><span class="line"><span class="attr">animate_css:</span> <span class="string">https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css</span></span><br></pre></td></tr></table></figure><ul><li>6.修改<code>%brt\%config%\_config.butterfly.yml</code>(请将%config%替换为你主题配置文件的位置,如果在根目录请无视)</li></ul><p>在该配置文件内部添加 wow 的开关，其中 class 和 style 配置为必填项</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">wowjs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#控制动画开关。true是打开，false是关闭</span></span><br><span class="line">  <span class="attr">animateitem:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">recent-post-item</span> <span class="comment">#必填项，需要添加动画的元素的class</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span> <span class="comment">#必填项，需要添加的动画</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">3s</span> <span class="comment">#选填项，动画持续时间，单位可以是ms也可以是s。例如3s，700ms。</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">1s</span> <span class="comment">#选填项，动画开始的延迟时间，单位可以是ms也可以是s。例如3s，700ms。</span></span><br><span class="line">      <span class="attr">offset:</span> <span class="number">100</span> <span class="comment">#选填项，开始动画的距离（相对浏览器底部）</span></span><br><span class="line">      <span class="attr">iteration:</span> <span class="number">2</span> <span class="comment">#选填项，动画重复的次数</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">CoolButton</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span></span><br></pre></td></tr></table></figure><p>运行<code>hexo clean &amp;&amp; hexo g</code>后方可看到效果,更多 animate 动画样式可查看<a href="https://animate.style/">animate 官方文档</a></p><h2 id="浮动样式篇"><a href="#浮动样式篇" class="headerlink" title="浮动样式篇"></a>浮动样式篇</h2><p>浮动样式篇参考<a href="https://akilar.top/">Aklilar</a>大佬的文章<a href="https://akilar.top/posts/9e3bccc6">给博客元素添加浮动特效</a>和<a href="https://blog.zhheo.com/">洪哥</a>的博客效果</p><ul><li>1.前往<code>%brt%\themes\butterfly\source\js\</code>目录,新建一个名为<code>floatpanel.js</code>的文件</li></ul><p>在内部写入以下代码:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ANGLE = <span class="number">45</span>; <span class="comment">//控制浮动角度，数值越大，浮动幅度越大。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> panel = <span class="built_in">document</span>.getElementsByClassName(<span class="string">&quot;wowpanels&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; panel.length; i++) &#123;</span><br><span class="line">  floatable(panel[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">floatable</span>(<span class="params">content</span>) </span>&#123;</span><br><span class="line">  content.addEventListener(<span class="string">&quot;mouseout&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    content.style.transform = <span class="string">`perspective(300px)</span></span><br><span class="line"><span class="string">   rotateX(0deg)</span></span><br><span class="line"><span class="string">   rotateY(0deg)</span></span><br><span class="line"><span class="string">   rotateZ(0deg)`</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">  content.addEventListener(<span class="string">&quot;mousemove&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> w = content.clientWidth;</span><br><span class="line">    <span class="keyword">var</span> h = content.clientHeight;</span><br><span class="line">    <span class="keyword">var</span> y = ((e.offsetX - w * <span class="number">0.5</span>) / w) * ANGLE;</span><br><span class="line">    <span class="keyword">var</span> x = ((<span class="number">1</span> - (e.offsetY - h * <span class="number">0.5</span>)) / h) * ANGLE;</span><br><span class="line"></span><br><span class="line">    content.style.transform = <span class="string">`perspective(300px)</span></span><br><span class="line"><span class="string">   rotateX(<span class="subst">$&#123;x&#125;</span>deg)</span></span><br><span class="line"><span class="string">   rotateY(<span class="subst">$&#123;y&#125;</span>deg)`</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>2.修改<code>%brt\%config%\_config.butterfly.yml</code>(请将%config%替换为你主题配置文件的位置,如果在根目录请无视)</li></ul><p>在 inject 大项的 bottom 小项中添加 script 引入项:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">async</span> <span class="string">data-pjax</span> <span class="string">src=&quot;/js/floatpanel.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><ul><li>3.给你想要特效的类元素添加 wowpanels 属性,修改 floatpanel.js 的代码如下:</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">//</span> <span class="string">新增的内容</span></span><br><span class="line"><span class="string">var</span> <span class="string">arr</span> <span class="string">=</span> <span class="string">document.getElementsByClassName(&#x27;element-class&#x27;);</span></span><br><span class="line"><span class="string">//把element-class替换成你想要添加特效的元素的类名</span></span><br><span class="line"><span class="string">for(var</span> <span class="string">i</span> <span class="string">=</span> <span class="number">0</span><span class="string">;i&lt;arr.length;i++)&#123;</span></span><br><span class="line"><span class="string">arr[i].classList.add(&#x27;wowpanels&#x27;);</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">//</span> <span class="string">原来的内容</span></span><br><span class="line"><span class="string">var</span> <span class="string">ANGLE</span> <span class="string">=</span> <span class="number">45</span><span class="string">;</span> <span class="string">//控制浮动角度，数值越大，浮动幅度越大。</span></span><br><span class="line"><span class="string">var</span> <span class="string">panel=</span> <span class="string">document.getElementsByClassName(&#x27;wowpanels&#x27;);</span></span><br><span class="line"><span class="string">for(var</span> <span class="string">i</span> <span class="string">=</span> <span class="number">0</span><span class="string">;i&lt;panel.length;i++)&#123;</span></span><br><span class="line"><span class="string">floatable(panel[i]);</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">function</span> <span class="string">floatable</span> <span class="string">(content)</span> &#123;</span><br><span class="line"><span class="string">content.addEventListener(&#x27;mouseout&#x27;</span>, <span class="string">e</span> <span class="string">=&gt;</span> &#123;</span><br><span class="line"><span class="string">content.style.transform</span> <span class="string">=</span> <span class="string">`perspective(300px)</span></span><br><span class="line"><span class="string">rotateX(0deg)</span></span><br><span class="line"><span class="string">rotateY(0deg)</span></span><br><span class="line"><span class="string">rotateZ(0deg)`;</span></span><br><span class="line">&#125;<span class="string">);</span></span><br><span class="line"><span class="string">content.addEventListener(&#x27;mousemove&#x27;</span>, <span class="string">e</span> <span class="string">=&gt;</span> &#123;</span><br><span class="line"><span class="string">var</span> <span class="string">w</span> <span class="string">=</span> <span class="string">content.clientWidth;</span></span><br><span class="line"><span class="string">var</span> <span class="string">h</span> <span class="string">=</span> <span class="string">content.clientHeight;</span></span><br><span class="line"><span class="string">var</span> <span class="string">y</span> <span class="string">=</span> <span class="string">(e.offsetX</span> <span class="bullet">-</span> <span class="string">w</span> <span class="string">*</span> <span class="number">0.5</span><span class="string">)</span> <span class="string">/</span> <span class="string">w</span> <span class="string">*</span> <span class="string">ANGLE;</span></span><br><span class="line"><span class="string">var</span> <span class="string">x</span> <span class="string">=</span> <span class="string">(1</span> <span class="bullet">-</span> <span class="string">(e.offsetY</span> <span class="bullet">-</span> <span class="string">h</span> <span class="string">*</span> <span class="number">0.5</span><span class="string">))</span> <span class="string">/</span> <span class="string">h</span> <span class="string">*</span> <span class="string">ANGLE;</span></span><br><span class="line"></span><br><span class="line"><span class="string">content.style.transform</span> <span class="string">=</span> <span class="string">`perspective(300px)</span></span><br><span class="line"><span class="string">rotateX($</span>&#123;<span class="string">x</span>&#125;<span class="string">deg)</span></span><br><span class="line"><span class="string">rotateY($</span>&#123;<span class="string">y</span>&#125;<span class="string">deg)`;</span></span><br><span class="line">&#125;<span class="string">);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em><strong>当你完成了基础样式篇时,其实你可以直接将浮动效果看成一个动画样式</strong></em><br>在之前的配置下直接添加以下配置项:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">class:</span> <span class="comment">#你想要更改的class类名</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">wowpanels</span></span><br></pre></td></tr></table></figure><p>添加完成后 wowjs 的配置项应该与下面的截图类似<br><img src="https://npm.elemecdn.com/wytong-source/photos/PicGo/202204171055304.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=DBS7C&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""><br>如果报错,请检查你的配置缩进是否正确 ✔,这里博主推荐使用微软爸爸出品的 VSC 编辑对于缩进格式邀请很强的文件格式<br>以下代码供您用来参考:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wowjs</span></span><br><span class="line"><span class="attr">wowjs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#控制动画开关。true是打开，false是关闭</span></span><br><span class="line">  <span class="attr">animateitem:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">recent-post-item</span> <span class="comment">#必填项，需要添加动画的元素的class</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span> <span class="comment">#必填项，需要添加的动画</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">3s</span> <span class="comment">#选填项，动画持续时间，单位可以是ms也可以是s。例如3s，700ms。</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="number">0.</span><span class="string">5s</span> <span class="comment">#选填项，动画开始的延迟时间，单位可以是ms也可以是s。例如3s，700ms。</span></span><br><span class="line">      <span class="attr">offset:</span> <span class="number">100</span> <span class="comment">#选填项，开始动画的距离（相对浏览器底部）</span></span><br><span class="line">      <span class="attr">iteration:</span> <span class="number">1</span> <span class="comment">#选填项，动画重复的次数</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">card-widget</span> <span class="comment">#必填项，需要添加动画的元素的class</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomInUp</span> <span class="comment">#必填项，需要添加的动画</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">3s</span> <span class="comment">#选填项，动画持续时间，单位可以是ms也可以是s。例如3s，700ms。</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="number">0.</span><span class="string">5s</span> <span class="comment">#选填项，动画开始的延迟时间，单位可以是ms也可以是s。例如3s，700ms。</span></span><br><span class="line">      <span class="attr">offset:</span> <span class="number">100</span> <span class="comment">#选填项，开始动画的距离（相对浏览器底部）</span></span><br><span class="line">      <span class="attr">iteration:</span> <span class="number">1</span> <span class="comment">#选填项，动画重复的次数</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">layout</span> <span class="string">hide-aside</span> <span class="comment">#必填项，需要添加动画的元素的class</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__flipInY</span> <span class="comment">#必填项，需要添加的动画</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">3s</span> <span class="comment">#选填项，动画持续时间，单位可以是ms也可以是s。例如3s，700ms。</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="number">0.</span><span class="string">5s</span> <span class="comment">#选填项，动画开始的延迟时间，单位可以是ms也可以是s。例如3s，700ms。</span></span><br><span class="line">      <span class="attr">offset:</span> <span class="number">100</span> <span class="comment">#选填项，开始动画的距离（相对浏览器底部）</span></span><br><span class="line">      <span class="attr">iteration:</span> <span class="number">1</span> <span class="comment">#选填项，动画重复的次数</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">CoolButton</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">wowpanels</span></span><br></pre></td></tr></table></figure><p><strong>如果您想让动画更滑丝滑流畅,可以新建 css,在内部写入以下代码:</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wowpanels</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.4s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.39</span>, <span class="number">0.575</span>, <span class="number">0.565</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="添加-BiliBili-同款的动态-Banner"><a href="#添加-BiliBili-同款的动态-Banner" class="headerlink" title="添加 BiliBili 同款的动态 Banner"></a>添加 BiliBili 同款的动态 Banner</h1><p>由于每个人的博客目录都不相同，这里博客目录使用%brt%代替</p><div class="btns"><a href="https://slqwq.lanzous.com/i94DIkvxz6f" title="下载Bilibili的Banner" one-link-mark="yes" data-pjax-state=""><i class="far fa-hand-point-right"></i>下载Bilibili的Banner</a></div><ul><li>1.前往<code>%brt%\themes\butterfly\layout\includes\header\</code>新建一个名为<code>bilibili-banner.pug</code>的文件</li></ul><p>在其内部写入</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!is_home())</span><br><span class="line">  - <span class="keyword">var</span> banner_style = (<span class="keyword">typeof</span>(page.bilibili_banner) != <span class="string">&quot;undefined&quot;</span> &amp;&amp; page.bilibili_banner!=<span class="literal">null</span>) ? page.bilibili_banner : theme.bilibili_banner.style</span><br><span class="line">  <span class="keyword">if</span> (banner_style === <span class="string">&#x27;autumn&#x27;</span>)</span><br><span class="line">    #autumnBanner</span><br><span class="line">      div</span><br><span class="line">        img(src=<span class="string">&#x27;/bilibiliBanner/autumn/bilibili-autumn-1.png&#x27;</span>)</span><br><span class="line">      div</span><br><span class="line">        img(src=<span class="string">&#x27;/bilibiliBanner/autumn/bilibili-autumn-2.png&#x27;</span>)</span><br><span class="line">      div</span><br><span class="line">        img(src=<span class="string">&#x27;/bilibiliBanner/autumn/bilibili-autumn-3.png&#x27;</span>)</span><br><span class="line">      div</span><br><span class="line">        img(src=<span class="string">&#x27;/bilibiliBanner/autumn/bilibili-autumn-4.png&#x27;</span>)</span><br><span class="line">      div</span><br><span class="line">        img(src=<span class="string">&#x27;/bilibiliBanner/autumn/bilibili-autumn-5.png&#x27;</span>)</span><br><span class="line">      div</span><br><span class="line">        img(src=<span class="string">&#x27;/bilibiliBanner/autumn/bilibili-autumn-6.png&#x27;</span>)</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (banner_style === <span class="string">&#x27;winter&#x27;</span>)</span><br><span class="line">    #winterBanner</span><br><span class="line">      .view</span><br><span class="line">        img.morning(src=<span class="string">&#x27;/bilibiliBanner/winter/bilibili-winter-view-1.png&#x27;</span> alt=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        img.afternoon(src=<span class="string">&#x27;/bilibiliBanner/winter/bilibili-winter-view-2.png&#x27;</span> alt=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        video.evening(autoplay=<span class="string">&#x27;&#x27;</span> loop=<span class="string">&#x27;&#x27;</span> muted=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">          source(src=<span class="string">&#x27;/bilibiliBanner/winter/bilibili-winter-view-3.webm&#x27;</span> type=<span class="string">&#x27;video/webm&#x27;</span>)</span><br><span class="line">        img.window-cover(src=<span class="string">&#x27;/bilibiliBanner/winter/bilibili-winter-view-3-snow.png&#x27;</span> alt=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">      .tree</span><br><span class="line">        img.morning(src=<span class="string">&#x27;/bilibiliBanner/winter/bilibili-winter-tree-1.png&#x27;</span> alt=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        img.afternoon(src=<span class="string">&#x27;/bilibiliBanner/winter/bilibili-winter-tree-2.png&#x27;</span> alt=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        img.evening(src=<span class="string">&#x27;/bilibiliBanner/winter/bilibili-winter-tree-3.png&#x27;</span> alt=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  script(<span class="keyword">async</span> data-pjax src=url_for(theme.CDN.bilibili_banner))</span><br></pre></td></tr></table></figure><ul><li>2.前往<code>%brt%\themes\butterfly\source\css\</code>新建一个名为<code>bilibiliBanner.css</code>的文件</li></ul><p>在其内部写入以下代码:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* autumnBanner */</span></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width:</span> <span class="number">1000px</span>) &#123;</span><br><span class="line">  <span class="selector-id">#autumnBanner</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#autumnBanner</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">filter</span>: <span class="built_in">brightness</span>(<span class="number">70%</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#autumnBanner</span> &gt; <span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">--offset</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">--blur</span>: <span class="number">2px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#autumnBanner</span> &gt; <span class="selector-tag">div</span> &gt; <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">110%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">object-fit</span>: cover;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translatex</span>(var(--offset));</span><br><span class="line">  <span class="attribute">filter</span>: <span class="built_in">blur</span>(var(--blur));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* winterBanner */</span></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width:</span> <span class="number">1000px</span>) &#123;</span><br><span class="line">  <span class="selector-id">#winterBanner</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#winterBanner</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">--percentage</span>: <span class="number">0.5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#winterBanner</span> <span class="selector-class">.view</span>,</span><br><span class="line"><span class="selector-id">#winterBanner</span> <span class="selector-class">.tree</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#winterBanner</span> <span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-id">#winterBanner</span> <span class="selector-tag">video</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">120%</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">120%</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">object-fit</span>: cover;</span><br><span class="line">  <span class="attribute">filter</span>: <span class="built_in">brightness</span>(<span class="number">70%</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#winterBanner</span> <span class="selector-class">.morning</span> &#123;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">20</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="built_in">calc</span>(<span class="number">1</span> - (var(--percentage) - <span class="number">0.25</span>) / <span class="number">0.25</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#winterBanner</span> <span class="selector-class">.afternoon</span> &#123;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">10</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="built_in">calc</span>(<span class="number">1</span> - (var(--percentage) - <span class="number">0.5</span>) / <span class="number">0.5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#winterBanner</span> <span class="selector-class">.view</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translatex</span>(calc(var(--percentage) * <span class="number">100px</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#winterBanner</span> <span class="selector-class">.tree</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translatex</span>(calc(var(--percentage) * <span class="number">50px</span>));</span><br><span class="line">  <span class="attribute">filter</span>: <span class="built_in">blur</span>(<span class="number">3px</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#winterBanner</span> <span class="selector-class">.view</span>,</span><br><span class="line"><span class="selector-id">#winterBanner</span> <span class="selector-class">.tree</span>,</span><br><span class="line"><span class="selector-id">#winterBanner</span> <span class="selector-class">.morning</span>,</span><br><span class="line"><span class="selector-id">#winterBanner</span> <span class="selector-class">.afternoon</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.2s</span> all ease-in;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#winterBanner</span><span class="selector-class">.moving</span> <span class="selector-class">.view</span>,</span><br><span class="line"><span class="selector-id">#winterBanner</span><span class="selector-class">.moving</span> <span class="selector-class">.tree</span>,</span><br><span class="line"><span class="selector-id">#winterBanner</span><span class="selector-class">.moving</span> <span class="selector-class">.morning</span>,</span><br><span class="line"><span class="selector-id">#winterBanner</span><span class="selector-class">.moving</span> <span class="selector-class">.afternoon</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#winterBanner</span> <span class="selector-class">.window-cover</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="built_in">calc</span>((var(--percentage) - <span class="number">0.9</span>) / <span class="number">0.1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>3.前往<code>%brt%\themes\butterfly\source\js\</code>新建一个名为<code>bilibili-banner.js</code>的文件</li></ul><p>在其内部写入以下代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//autumn_banner</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> autumnBanner = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#autumnBanner&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (autumnBanner) &#123;</span><br><span class="line">  <span class="keyword">var</span> images = <span class="built_in">document</span>.querySelectorAll(<span class="string">&quot;#autumnBanner &gt; div &gt; img&quot;</span>);</span><br><span class="line">  autumnBanner.addEventListener(<span class="string">&quot;mousemove&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> percentage = e.clientX / <span class="built_in">window</span>.outerWidth;</span><br><span class="line">    <span class="keyword">let</span> offset = <span class="number">10</span> * percentage;</span><br><span class="line">    <span class="keyword">let</span> blur = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> [index, image] <span class="keyword">of</span> images.entries()) &#123;</span><br><span class="line">      offset *= <span class="number">1.3</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> blurValue = <span class="built_in">Math</span>.pow(index / images.length - percentage, <span class="number">2</span>) * blur;</span><br><span class="line"></span><br><span class="line">      image.style.setProperty(<span class="string">&quot;--offset&quot;</span>, <span class="string">`<span class="subst">$&#123;offset&#125;</span>px`</span>);</span><br><span class="line">      image.style.setProperty(<span class="string">&quot;--blur&quot;</span>, <span class="string">`<span class="subst">$&#123;blurValue&#125;</span>px`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//winter_banner</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> winterBanner = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#winterBanner&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (winterBanner) &#123;</span><br><span class="line">  <span class="keyword">var</span> startingPoint;</span><br><span class="line">  winterBanner.addEventListener(<span class="string">&quot;mouseenter&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    startingPoint = e.clientX;</span><br><span class="line">    winterBanner.classList.add(<span class="string">&quot;moving&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  winterBanner.addEventListener(<span class="string">&quot;mouseout&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    winterBanner.classList.remove(<span class="string">&quot;moving&quot;</span>);</span><br><span class="line">    winterBanner.style.setProperty(<span class="string">&quot;--percentage&quot;</span>, <span class="number">0.5</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  winterBanner.addEventListener(<span class="string">&quot;mousemove&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> percentage = (e.clientX - startingPoint) / <span class="built_in">window</span>.outerWidth + <span class="number">0.5</span>;</span><br><span class="line"></span><br><span class="line">    winterBanner.style.setProperty(<span class="string">&quot;--percentage&quot;</span>, percentage);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>4.在主题的 source 文件夹下新建<code>bilibiliBanner</code>文件夹,将我所提供的资源解压,直接放入进去(里面一定只有两个目录)</li><li>5.进入<code>%brt%\themes\butterfly\layout\includes\header\</code>文件夹,找到<code>index.pug</code>在内部注入 bilibili_banner 组件</li></ul><p>在 include ./nav.pug 配置下 if is_post()配置上添加以下配置(请直接复制粘贴,避免代码缩进导致的错误 ❌)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- <span class="keyword">var</span> bilibili_banner = (<span class="keyword">typeof</span>(page.bilibili_banner) != <span class="string">&quot;undefined&quot;</span> &amp;&amp; page.bilibili_banner!=<span class="literal">null</span>) ? page.bilibili_banner : theme.bilibili_banner.enable</span><br><span class="line"><span class="keyword">if</span> (bilibili_banner)</span><br><span class="line">  include ./bilibili-banner.pug</span><br></pre></td></tr></table></figure><ul><li>6.修改<code>%brt\%config%\_config.butterfly.yml</code>(请将%config%替换为你主题配置文件的位置,如果在根目录请无视)</li></ul><p>找到 CDN 配置,在 utils: /js/utils.js 配置的后面添加以下配置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">bilibili_banner:</span> <span class="string">/js/bilibili-banner.js</span></span><br></pre></td></tr></table></figure><ul><li><em><strong>添加  </strong></em><code>_**css**_</code><em><strong>  配置项。此处使用了异步加载，同时做了媒体选择，对手机是不会生效的。因为手机的  </strong></em><code>_**banner**_</code><em><strong>  高度会导致适配效果很差。</strong></em></li></ul><p>我们找到 inject 配置大项的 head 小项,在其内部添加以下配置:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/bilibiliBanner.css&quot;</span>  <span class="string">media=&quot;defer&quot;</span> <span class="string">onload=&quot;this.media=&#x27;screen&#x27;&quot;&gt;</span></span><br></pre></td></tr></table></figure><ul><li>7.添加控制开关</li></ul><p>在 butterfly 主题配置中添加以下配置:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># banner样式</span></span><br><span class="line"><span class="attr">bilibili_banner:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 开关banner</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">winter</span> <span class="comment"># autumn 秋季样式 ；winter 冬季样式</span></span><br></pre></td></tr></table></figure><ul><li>除了在主题配置文件通过配置  <code>bilibili_banner:</code>  的默认项，还可以在每个页面的  <code>markdown</code>  文件中通过  <code>front-matter</code>  控制单页配置。提供了<strong>三个选项</strong>：</li><li><code>false</code> ：  关闭该页面的动态 <code>banner</code> 显示</li><li><code>autumn</code> ：  开启该页面的动态 <code>banner</code>，并设置主题为秋季</li><li><code>winter</code> ：  开启该页面的动态 <code>banner</code>，并设置主题为冬季<br>页面配置项优先级高于主题配置</li></ul><h1 id="悬停左上角时在网站顶部中间位置会出现描述"><a href="#悬停左上角时在网站顶部中间位置会出现描述" class="headerlink" title="悬停左上角时在网站顶部中间位置会出现描述"></a>悬停左上角时在网站顶部中间位置会出现描述</h1><ul><li>1.进入<code>%brt%\themes\butterfly\layout\includes\header\</code>修改名为<code>nav.pug</code>的文件</li></ul><p>找到</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">span#blog_name</span><br><span class="line">a#site-name(href=url_for(<span class="string">&#x27;/&#x27;</span>)) #[=config.title]</span><br></pre></td></tr></table></figure><p>将它们删除,并替换为以下代码(请直接复制粘贴,避免缩进错误 ❌):</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">- <span class="keyword">var</span> pagedescr = (<span class="keyword">typeof</span>(page.description) != <span class="string">&quot;undefined&quot;</span> &amp;&amp; page.description!=<span class="literal">null</span>) ? page.description : <span class="string">&#x27;欢迎您来到了Hajeekn的小木屋呢,不过看起来有点漏水🐕&#x27;</span></span><br><span class="line">  <span class="keyword">if</span> is_post()</span><br><span class="line">    span#blog_name</span><br><span class="line">      a#site-name(onclick=<span class="string">&#x27;btf.scrollToDest(0,500)&#x27;</span> data-title=pagedescr) #[=config.title]</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> is_page()</span><br><span class="line">    span#blog_name</span><br><span class="line">      a#site-name(href=url_for(<span class="string">&#x27;/&#x27;</span>) data-title=pagedescr) #[=page.title]</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    span#blog_name</span><br><span class="line">      a#site-name(href=url_for(<span class="string">&#x27;/&#x27;</span>) data-title=pagedescr) #[=config.title]</span><br></pre></td></tr></table></figure><ul><li>2.因为  <code>hexo</code>  自带缓存的关系，如果我们用的是缓存式引入的话，<code>nav</code>  的刷新是惰性的，我们需要它根据文章和页面的切换实时变动。所以需要改动一下引入逻辑。打开<code>%brt%\themes\butterfly\layout\includes\header\index.pug</code></li></ul><p>找到</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!=partial(<span class="string">&#x27;includes/header/nav&#x27;</span>, &#123;&#125;, &#123;<span class="attr">cache</span>:theme.fragment_cache&#125;)</span><br></pre></td></tr></table></figure><p>删除,并将它修改为以下代码(请直接复制粘贴,避免缩进错误 ❌):</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">include ./nav.pug</span><br><span class="line"><span class="keyword">if</span> top_img !== <span class="literal">false</span></span><br><span class="line">  <span class="keyword">if</span> is_post()</span><br><span class="line">    include ./post-info.pug</span><br></pre></td></tr></table></figure><p>(如果您添加了 BiliBili 动态 banner,请将它放置在在 if is_post()的前面 if top_img !== false 的后面,避免报错)</p><ul><li>3.进入<code>%brt%\themes\butterfly\source\css\_layout\</code>新建_custom.styl</li></ul><p>在其内部输入以下代码(请直接复制粘贴,避免缩进错误 ❌):</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*标题悬停显示文章描述*/</span></span><br><span class="line"><span class="selector-id">#site-name</span></span><br><span class="line">  &amp;<span class="selector-pseudo">:hover</span></span><br><span class="line">    &amp;<span class="selector-pseudo">:before</span></span><br><span class="line">      <span class="selector-tag">position</span>: <span class="selector-tag">fixed</span></span><br><span class="line">      <span class="selector-tag">width</span><span class="selector-pseudo">:fit-content</span></span><br><span class="line">      <span class="selector-tag">margin</span><span class="selector-pseudo">:auto</span></span><br><span class="line">      <span class="selector-tag">left</span><span class="selector-pseudo">:0</span>;</span><br><span class="line">      <span class="selector-tag">right</span><span class="selector-pseudo">:0</span></span><br><span class="line">      <span class="selector-tag">top</span><span class="selector-pseudo">:10</span>%</span><br><span class="line">      <span class="selector-tag">border-radius</span>: 10<span class="selector-tag">px</span></span><br><span class="line">      <span class="selector-tag">text-align</span>: <span class="selector-tag">center</span></span><br><span class="line">      <span class="selector-tag">z-index</span>: 100</span><br><span class="line">      <span class="selector-tag">content</span>: <span class="selector-tag">attr</span>(<span class="selector-tag">data-title</span>)</span><br><span class="line">      <span class="selector-tag">font-size</span>: 20<span class="selector-tag">px</span></span><br><span class="line">      <span class="selector-tag">color</span>: <span class="selector-id">#fff</span></span><br><span class="line">      <span class="selector-tag">padding</span>: 10<span class="selector-tag">px</span></span><br><span class="line">      <span class="selector-tag">background-color</span>: <span class="selector-tag">rgba</span>(<span class="selector-id">#49B1F5</span>,0.9)</span><br><span class="line"><span class="comment">/* 夜间模式适配 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span></span><br><span class="line">  <span class="selector-tag">a</span><span class="selector-id">#site-name</span></span><br><span class="line">    &amp;<span class="selector-pseudo">:hover</span></span><br><span class="line">      &amp;<span class="selector-pseudo">:before</span></span><br><span class="line">        <span class="selector-tag">background-color</span>: <span class="selector-tag">rgba</span>(<span class="selector-id">#121212</span>,0.8)</span><br><span class="line"><span class="comment">/*标题超过隐藏并显示省略号*/</span></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width:</span> <span class="number">768px</span>)</span><br><span class="line">  a#site-name</span><br><span class="line">    -webkit-line-clamp <span class="number">1</span></span><br><span class="line">    word-break break-all</span><br><span class="line">    display -webkit-box</span><br><span class="line">    -webkit-box-orient vertical</span><br><span class="line">    overflow hidden</span><br></pre></td></tr></table></figure><h1 id="主页置顶的-♂gitcalendar♂"><a href="#主页置顶的-♂gitcalendar♂" class="headerlink" title="主页置顶的 ♂gitcalendar♂"></a>主页置顶的 ♂gitcalendar♂</h1><p>哪个男孩纸不想拥有一个状态显示呢?<br>这个模块就会教大家在 Butterfly 使用 gitcalendar</p><h2 id="准备好了吗-Go-Go"><a href="#准备好了吗-Go-Go" class="headerlink" title="准备好了吗?Go Go!"></a>准备好了吗?Go Go!</h2><ul><li>1.前往<code>%brt\themes\butterfly\layout\includes\</code>新建一个名为<code>gitcalendar.pug</code>的文件</li></ul><p>在其内部添加以下代码(请直接复制粘贴,避免缩进错误 ❌):</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">#gitcalendar.gitcalendar</span><br><span class="line">  #gitmessage(:style=<span class="string">&#x27;&#123;top:y+px,left:x+px,position: fixed,zIndex:9999&#125;&#x27;</span>)</span><br><span class="line">    .angle-wrapper</span><br><span class="line">      span &#123;&#123;span1&#125;&#125; &amp;nbsp;</span><br><span class="line">      span &#123;&#123;span2&#125;&#125; 次上传</span><br><span class="line">  .position-relative</span><br><span class="line">    .border.py-<span class="number">2.</span>graph-before-activity-overview</span><br><span class="line">      .js-gitcalendar-graph.mx-md-<span class="number">2.</span>mx-<span class="number">3.</span>d-flex.flex-column.flex-items-end.flex-xl-items-center.overflow-hidden.pt-<span class="number">1.</span>is-graph-loading.graph-canvas.gitcalendar-graph.height-full.text-center</span><br><span class="line">        #gitcalendarcanvasbox(v-<span class="keyword">if</span>=<span class="string">&#x27;simplemode&#x27;</span>)</span><br><span class="line">          canvas#gitcanvas(style=<span class="string">&#x27;animation: none;&#x27;</span>)</span><br><span class="line">        svg.js-gitcalendar-graph-svg(width=<span class="string">&#x27;100%&#x27;</span>, viewBox=<span class="string">&#x27;0 0 770 128&#x27;</span>, v-<span class="keyword">if</span>=<span class="string">&#x27;!simplemode&#x27;</span>)</span><br><span class="line">          text.month(:x=<span class="string">&#x27;32 + monthindex*64&#x27;</span>, y=<span class="string">&#x27;20&#x27;</span>, v-<span class="keyword">for</span>=<span class="string">&#x27;(month,monthindex) in monthchange&#x27;</span>) &#123;&#123;month&#125;&#125;</span><br><span class="line">          text.wday(text-anchor=<span class="string">&#x27;start&#x27;</span>, dx=<span class="string">&#x27;0&#x27;</span>, dy=<span class="string">&#x27;40&#x27;</span>)  日</span><br><span class="line">          text.wday(text-anchor=<span class="string">&#x27;start&#x27;</span>, dx=<span class="string">&#x27;0&#x27;</span>, dy=<span class="string">&#x27;65&#x27;</span>)  二</span><br><span class="line">          text.wday(text-anchor=<span class="string">&#x27;start&#x27;</span>, dx=<span class="string">&#x27;0&#x27;</span>, dy=<span class="string">&#x27;90&#x27;</span>)  四</span><br><span class="line">          text.wday(text-anchor=<span class="string">&#x27;start&#x27;</span>, dx=<span class="string">&#x27;0&#x27;</span>, dy=<span class="string">&#x27;115&#x27;</span>) 六</span><br><span class="line">          g(v-<span class="keyword">for</span>=<span class="string">&#x27;(weekitem,weekIndex) in data&#x27;</span>, :transform=<span class="string">&#x27;\&#x27;translate(\&#x27;+ (16 + weekIndex*14) + \&#x27;,\&#x27; + \&#x27;0)\&#x27;&#x27;</span>)</span><br><span class="line">            rect(@mouseover=<span class="string">&quot;selectStyle(dayitem,$event)&quot;</span>  @mouseleave=<span class="string">&quot;outStyle()&quot;</span> v-<span class="keyword">for</span>=<span class="string">&#x27;(dayitem,dayIndex) in weekitem&#x27;</span>, :style=<span class="string">&#x27;&#123;fill:thiscolor(dayitem.count),shapeRendering:crispedges&#125;&#x27;</span>, :data-score=<span class="string">&#x27;dayitem.count&#x27;</span>, :data-date=<span class="string">&#x27;dayitem.date&#x27;</span>, x=<span class="string">&#x27;0&#x27;</span>, :y=<span class="string">&#x27; 30 + dayIndex*13 &#x27;</span>, width=<span class="string">&#x27;11&#x27;</span>, height=<span class="string">&#x27;11&#x27;</span>)</span><br><span class="line">      .contrib-footer.clearfix.mt-<span class="number">1.</span>mx-<span class="number">3.</span>px-<span class="number">3.</span>pb-<span class="number">1</span></span><br><span class="line">        .float-left.text-gray</span><br><span class="line">          | 数据来源</span><br><span class="line">          a(:href=<span class="string">&quot;&#x27;https://github.com/&#x27;+ user &quot;</span>, target=<span class="string">&#x27;blank&#x27;</span>) @&#123;&#123;user&#125;&#125;</span><br><span class="line">        .contrib-legend.text-gray</span><br><span class="line">          | Less</span><br><span class="line"></span><br><span class="line">          ul.legend</span><br><span class="line">            li(:style=<span class="string">&#x27;&#123;backgroundColor:color[0]&#125;&#x27;</span>)</span><br><span class="line">            li(:style=<span class="string">&#x27;&#123;backgroundColor:color[2]&#125;&#x27;</span>)</span><br><span class="line">            li(:style=<span class="string">&#x27;&#123;backgroundColor:color[4]&#125;&#x27;</span>)</span><br><span class="line">            li(:style=<span class="string">&#x27;&#123;backgroundColor:color[6]&#125;&#x27;</span>)</span><br><span class="line">            li(:style=<span class="string">&#x27;&#123;backgroundColor:color[8]&#125;&#x27;</span>)</span><br><span class="line">          | More</span><br><span class="line"></span><br><span class="line">  .contrib-column.contrib-column-first.table-column</span><br><span class="line">    span.text-muted 过去一年提交</span><br><span class="line">    span.contrib-number &#123;&#123;total&#125;&#125;</span><br><span class="line">    span.text-muted &#123;&#123;oneyearbeforeday&#125;&#125;&amp;nbsp;-&amp;nbsp;&#123;&#123;thisday&#125;&#125;</span><br><span class="line">  .contrib-column.table-column</span><br><span class="line">    span.text-muted 最近一月提交</span><br><span class="line">    span.contrib-number &#123;&#123;thisweekdatacore&#125;&#125;</span><br><span class="line">    span.text-muted &#123;&#123;amonthago&#125;&#125;&amp;nbsp;-&amp;nbsp;&#123;&#123;thisday&#125;&#125;</span><br><span class="line">  .contrib-column.table-column</span><br><span class="line">    span.text-muted 最近一周提交</span><br><span class="line">    span.contrib-number &#123;&#123;weekdatacore&#125;&#125;</span><br><span class="line">    span.text-muted &#123;&#123;aweekago&#125;&#125;&amp;nbsp;-&amp;nbsp;&#123;&#123;thisday&#125;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>2.继续在这个目录下新建一个名为<code>gitcalendar-js.pug</code>的文件</li></ul><p>在内部写入以下代码(请直接复制粘贴,避免缩进错误 ❌):</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br></pre></td><td class="code"><pre><span class="line">script.</span><br><span class="line">  <span class="keyword">var</span> gitcalendar = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">&#x27;#gitcalendar&#x27;</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line">      simplemode: !&#123;theme.gitcalendar.simplemode&#125;,</span><br><span class="line">      user: <span class="string">&#x27;!&#123;theme.gitcalendar.user&#125;&#x27;</span>,</span><br><span class="line">      fixed: <span class="string">&#x27;fixed&#x27;</span>,</span><br><span class="line">      px: <span class="string">&#x27;px&#x27;</span>,</span><br><span class="line">      x: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      y: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      span1: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      span2: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      month: [<span class="string">&#x27;一月&#x27;</span>, <span class="string">&#x27;二月&#x27;</span>, <span class="string">&#x27;三月&#x27;</span>, <span class="string">&#x27;四月&#x27;</span>, <span class="string">&#x27;五月&#x27;</span>, <span class="string">&#x27;六月&#x27;</span>, <span class="string">&#x27;七月&#x27;</span>, <span class="string">&#x27;八月&#x27;</span>, <span class="string">&#x27;九月&#x27;</span>, <span class="string">&#x27;十月&#x27;</span>, <span class="string">&#x27;十一月&#x27;</span>, <span class="string">&#x27;十二月&#x27;</span>],</span><br><span class="line">      monthchange: [],</span><br><span class="line">      oneyearbeforeday: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      thisday: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      amonthago: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      aweekago: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      weekdatacore: <span class="number">0</span>,</span><br><span class="line">      datacore: <span class="number">0</span>,</span><br><span class="line">      total: <span class="number">0</span>,</span><br><span class="line">      datadate: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      data: [],</span><br><span class="line">      positionplusdata: [],</span><br><span class="line">      firstweek: [],</span><br><span class="line">      lastweek: [],</span><br><span class="line">      beforeweek: [],</span><br><span class="line">      thisweekdatacore: <span class="number">0</span>,</span><br><span class="line">      mounthbeforeday: <span class="number">0</span>,</span><br><span class="line">      mounthfirstindex: <span class="number">0</span>,</span><br><span class="line">      crispedges: <span class="string">&#x27;crispedges&#x27;</span>,</span><br><span class="line">      thisdayindex: <span class="number">0</span>,</span><br><span class="line">      amonthagoindex: <span class="number">0</span>,</span><br><span class="line">      amonthagoweek: [],</span><br><span class="line">      firstdate: [],</span><br><span class="line">      first2date: [],</span><br><span class="line">      montharrbefore: [],</span><br><span class="line">      monthindex: <span class="number">0</span>,</span><br><span class="line">      color: !&#123;theme.gitcalendar.color&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      <span class="function"><span class="title">selectStyle</span>(<span class="params">data, event</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.angle-wrapper&#x27;</span>).style.display = <span class="string">&#x27;block&#x27;</span></span><br><span class="line">        <span class="built_in">this</span>.span1 = data.date;</span><br><span class="line">        <span class="built_in">this</span>.span2 = data.count;</span><br><span class="line">        <span class="built_in">this</span>.x = event.clientX - <span class="number">100</span>;</span><br><span class="line">        <span class="built_in">this</span>.y = event.clientY - <span class="number">60</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function"><span class="title">outStyle</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.angle-wrapper&#x27;</span>).style.display = <span class="string">&#x27;none&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function"><span class="title">thiscolor</span>(<span class="params">x</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (x === <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="keyword">let</span> i = <span class="built_in">parseInt</span>(x / <span class="number">2</span>);</span><br><span class="line">          <span class="keyword">return</span> <span class="built_in">this</span>.color[<span class="number">0</span>]</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (x &lt; <span class="number">2</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="built_in">this</span>.color[<span class="number">1</span>]</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (x &lt; <span class="number">20</span>) &#123;</span><br><span class="line">          <span class="keyword">let</span> i = <span class="built_in">parseInt</span>(x / <span class="number">2</span>);</span><br><span class="line">          <span class="keyword">return</span> <span class="built_in">this</span>.color[i]</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="built_in">this</span>.color[<span class="number">9</span>]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">var</span> apiurl = <span class="string">&#x27;!&#123;theme.gitcalendar.apiurl&#125;&#x27;</span> ? <span class="string">&#x27;https://!&#123;theme.gitcalendar.apiurl&#125;/api?&#x27;</span> : <span class="string">&#x27;https://githubapi.ryanchristian.dev/user/&#x27;</span></span><br><span class="line">  <span class="keyword">var</span> githubapiurl = apiurl + gitcalendar.user;</span><br><span class="line">  <span class="comment">//canvas绘图</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">responsiveChart</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> c = <span class="built_in">document</span>.getElementById(<span class="string">&quot;gitcanvas&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (c) &#123;</span><br><span class="line">      <span class="keyword">let</span> cmessage = <span class="built_in">document</span>.getElementById(<span class="string">&quot;gitmessage&quot;</span>);</span><br><span class="line">      <span class="keyword">let</span> ctx = c.getContext(<span class="string">&quot;2d&quot;</span>);</span><br><span class="line">      c.width = <span class="built_in">document</span>.getElementById(<span class="string">&quot;gitcalendarcanvasbox&quot;</span>).offsetWidth;</span><br><span class="line">      <span class="keyword">let</span> linemaxwitdh = <span class="number">0.96</span> * c.width / gitcalendar.data.length;</span><br><span class="line">      c.height = <span class="number">9</span> * linemaxwitdh;</span><br><span class="line">      <span class="keyword">let</span> lineminwitdh = <span class="number">0.8</span> * linemaxwitdh;</span><br><span class="line">      <span class="keyword">let</span> setposition = &#123;</span><br><span class="line">        x: <span class="number">0.02</span> * c.width,</span><br><span class="line">        y: <span class="number">0.025</span> * c.width</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> week <span class="keyword">in</span> gitcalendar.data) &#123;</span><br><span class="line">        weekdata = gitcalendar.data[week];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> day <span class="keyword">in</span> weekdata) &#123;</span><br><span class="line">          <span class="keyword">let</span> dataitem = &#123;</span><br><span class="line">            date: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            count: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            x: <span class="number">0</span>,</span><br><span class="line">            y: <span class="number">0</span></span><br><span class="line">          &#125;;</span><br><span class="line">          gitcalendar.positionplusdata.push(dataitem);</span><br><span class="line">          ctx.fillStyle = gitcalendar.thiscolor(weekdata[day].count);</span><br><span class="line">          setposition.y = <span class="built_in">Math</span>.round(setposition.y * <span class="number">100</span>) / <span class="number">100</span>;</span><br><span class="line">          dataitem.date = weekdata[day].date;</span><br><span class="line">          dataitem.count = weekdata[day].count;</span><br><span class="line">          dataitem.x = setposition.x;</span><br><span class="line">          dataitem.y = setposition.y;</span><br><span class="line">          ctx.fillRect(setposition.x, setposition.y, lineminwitdh, lineminwitdh);</span><br><span class="line">          setposition.y = setposition.y + linemaxwitdh</span><br><span class="line">        &#125;;</span><br><span class="line">        setposition.y = <span class="number">0.025</span> * c.width;</span><br><span class="line">        setposition.x = setposition.x + linemaxwitdh</span><br><span class="line">      &#125;;</span><br><span class="line">      ctx.font = <span class="string">&quot;600  Arial&quot;</span>;</span><br><span class="line">      ctx.fillStyle = <span class="string">&#x27;#aaa&#x27;</span>;</span><br><span class="line">      ctx.fillText(<span class="string">&quot;日&quot;</span>, <span class="number">0</span>, <span class="number">1.9</span> * linemaxwitdh);</span><br><span class="line">      ctx.fillText(<span class="string">&quot;二&quot;</span>, <span class="number">0</span>, <span class="number">3.9</span> * linemaxwitdh);</span><br><span class="line">      ctx.fillText(<span class="string">&quot;四&quot;</span>, <span class="number">0</span>, <span class="number">5.9</span> * linemaxwitdh);</span><br><span class="line">      ctx.fillText(<span class="string">&quot;六&quot;</span>, <span class="number">0</span>, <span class="number">7.9</span> * linemaxwitdh);</span><br><span class="line">      <span class="keyword">let</span> monthindexlist = c.width / <span class="number">24</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> index <span class="keyword">in</span> gitcalendar.monthchange) &#123;</span><br><span class="line">        ctx.fillText(gitcalendar.monthchange[index], monthindexlist, <span class="number">0.7</span> * linemaxwitdh);</span><br><span class="line">        monthindexlist = monthindexlist + c.width / <span class="number">12</span></span><br><span class="line">      &#125;;</span><br><span class="line">      cmessage.onmousemove = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.angle-wrapper&#x27;</span>).style.display = <span class="string">&#x27;none&#x27;</span></span><br><span class="line">      &#125;;</span><br><span class="line">      c.onmousemove = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.angle-wrapper&#x27;</span>).style.display = <span class="string">&#x27;none&#x27;</span></span><br><span class="line">        getMousePos(c, event);</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">getMousePos</span>(<span class="params">canvas, event</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> rect = canvas.getBoundingClientRect();</span><br><span class="line">        <span class="keyword">var</span> x = event.clientX - rect.left * (canvas.width / rect.width);</span><br><span class="line">        <span class="keyword">var</span> y = event.clientY - rect.top * (canvas.height / rect.height);</span><br><span class="line">        <span class="comment">//console.log(&quot;x:&quot;+x+&quot;,y:&quot;+y);</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> gitcalendar.positionplusdata) &#123;</span><br><span class="line">          <span class="keyword">let</span> lenthx = x - item.x;</span><br><span class="line">          <span class="keyword">let</span> lenthy = y - item.y;</span><br><span class="line">          <span class="comment">//console.log(lenthx,lenthy);</span></span><br><span class="line">          <span class="keyword">if</span> (<span class="number">0</span> &lt; lenthx &amp;&amp; lenthx &lt; lineminwitdh) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="number">0</span> &lt; lenthy &amp;&amp; lenthy &lt; lineminwitdh) &#123;</span><br><span class="line">              <span class="comment">//console.log(item.date,item.count)</span></span><br><span class="line">              <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.angle-wrapper&#x27;</span>).style.display = <span class="string">&#x27;block&#x27;</span></span><br><span class="line">              gitcalendar.span1 = item.date;</span><br><span class="line">              gitcalendar.span2 = item.count;</span><br><span class="line">              gitcalendar.x = event.clientX - <span class="number">100</span>;</span><br><span class="line">              gitcalendar.y = event.clientY - <span class="number">60</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">//if(0&lt; x - item.x &lt;lineminwitdh&amp;&amp;0&lt; y - item.y &lt;lineminwitdh)&#123;</span></span><br><span class="line">          <span class="comment">//console.log(item.count,item.date);</span></span><br><span class="line">          <span class="comment">//&#125;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//数据统计算法</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">addlastmonth</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (gitcalendar.thisdayindex === <span class="number">0</span>) &#123;</span><br><span class="line">      thisweekcore(<span class="number">52</span>);</span><br><span class="line">      thisweekcore(<span class="number">51</span>);</span><br><span class="line">      thisweekcore(<span class="number">50</span>);</span><br><span class="line">      thisweekcore(<span class="number">49</span>);</span><br><span class="line">      thisweekcore(<span class="number">48</span>);</span><br><span class="line">      gitcalendar.thisweekdatacore += gitcalendar.firstdate[<span class="number">6</span>].count;</span><br><span class="line">      gitcalendar.amonthago = gitcalendar.firstdate[<span class="number">6</span>].date</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      thisweekcore(<span class="number">52</span>);</span><br><span class="line">      thisweekcore(<span class="number">51</span>);</span><br><span class="line">      thisweekcore(<span class="number">50</span>);</span><br><span class="line">      thisweekcore(<span class="number">49</span>);</span><br><span class="line">      thisweek2core();</span><br><span class="line">      gitcalendar.amonthago = gitcalendar.first2date[gitcalendar.thisdayindex - <span class="number">1</span>].date</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">thisweek2core</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = gitcalendar.thisdayindex - <span class="number">1</span>; i &lt; gitcalendar.first2date.length; i++) &#123;</span><br><span class="line">      gitcalendar.thisweekdatacore += gitcalendar.first2date[i].count</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">thisweekcore</span>(<span class="params">index</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> gitcalendar.data[index]) &#123;</span><br><span class="line">      gitcalendar.thisweekdatacore += item.count</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">addlastweek</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> gitcalendar.lastweek) &#123;</span><br><span class="line">      gitcalendar.weekdatacore += item.count</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">addbeforeweek</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = gitcalendar.thisdayindex; i &lt; gitcalendar.beforeweek.length; i++) &#123;</span><br><span class="line">      gitcalendar.weekdatacore += gitcalendar.beforeweek[i].count</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">addweek</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (gitcalendar.thisdayindex === <span class="number">6</span>) &#123;</span><br><span class="line">      gitcalendar.aweekago = gitcalendar.lastweek[<span class="number">0</span>].date;</span><br><span class="line">      addlastweek()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      lastweek = data.contributions[<span class="number">51</span>];</span><br><span class="line">      gitcalendar.aweekago = lastweek[gitcalendar.thisdayindex + <span class="number">1</span>].date;</span><br><span class="line">      addlastweek();</span><br><span class="line">      addbeforeweek()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  fetch(githubapiurl)</span><br><span class="line">    .then(<span class="function"><span class="params">data</span> =&gt;</span> data.json())</span><br><span class="line">    .then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">      gitcalendar.data = data.contributions;</span><br><span class="line">      gitcalendar.total = data.total;</span><br><span class="line">      gitcalendar.first2date = gitcalendar.data[<span class="number">48</span>];</span><br><span class="line">      gitcalendar.firstdate = gitcalendar.data[<span class="number">47</span>];</span><br><span class="line">      gitcalendar.firstweek = data.contributions[<span class="number">0</span>];</span><br><span class="line">      gitcalendar.lastweek = data.contributions[<span class="number">52</span>];</span><br><span class="line">      gitcalendar.beforeweek = data.contributions[<span class="number">51</span>];</span><br><span class="line">      gitcalendar.thisdayindex = gitcalendar.lastweek.length - <span class="number">1</span>;</span><br><span class="line">      gitcalendar.thisday = gitcalendar.lastweek[gitcalendar.thisdayindex].date;</span><br><span class="line">      gitcalendar.oneyearbeforeday = gitcalendar.firstweek[<span class="number">0</span>].date;</span><br><span class="line">      gitcalendar.monthindex = gitcalendar.thisday.substring(<span class="number">5</span>, <span class="number">7</span>) * <span class="number">1</span>;</span><br><span class="line">      gitcalendar.montharrbefore = gitcalendar.month.splice(gitcalendar.monthindex, <span class="number">12</span> - gitcalendar.monthindex);</span><br><span class="line">      gitcalendar.monthchange = gitcalendar.montharrbefore.concat(gitcalendar.month);</span><br><span class="line">      addweek(data);</span><br><span class="line">      addlastmonth();</span><br><span class="line">      responsiveChart();</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(error);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//手机版更换为svg绘制</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">document</span>.getElementById(<span class="string">&quot;gitcalendarcanvasbox&quot;</span>).offsetWidth &lt; <span class="number">500</span>) &#123;</span><br><span class="line">    gitcalendar.simplemode = <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//当改变窗口大小时重新绘制canvas</span></span><br><span class="line">  <span class="built_in">window</span>.onresize = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (gitcalendar.simplemode) responsiveChart()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//解决滚动滑轮时出现的标签显示</span></span><br><span class="line">  <span class="built_in">window</span>.onscroll = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.querySelector(<span class="string">&#x27;.angle-wrapper&#x27;</span>)) &#123;</span><br><span class="line">      <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.angle-wrapper&#x27;</span>).style.display = <span class="string">&#x27;none&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure><p>然后你要去创建 Stylus 样式辣</p><ul><li>3.进入<code>%brt%\themes\butterfly\source\css\_layout\</code>新建一个名为<code>gitcalendar.styl</code>的文件</li></ul><p>用 编 辑 器 打开<br>在文件内部 植 入 以下代码:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br></pre></td><td class="code"><pre><span class="line">if hexo-config(&#x27;gitcalendar.enable&#x27;)</span><br><span class="line">  <span class="selector-class">.gitcalendar</span></span><br><span class="line">    <span class="selector-tag">font-family</span> <span class="selector-tag">SourceHanSans-Medium</span></span><br><span class="line">    <span class="selector-tag">border</span> 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#DDDDDD</span></span><br><span class="line">    <span class="selector-tag">border-radius</span> 3<span class="selector-tag">px</span></span><br><span class="line">    <span class="selector-tag">min-height</span> 120<span class="selector-tag">px</span></span><br><span class="line">    <span class="selector-tag">text-align</span> <span class="selector-tag">center</span></span><br><span class="line">    <span class="selector-tag">margin</span> 0 <span class="selector-tag">auto</span></span><br><span class="line">    <span class="selector-tag">border-width</span> 0<span class="selector-tag">px</span></span><br><span class="line">    <span class="selector-tag">width</span> 100%</span><br><span class="line">    <span class="selector-tag">display</span> <span class="selector-tag">flex</span></span><br><span class="line">    <span class="selector-tag">display</span> <span class="selector-tag">-webkit-flex</span></span><br><span class="line">    <span class="selector-tag">justify-content</span> <span class="selector-tag">center</span></span><br><span class="line">    <span class="selector-tag">align-items</span> <span class="selector-tag">center</span></span><br><span class="line">    <span class="selector-tag">flex-wrap</span> <span class="selector-tag">wrap</span></span><br><span class="line">    <span class="selector-tag">img</span></span><br><span class="line">      &amp;<span class="selector-class">.spinner</span></span><br><span class="line">        <span class="selector-tag">width</span> 70<span class="selector-tag">px</span></span><br><span class="line">        <span class="selector-tag">margin-top</span> 50<span class="selector-tag">px</span></span><br><span class="line">        <span class="selector-tag">min-height</span> 70<span class="selector-tag">px</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.gitcalendar-graph</span> <span class="selector-tag">text</span><span class="selector-class">.wday</span>,</span><br><span class="line">  <span class="selector-class">.gitcalendar-graph</span> <span class="selector-tag">text</span><span class="selector-class">.month</span></span><br><span class="line">    <span class="selector-tag">font-size</span> 10<span class="selector-tag">px</span></span><br><span class="line">    <span class="selector-tag">fill</span> <span class="selector-id">#aaa</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.contrib-legend</span></span><br><span class="line">    <span class="selector-tag">text-align</span> <span class="selector-tag">right</span></span><br><span class="line">    <span class="selector-tag">padding</span> 0 14<span class="selector-tag">px</span> 10<span class="selector-tag">px</span> 0</span><br><span class="line">    <span class="selector-tag">display</span> <span class="selector-tag">inline-block</span></span><br><span class="line">    <span class="selector-tag">float</span> <span class="selector-tag">right</span></span><br><span class="line">    <span class="selector-class">.legend</span></span><br><span class="line">      <span class="selector-tag">display</span> <span class="selector-tag">inline-block</span></span><br><span class="line">      <span class="selector-tag">list-style</span> <span class="selector-tag">none</span></span><br><span class="line">      <span class="selector-tag">margin</span> 0 5<span class="selector-tag">px</span></span><br><span class="line">      <span class="selector-tag">position</span> <span class="selector-tag">relative</span></span><br><span class="line">      <span class="selector-tag">bottom</span> <span class="selector-tag">-1px</span></span><br><span class="line">      <span class="selector-tag">padding</span> 0</span><br><span class="line">      <span class="selector-tag">li</span></span><br><span class="line">        <span class="selector-tag">display</span> <span class="selector-tag">inline-block</span></span><br><span class="line">        <span class="selector-tag">width</span> 10<span class="selector-tag">px</span></span><br><span class="line">        <span class="selector-tag">height</span> 10<span class="selector-tag">px</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.text-small</span></span><br><span class="line">    <span class="selector-tag">font-size</span> 12<span class="selector-tag">px</span></span><br><span class="line">    <span class="selector-tag">color</span> <span class="selector-id">#767676</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.gitcalendar-graph</span></span><br><span class="line">    <span class="selector-tag">padding</span> 15<span class="selector-tag">px</span> 0 0</span><br><span class="line">    <span class="selector-tag">text-align</span> <span class="selector-tag">center</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.contrib-column</span></span><br><span class="line">    <span class="selector-tag">text-align</span> <span class="selector-tag">center</span></span><br><span class="line">    <span class="selector-tag">border-left</span> 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#ddd</span></span><br><span class="line">    <span class="selector-tag">border-top</span> 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#ddd</span></span><br><span class="line">    <span class="selector-tag">font-size</span> 11<span class="selector-tag">px</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.contrib-column-first</span></span><br><span class="line">    <span class="selector-tag">border-left</span> 0</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.table-column</span></span><br><span class="line">    <span class="selector-tag">padding</span> 10<span class="selector-tag">px</span></span><br><span class="line">    <span class="selector-tag">display</span> <span class="selector-tag">table-cell</span></span><br><span class="line">    <span class="selector-tag">width</span> 33%</span><br><span class="line">    <span class="selector-tag">vertical-align</span> <span class="selector-tag">top</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.contrib-number</span></span><br><span class="line">    <span class="selector-tag">font-weight</span> 300</span><br><span class="line">    <span class="selector-tag">line-height</span> 1.3<span class="selector-tag">em</span></span><br><span class="line">    <span class="selector-tag">font-size</span> 24<span class="selector-tag">px</span></span><br><span class="line">    <span class="selector-tag">display</span> <span class="selector-tag">block</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.monospace</span></span><br><span class="line">    <span class="selector-tag">text-align</span> <span class="selector-tag">center</span></span><br><span class="line">    <span class="selector-tag">color</span> <span class="selector-id">#000</span></span><br><span class="line">    <span class="selector-tag">font-family</span> <span class="selector-tag">monospace</span></span><br><span class="line">    <span class="selector-tag">a</span></span><br><span class="line">      <span class="selector-tag">color</span> <span class="selector-id">#1D75AB</span></span><br><span class="line">      <span class="selector-tag">text-decoration</span> <span class="selector-tag">none</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.contrib-footer</span></span><br><span class="line">    <span class="selector-tag">font-size</span> 11<span class="selector-tag">px</span></span><br><span class="line">    <span class="selector-tag">padding</span> 0 10<span class="selector-tag">px</span> 12<span class="selector-tag">px</span></span><br><span class="line">    <span class="selector-tag">text-align</span> <span class="selector-tag">left</span></span><br><span class="line">    <span class="selector-tag">width</span> 100%</span><br><span class="line">    <span class="selector-tag">box-sizing</span> <span class="selector-tag">border-box</span></span><br><span class="line">    <span class="selector-tag">height</span> 26<span class="selector-tag">px</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.left</span></span><br><span class="line">    &amp;<span class="selector-class">.text-muted</span></span><br><span class="line">      <span class="selector-tag">float</span> <span class="selector-tag">left</span></span><br><span class="line">      <span class="selector-tag">margin-left</span> 9<span class="selector-tag">px</span></span><br><span class="line">      <span class="selector-tag">color</span> <span class="selector-id">#767676</span></span><br><span class="line">      <span class="selector-tag">a</span></span><br><span class="line">        <span class="selector-tag">color</span> <span class="selector-id">#4078c0</span></span><br><span class="line">        <span class="selector-tag">text-decoration</span> <span class="selector-tag">none</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.left</span><span class="selector-class">.text-muted</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line">  <span class="selector-class">.monospace</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span></span><br><span class="line">    <span class="selector-tag">text-decoration</span> <span class="selector-tag">underline</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">h2</span></span><br><span class="line">    &amp;<span class="selector-class">.f4</span></span><br><span class="line">      &amp;<span class="selector-class">.text-normal</span></span><br><span class="line">        &amp;<span class="selector-class">.mb-3</span></span><br><span class="line">          <span class="selector-tag">display</span> <span class="selector-tag">none</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.float-left</span></span><br><span class="line">    &amp;<span class="selector-class">.text-gray</span></span><br><span class="line">      <span class="selector-tag">float</span> <span class="selector-tag">left</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-id">#user-activity-overview</span></span><br><span class="line">    <span class="selector-tag">display</span> <span class="selector-tag">none</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.day-tooltip</span></span><br><span class="line">    <span class="selector-tag">white-space</span> <span class="selector-tag">nowrap</span></span><br><span class="line">    <span class="selector-tag">position</span> <span class="selector-tag">absolute</span></span><br><span class="line">    <span class="selector-tag">z-index</span> 99999</span><br><span class="line">    <span class="selector-tag">padding</span> 10<span class="selector-tag">px</span></span><br><span class="line">    <span class="selector-tag">font-size</span> 12<span class="selector-tag">px</span></span><br><span class="line">    <span class="selector-tag">color</span> <span class="selector-id">#959da5</span></span><br><span class="line">    <span class="selector-tag">text-align</span> <span class="selector-tag">center</span></span><br><span class="line">    <span class="selector-tag">background</span> <span class="selector-tag">rgba</span>(0,0,0,.85)</span><br><span class="line">    <span class="selector-tag">border-radius</span> 3<span class="selector-tag">px</span></span><br><span class="line">    <span class="selector-tag">display</span> <span class="selector-tag">none</span></span><br><span class="line">    <span class="selector-tag">pointer-events</span> <span class="selector-tag">none</span></span><br><span class="line">    <span class="selector-tag">strong</span></span><br><span class="line">      <span class="selector-tag">color</span> <span class="selector-id">#dfe2e5</span></span><br><span class="line">    &amp;<span class="selector-class">.is-visible</span></span><br><span class="line">      <span class="selector-tag">display</span> <span class="selector-tag">block</span></span><br><span class="line">    &amp;<span class="selector-pseudo">:after</span></span><br><span class="line">      <span class="selector-tag">position</span> <span class="selector-tag">absolute</span></span><br><span class="line">      <span class="selector-tag">bottom</span> <span class="selector-tag">-10px</span></span><br><span class="line">      <span class="selector-tag">left</span> 50%</span><br><span class="line">      <span class="selector-tag">width</span> 5<span class="selector-tag">px</span></span><br><span class="line">      <span class="selector-tag">height</span> 5<span class="selector-tag">px</span></span><br><span class="line">      <span class="selector-tag">box-sizing</span> <span class="selector-tag">border-box</span></span><br><span class="line">      <span class="selector-tag">margin</span> 0 0 0 <span class="selector-tag">-5px</span></span><br><span class="line">      <span class="selector-tag">content</span> &quot; &quot;</span><br><span class="line">      <span class="selector-tag">border</span> 5<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-tag">transparent</span></span><br><span class="line">      <span class="selector-tag">border-top-color</span> <span class="selector-tag">rgba</span>(0,0,0,.85)</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.position-relative</span></span><br><span class="line">    <span class="selector-tag">width</span> 100%</span><br><span class="line">    <span class="selector-tag">padding-left</span> 20<span class="selector-tag">px</span></span><br><span class="line">    <span class="selector-tag">padding-right</span> 20<span class="selector-tag">px</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width:</span> <span class="number">650px</span>)</span><br><span class="line">    .contrib-column</span><br><span class="line">      display none</span><br><span class="line"></span><br><span class="line">  .angle-wrapper</span><br><span class="line">    z-index <span class="number">9999</span></span><br><span class="line">    display inline</span><br><span class="line">    display none</span><br><span class="line">    width <span class="number">200px</span></span><br><span class="line">    height <span class="number">40px</span></span><br><span class="line">    position relative</span><br><span class="line">    padding <span class="number">5px</span> <span class="number">0</span></span><br><span class="line">    background rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.8</span>)</span><br><span class="line">    border-radius <span class="number">8px</span></span><br><span class="line">    text-align center</span><br><span class="line">    color white</span><br><span class="line">    span</span><br><span class="line">      padding-bottom <span class="number">1em</span></span><br><span class="line">    &amp;:before</span><br><span class="line">      content <span class="string">&#x27;&#x27;</span></span><br><span class="line">      width <span class="number">0</span></span><br><span class="line">      height <span class="number">0</span></span><br><span class="line">      border <span class="number">10px</span> solid transparent</span><br><span class="line">      border-top-color rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.8</span>)</span><br><span class="line">      position absolute</span><br><span class="line">      left <span class="number">47.5%</span></span><br><span class="line">      top <span class="number">100%</span></span><br><span class="line"></span><br><span class="line">  .angle-box</span><br><span class="line">    position fixed</span><br><span class="line">    padding <span class="number">10px</span></span><br></pre></td></tr></table></figure><ul><li>4.快马加鞭的前往<code>%brt%\themes\butterfly\layout\</code>找到我们的 食 物 <code>index.pug</code></li></ul><p>为了方便我们食用,找到#recent-posts.recent-posts 在下面插入一段代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> theme.gitcalendar.enable</span><br><span class="line">  .recent-post-item(style=<span class="string">&#x27;width:100%&#x27;</span>)</span><br><span class="line">    !=partial(<span class="string">&#x27;includes/gitcalendar&#x27;</span>, &#123;&#125;, &#123;<span class="attr">cache</span>:theme.fragment_cache&#125;)</span><br><span class="line"><span class="keyword">if</span> theme.categoryBar.enable</span><br><span class="line">  .recent-post-item(style=<span class="string">&#x27;height:auto;width:100%;padding:0px;&#x27;</span>)</span><br><span class="line">    #categoryBar!= list_categories(site.categories,&#123;<span class="attr">class</span>: <span class="string">&#x27;categoryBar&#x27;</span>,<span class="attr">depth</span>: <span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure><p><strong>记得一定要放在+postUI 的前一行哦</strong><br><strong>-</strong> 5.进入<code>%brt%\themes\butterfly\layout\includes\</code>的<code>additional-js.pug</code>文件<br>在 script(src=url_for(theme.CDN.utils))的上面加入以下内容</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">script((src = url_for(theme.CDN.vue)));</span><br></pre></td></tr></table></figure><p>然后再找到 script(defer src=url_for(theme.CDN.busuanzi))配置项<br>在这下面放入以下代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">if</span> theme.gitcalendar.enable</span><br><span class="line">    !=partial(<span class="string">&#x27;includes/gitcalendar-js&#x27;</span>, &#123;&#125;, &#123;<span class="attr">cache</span>:theme.fragment_cache&#125;)</span><br><span class="line">!=partial(<span class="string">&#x27;includes/third-party/prismjs&#x27;</span>, &#123;&#125;, &#123;<span class="attr">cache</span>:theme.fragment_cache&#125;)</span><br></pre></td></tr></table></figure><p>好的,修改完了,接下来我们就可以去添加 CDN 配置项和 gitcalendar 配置项了<br>进入<code>%brt%\_config.butterfly.yml</code><br>找到 CDN 配置项<br>在 utils: /js/utils.js 配置项的下面插入以下代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue: https:<span class="comment">//cdn.jsdelivr.net/npm/vue@2.6.11</span></span><br></pre></td></tr></table></figure><p>然后随便找一个屑位置,插入以下代码:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#gitcalendar</span></span><br><span class="line"><span class="attr">gitcalendar:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">simplemode:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment">#设为true时使用canvas绘制gitgitcalendar，</span></span><br><span class="line">  <span class="comment">#设为false时使用svg绘制gitgitcalendar</span></span><br><span class="line">  <span class="comment">#canvas：dom数少，但图像会发生模糊，自适应一般</span></span><br><span class="line">  <span class="comment">#svg：dom数多，图像清晰，自适应更佳</span></span><br><span class="line">  <span class="attr">user:</span> <span class="string">slblog-github</span> <span class="comment">#这里填写你的github用户名</span></span><br><span class="line">  <span class="attr">apiurl:</span> <span class="comment"># 留空为默认公共API</span></span><br><span class="line">  <span class="comment"># 以下色调选择喜欢的一行保留即可。其余注释。</span></span><br><span class="line">  <span class="attr">color:</span> <span class="string">&quot;[&#x27;#e4dfd7&#x27;, &#x27;#f9f4dc&#x27;, &#x27;#f7e8aa&#x27;, &#x27;#f7e8aa&#x27;, &#x27;#f8df72&#x27;, &#x27;#fcd217&#x27;, &#x27;#fcc515&#x27;, &#x27;#f28e16&#x27;, &#x27;#fb8b05&#x27;, &#x27;#d85916&#x27;, &#x27;#f43e06&#x27;]&quot;</span> <span class="comment">#橘黄色调</span></span><br><span class="line">  <span class="comment"># color: &quot;[&#x27;#ebedf0&#x27;, &#x27;#fdcdec&#x27;, &#x27;#fc9bd9&#x27;, &#x27;#fa6ac5&#x27;, &#x27;#f838b2&#x27;, &#x27;#f5089f&#x27;, &#x27;#c4067e&#x27;, &#x27;#92055e&#x27;, &#x27;#540336&#x27;, &#x27;#48022f&#x27;, &#x27;#30021f&#x27;]&quot; #浅紫色调</span></span><br><span class="line">  <span class="comment"># color: &quot;[&#x27;#ebedf0&#x27;, &#x27;#f0fff4&#x27;, &#x27;#dcffe4&#x27;, &#x27;#bef5cb&#x27;, &#x27;#85e89d&#x27;, &#x27;#34d058&#x27;, &#x27;#28a745&#x27;, &#x27;#22863a&#x27;, &#x27;#176f2c&#x27;, &#x27;#165c26&#x27;, &#x27;#144620&#x27;]&quot; #翠绿色调</span></span><br><span class="line">  <span class="comment"># color: &quot;[&#x27;#ebedf0&#x27;, &#x27;#f1f8ff&#x27;, &#x27;#dbedff&#x27;, &#x27;#c8e1ff&#x27;, &#x27;#79b8ff&#x27;, &#x27;#2188ff&#x27;, &#x27;#0366d6&#x27;, &#x27;#005cc5&#x27;, &#x27;#044289&#x27;, &#x27;#032f62&#x27;, &#x27;#05264c&#x27;]&quot; #天青色调</span></span><br></pre></td></tr></table></figure><p>然后参照上面的配置就行辣~<br>关于配置 apiurl 可以参照<a href="https://akilar.top/posts/1f9c68c9/#%E8%87%AA%E5%BB%BAAPI%E9%83%A8%E7%BD%B2">Akilar 大佬的文章</a>自建 API 哦<br>各位有什么想魔改的可以评论以一下(只要不太难,毕竟我还是个 初 中 生)</p><h1 id="在你的网站添加一个-♂-美妙-♂-的-PACE-加载进度条"><a href="#在你的网站添加一个-♂-美妙-♂-的-PACE-加载进度条" class="headerlink" title="在你的网站添加一个 ♂ 美妙 ♂ 的 PACE 加载进度条"></a>在你的网站添加一个 ♂ 美妙 ♂ 的 PACE 加载进度条</h1><h2 id="这个很简单-只需要一个-JS-和一个-CSS-就可以了"><a href="#这个很简单-只需要一个-JS-和一个-CSS-就可以了" class="headerlink" title="这个很简单,只需要一个 JS 和一个 CSS 就可以了"></a>这个很简单,只需要一个 JS 和一个 CSS 就可以了</h2><p>现在我们开始吧<br>首先进入<code>%brt%\_config.butterfly.yml</code><br>找到 inject 大项<br>在 bottom 配置项下面添加如下配置:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">async</span> <span class="string">data-pjax</span> <span class="string">src=&quot;https://cdn.jsdelivr.net/gh/HCLonely/hclonely.github.io@1.4.7/js/custom/pace.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=stylesheet</span> <span class="string">href=&quot;https://cdn.jsdelivr.net/gh/HCLonely/hclonely.github.io@1.4.7/css/custom/pace-theme-flash.min.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><p>然后就行了,哈哈其实是用来水一下字数的</p><h2 id="备用引入"><a href="#备用引入" class="headerlink" title="备用引入"></a>备用引入</h2><p>备用 1</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">async</span> <span class="string">data-pjax</span> <span class="string">src=&quot;https://static.slqwq.cn/script/pace-main.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=stylesheet</span> <span class="string">href=&quot;https://static.slqwq.cn/styles/pace-theme-flash.min.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><p>备用 2</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">async</span> <span class="string">data-pjax</span> <span class="string">src=&quot;https://static-2.slqwq.cn/script/pace-main.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=stylesheet</span> <span class="string">href=&quot;https://static-2.slqwq.cn/styles/pace-theme-flash.min.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><p>备用 3</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">async</span> <span class="string">data-pjax</span> <span class="string">src=&quot;https://static-3.slqwq.cn/script/pace-main.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=stylesheet</span> <span class="string">href=&quot;https://static-3.slqwq.cn/styles/pace-theme-flash.min.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><p>备用 4</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">async</span> <span class="string">data-pjax</span> <span class="string">src=&quot;https://cdn.jsdelivr.net/gh/slblog-github/Static@main/script/pace-main.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=stylesheet</span> <span class="string">href=&quot;https://cdn.jsdelivr.net/gh/slblog-github/Static@main/styles/pace-theme-flash.min.css&quot;&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">想魔改自己的主题却总是报错?这篇文章我会将我的主题魔改贡献出来。</summary>
    
    
    
    <category term="Hexo" scheme="https://blog.slqwq.cn/categories/Hexo/"/>
    
    <category term="主题魔改" scheme="https://blog.slqwq.cn/categories/Hexo/%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9/"/>
    
    
    <category term="Hexo" scheme="https://blog.slqwq.cn/tags/Hexo/"/>
    
    <category term="主题魔改" scheme="https://blog.slqwq.cn/tags/%E4%B8%BB%E9%A2%98%E9%AD%94%E6%94%B9/"/>
    
  </entry>
  
</feed>
